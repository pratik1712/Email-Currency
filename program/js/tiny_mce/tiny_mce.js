(function(m){var o=/^\s*|\s*$/g,q={majorVersion:"3",minorVersion:"3.7",releaseDate:"2010-06-10",_init:function(){function k(v){if(v.src&&/tiny_mce(|_gzip|_jquery|_prototype)(_dev|_src)?.js/.test(v.src)){if(/_(src|dev)\.js/g.test(v.src))j.suffix="_src";if((r=v.src.indexOf("?"))!=-1)j.query=v.src.substring(r+1);j.baseURL=v.src.substring(0,v.src.lastIndexOf("/"));if(l&&j.baseURL.indexOf("://")==-1&&j.baseURL.indexOf("/")!==0)j.baseURL=l+j.baseURL;return j.baseURL}return null}var j=this,b=document,g=
navigator,d=g.userAgent,l,r,u;j.isOpera=m.opera&&opera.buildNumber;j.isWebKit=/WebKit/.test(d);j.isIE=!j.isWebKit&&!j.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(g.appName);j.isIE6=j.isIE&&/MSIE [56]/.test(d);j.isGecko=!j.isWebKit&&/Gecko/.test(d);j.isMac=d.indexOf("Mac")!=-1;j.isAir=/adobeair/i.test(d);j.isIDevice=/(iPad|iPhone)/.test(d);if(m.tinyMCEPreInit){j.suffix=tinyMCEPreInit.suffix;j.baseURL=tinyMCEPreInit.base;j.query=tinyMCEPreInit.query}else{j.suffix="";d=b.getElementsByTagName("base");
for(g=0;g<d.length;g++)if(u=d[g].href){if(/^https?:\/\/[^\/]+$/.test(u))u+="/";l=u?u.match(/.*\//)[0]:""}d=b.getElementsByTagName("script");for(g=0;g<d.length;g++)if(k(d[g]))return;if(b=b.getElementsByTagName("head")[0]){d=b.getElementsByTagName("script");for(g=0;g<d.length;g++)if(k(d[g]))break}}},is:function(k,j){if(!j)return k!==void 0;if(j=="array"&&k.hasOwnProperty&&k instanceof Array)return true;return typeof k==j},each:function(k,j,b){var g,d;if(!k)return 0;b=b||k;if(k.length!==void 0){g=0;
for(d=k.length;g<d;g++)if(j.call(b,k[g],g,k)===false)return 0}else for(g in k)if(k.hasOwnProperty(g))if(j.call(b,k[g],g,k)===false)return 0;return 1},map:function(k,j){var b=[];q.each(k,function(g){b.push(j(g))});return b},grep:function(k,j){var b=[];q.each(k,function(g){if(!j||j(g))b.push(g)});return b},inArray:function(k,j){var b,g;if(k){b=0;for(g=k.length;b<g;b++)if(k[b]===j)return b}return-1},extend:function(k,j){var b,g,d=arguments;b=1;for(g=d.length;b<g;b++){j=d[b];q.each(j,function(l,r){if(l!==
void 0)k[r]=l})}return k},trim:function(k){return(k?""+k:"").replace(o,"")},create:function(k,j){var b,g,d,l,r,u=0;k=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(k);d=k[3].match(/(^|\.)(\w+)$/i)[2];g=this.createNS(k[3].replace(/\.\w+$/,""));if(!g[d])if(k[2]=="static"){g[d]=j;this.onCreate&&this.onCreate(k[2],k[3],g[d])}else{if(!j[d]){j[d]=function(){};u=1}g[d]=j[d];this.extend(g[d].prototype,j);if(k[5]){b=this.resolve(k[5]).prototype;l=k[5].match(/\.(\w+)$/i)[1];r=g[d];g[d]=u?function(){return b[l].apply(this,
arguments)}:function(){this.parent=b[l];return r.apply(this,arguments)};g[d].prototype[d]=g[d];this.each(b,function(v,f){g[d].prototype[f]=b[f]});this.each(j,function(v,f){if(b[f])g[d].prototype[f]=function(){this.parent=b[f];return v.apply(this,arguments)};else if(f!=d)g[d].prototype[f]=v})}this.each(j["static"],function(v,f){g[d][f]=v});this.onCreate&&this.onCreate(k[2],k[3],g[d].prototype)}},walk:function(k,j,b,g){g=g||this;if(k){if(b)k=k[b];q.each(k,function(d,l){if(j.call(g,d,l,b)===false)return false;
q.walk(d,j,b,g)})}},createNS:function(k,j){var b,g;j=j||m;k=k.split(".");for(b=0;b<k.length;b++){g=k[b];j[g]||(j[g]={});j=j[g]}return j},resolve:function(k,j){var b,g;j=j||m;k=k.split(".");b=0;for(g=k.length;b<g;b++){j=j[k[b]];if(!j)break}return j},addUnload:function(k,j){var b=this;k={func:k,scope:j||this};if(b.unloads)b.unloads.push(k);else{var g=function(){var l=b.unloads,r,u;if(l){for(u in l)(r=l[u])&&r.func&&r.func.call(r.scope,1);if(m.detachEvent){m.detachEvent("onbeforeunload",d);m.detachEvent("onunload",
g)}else m.removeEventListener&&m.removeEventListener("unload",g,false);b.unloads=w=g=0;m.CollectGarbage&&CollectGarbage()}},d=function(){var l=document;if(l.readyState=="interactive"){var r=function(){l.detachEvent("onstop",r);g&&g();l=0};l&&l.attachEvent("onstop",r);m.setTimeout(function(){l&&l.detachEvent("onstop",r)},0)}};if(m.attachEvent){m.attachEvent("onunload",g);m.attachEvent("onbeforeunload",d)}else m.addEventListener&&m.addEventListener("unload",g,false);b.unloads=[k]}return k},removeUnload:function(k){var j=
this.unloads,b=null;q.each(j,function(g,d){if(g&&g.func==k){j.splice(d,1);b=k;return false}});return b},explode:function(k,j){return k?q.map(k.split(j||","),q.trim):k},_addVer:function(k){var j;if(!this.query)return k;j=(k.indexOf("?")==-1?"?":"&")+this.query;if(k.indexOf("#")==-1)return k+j;return k.replace("#",j+"#")}};q._init();m.tinymce=m.tinyMCE=q})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(m){this.scope=m||this;this.listeners=[]},add:function(m,o){this.listeners.push({cb:m,scope:o||this.scope});return m},addToTop:function(m,o){this.listeners.unshift({cb:m,scope:o||this.scope});return m},remove:function(m){var o=this.listeners,q=null;tinymce.each(o,function(k,j){if(m==k.cb){q=m;o.splice(j,1);return false}});return q},dispatch:function(){var m,o=arguments,q,k=this.listeners;for(q=0;q<k.length;q++){m=
k[q];m=m.cb.apply(m.scope,o);if(m===false)break}return m}});
(function(){var m=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(o,q){var k=this,j;o=tinymce.trim(o);q=k.settings=q||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(o)||/^\s*#/.test(o))k.source=o;else{if(o.indexOf("/")===0&&o.indexOf("//")!==0)o=(q.base_uri?q.base_uri.protocol||"http":"http")+"://mce_host"+o;/^\w*:?\/\//.test(o)||(o=(q.base_uri.protocol||"http")+"://mce_host"+k.toAbsPath(q.base_uri.path,o));o=o.replace(/@@/g,"(mce_at)");o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);
m(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,g){var d=o[g];if(d)d=d.replace(/\(mce_at\)/g,"@@");k[b]=d});if(j=q.base_uri){if(!k.protocol)k.protocol=j.protocol;if(!k.userInfo)k.userInfo=j.userInfo;if(!k.port&&k.host=="mce_host")k.port=j.port;if(!k.host||k.host=="mce_host")k.host=j.host;k.source=""}}},setPath:function(o){o=/^(.*?)\/?(\w+)?$/.exec(o);this.path=o[0];this.directory=o[1];this.file=o[2];this.source=
"";this.getURI()},toRelative:function(o){var q;if(o==="./")return o;o=new tinymce.util.URI(o,{base_uri:this});if(o.host!="mce_host"&&this.host!=o.host&&o.host||this.port!=o.port||this.protocol!=o.protocol)return o.getURI();q=this.toRelPath(this.path,o.path);if(o.query)q+="?"+o.query;if(o.anchor)q+="#"+o.anchor;return q},toAbsolute:function(o,q){o=new tinymce.util.URI(o,{base_uri:this});return o.getURI(this.host==o.host&&this.protocol==o.protocol?q:0)},toRelPath:function(o,q){var k,j=0,b="",g,d;o=
o.substring(0,o.lastIndexOf("/"));o=o.split("/");k=q.split("/");if(o.length>=k.length){g=0;for(d=o.length;g<d;g++)if(g>=k.length||o[g]!=k[g]){j=g+1;break}}if(o.length<k.length){g=0;for(d=k.length;g<d;g++)if(g>=o.length||o[g]!=k[g]){j=g+1;break}}if(j==1)return q;g=0;for(d=o.length-(j-1);g<d;g++)b+="../";g=j-1;for(d=k.length;g<d;g++)b+=g!=j-1?"/"+k[g]:k[g];return b},toAbsPath:function(o,q){var k,j=0,b=[],g;g=/\/$/.test(q)?"/":"";o=o.split("/");q=q.split("/");m(o,function(d){d&&b.push(d)});o=b;k=q.length-
1;for(b=[];k>=0;k--)if(!(q[k].length==0||q[k]=="."))if(q[k]=="..")j++;else if(j>0)j--;else b.push(q[k]);k=o.length-j;k=k<=0?b.reverse().join("/"):o.slice(0,k).join("/")+"/"+b.reverse().join("/");if(k.indexOf("/")!==0)k="/"+k;if(g&&k.lastIndexOf("/")!==k.length-1)k+=g;return k},getURI:function(o){var q;if(!this.source||o){q="";if(!o){if(this.protocol)q+=this.protocol+"://";if(this.userInfo)q+=this.userInfo+"@";if(this.host)q+=this.host;if(this.port)q+=":"+this.port}if(this.path)q+=this.path;if(this.query)q+=
"?"+this.query;if(this.anchor)q+="#"+this.anchor;this.source=q}return this.source}})})();
(function(){var m=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(o){o=this.get(o);var q;o&&m(o.split("&"),function(k){k=k.split("=");q=q||{};q[unescape(k[0])]=unescape(k[1])});return q},setHash:function(o,q,k,j,b,g){var d="";m(q,function(l,r){d+=(!d?"":"&")+escape(r)+"="+escape(l)});this.set(o,d,k,j,b,g)},get:function(o){var q=document.cookie,k=o+"=",j;if(q){j=q.indexOf("; "+k);if(j==-1){j=q.indexOf(k);if(j!=0)return null}else j+=2;o=q.indexOf(";",j);if(o==-1)o=q.length;
return unescape(q.substring(j+k.length,o))}},set:function(o,q,k,j,b,g){document.cookie=o+"="+escape(q)+(k?"; expires="+k.toGMTString():"")+(j?"; path="+escape(j):"")+(b?"; domain="+b:"")+(g?"; secure":"")},remove:function(o,q){var k=new Date;k.setTime(k.getTime()-1E3);this.set(o,"",k,q,k)}})})();
tinymce.create("static tinymce.util.JSON",{serialize:function(m){var o,q,k=tinymce.util.JSON.serialize,j;if(m==null)return"null";j=typeof m;if(j=="string"){q="\u0008b\tt\nn\u000cf\rr\"\"''\\\\";return'"'+m.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(b,g){o=q.indexOf(g);if(o+1)return"\\"+q.charAt(o+1);b=g.charCodeAt().toString(16);return"\\u"+"0000".substring(b.length)+b})+'"'}if(j=="object"){if(m.hasOwnProperty&&m instanceof Array){o=0;for(q="[";o<m.length;o++)q+=(o>0?",":"")+k(m[o]);return q+
"]"}q="{";for(o in m)q+=typeof m[o]!="function"?(q.length>1?',"':'"')+o+'":'+k(m[o]):"";return q+"}"}return""+m},parse:function(m){try{return eval("("+m+")")}catch(o){}}});
tinymce.create("static tinymce.util.XHR",{send:function(m){function o(g){q=0;try{q=new ActiveXObject(g)}catch(d){}return q}var q,k=window,j=0;m.scope=m.scope||this;m.success_scope=m.success_scope||m.scope;m.error_scope=m.error_scope||m.scope;m.async=m.async===false?false:true;m.data=m.data||"";if(q=k.XMLHttpRequest?new XMLHttpRequest:o("Microsoft.XMLHTTP")||o("Msxml2.XMLHTTP")){q.overrideMimeType&&q.overrideMimeType(m.content_type);q.open(m.type||(m.data?"POST":"GET"),m.url,m.async);m.content_type&&
q.setRequestHeader("Content-Type",m.content_type);q.setRequestHeader("X-Requested-With","XMLHttpRequest");q.send(m.data);var b=function(){if(!m.async||q.readyState==4||j++>1E4){if(m.success&&j<1E4&&q.status==200)m.success.call(m.success_scope,""+q.responseText,q,m);else if(m.error)m.error.call(m.error_scope,j>1E4?"TIMED_OUT":"GENERAL",q,m);q=null}else k.setTimeout(b,10)};if(!m.async)return b();k.setTimeout(b,10)}}});
(function(){var m=tinymce.extend,o=tinymce.util.JSON,q=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(k){this.settings=m({},k);this.count=0},send:function(k){var j=k.error,b=k.success;k=m(this.settings,k);k.success=function(g,d){g=o.parse(g);if(typeof g=="undefined")g={error:"JSON Parse error."};g.error?j.call(k.error_scope||k.scope,g.error,d):b.call(k.success_scope||k.scope,g.result)};k.error=function(g,d){j.call(k.error_scope||k.scope,g,d)};k.data=o.serialize({id:k.id||
"c"+this.count++,method:k.method,params:k.params});k.content_type="application/json";q.send(k)},"static":{sendRPC:function(k){return(new tinymce.util.JSONRequest).send(k)}}})})();
(function(m){function o(c){var i={},a;c=c.split(",");for(a=c.length;a>=0;a--)i[c[a]]=1;return i}var q=m.each,k=m.is,j=m.isWebKit,b=m.isIE,g=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,d=o("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),l=o("src,href,style,coords,shape"),r={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},u=/[<>&\"]/g,v=
/^([a-z0-9],?)+$/i,f=/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)(\s*\/?)>/g,e=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;m.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",
type:"type"},DOMUtils:function(c,i){var a=this;a.doc=c;a.win=window;a.files={};a.cssFlicker=false;a.counter=0;a.boxModel=!m.isIE||c.compatMode=="CSS1Compat";a.stdMode=c.documentMode===8;a.settings=i=m.extend({keep_values:false,hex_colors:1,process_html:1},i);if(m.isIE6)try{c.execCommand("BackgroundImageCache",false,true)}catch(h){a.cssFlicker=true}if(i.valid_styles){a._styles={};q(i.valid_styles,function(n,p){a._styles[p]=m.explode(n)})}m.addUnload(a.destroy,a)},getRoot:function(){var c=this.settings;
return c&&this.get(c.root_element)||this.doc.body},getViewPort:function(c){var i;c=!c?this.win:c;i=c.document;i=this.boxModel?i.documentElement:i.body;return{x:c.pageXOffset||i.scrollLeft,y:c.pageYOffset||i.scrollTop,w:c.innerWidth||i.clientWidth,h:c.innerHeight||i.clientHeight}},getRect:function(c){var i;c=this.get(c);i=this.getPos(c);c=this.getSize(c);return{x:i.x,y:i.y,w:c.w,h:c.h}},getSize:function(c){var i,a;c=this.get(c);i=this.getStyle(c,"width");a=this.getStyle(c,"height");if(i.indexOf("px")===
-1)i=0;if(a.indexOf("px")===-1)a=0;return{w:parseInt(i)||c.offsetWidth||c.clientWidth,h:parseInt(a)||c.offsetHeight||c.clientHeight}},getParent:function(c,i,a){return this.getParents(c,i,a,false)},getParents:function(c,i,a,h){var n=this,p,t=n.settings,s=[];c=n.get(c);h=h===undefined;if(t.strict_root)a=a||n.getRoot();if(k(i,"string")){p=i;i=i==="*"?function(x){return x.nodeType==1}:function(x){return n.is(x,p)}}for(;c;){if(c==a||!c.nodeType||c.nodeType===9)break;if(!i||i(c))if(h)s.push(c);else return c;
c=c.parentNode}return h?s:null},get:function(c){var i;if(c&&this.doc&&typeof c=="string"){i=c;if((c=this.doc.getElementById(c))&&c.id!==i)return this.doc.getElementsByName(i)[1]}return c},getNext:function(c,i){return this._findSib(c,i,"nextSibling")},getPrev:function(c,i){return this._findSib(c,i,"previousSibling")},select:function(c,i){return m.dom.Sizzle(c,this.get(i)||this.get(this.settings.root_element)||this.doc,[])},is:function(c,i){var a;if(c.length===undefined){if(i==="*")return c.nodeType==
1;if(v.test(i)){i=i.toLowerCase().split(/,/);c=c.nodeName.toLowerCase();for(a=i.length-1;a>=0;a--)if(i[a]==c)return true;return false}}return m.dom.Sizzle.matches(i,c.nodeType?[c]:c).length>0},add:function(c,i,a,h,n){var p=this;return this.run(c,function(t){var s;s=k(i,"string")?p.doc.createElement(i):i;p.setAttribs(s,a);if(h)h.nodeType?s.appendChild(h):p.setHTML(s,h);return!n?t.appendChild(s):s})},create:function(c,i,a){return this.add(this.doc.createElement(c),c,i,a,1)},createHTML:function(c,i,
a){var h="",n;h+="<"+c;for(n in i)if(i.hasOwnProperty(n))h+=" "+n+'="'+this.encode(i[n])+'"';if(m.is(a))return h+">"+a+"</"+c+">";return h+" />"},remove:function(c,i){return this.run(c,function(a){var h,n;h=a.parentNode;if(!h)return null;if(i)for(;n=a.firstChild;)!m.isIE||n.nodeType!==3||n.nodeValue?h.insertBefore(n,a):a.removeChild(n);return h.removeChild(a)})},setStyle:function(c,i,a){var h=this;return h.run(c,function(n){var p;p=n.style;i=i.replace(/-(\D)/g,function(t,s){return s.toUpperCase()});
if(h.pixelStyles.test(i)&&(m.is(a,"number")||/^[\-0-9\.]+$/.test(a)))a+="px";switch(i){case "opacity":if(b){p.filter=a===""?"":"alpha(opacity="+a*100+")";if(!c.currentStyle||!c.currentStyle.hasLayout)p.display="inline-block"}p[i]=p["-moz-opacity"]=p["-khtml-opacity"]=a||"";break;case "float":b?p.styleFloat=a:p.cssFloat=a;break;default:p[i]=a||""}h.settings.update_styles&&h.setAttrib(n,"_mce_style")})},getStyle:function(c,i,a){c=this.get(c);if(!c)return false;if(this.doc.defaultView&&a){i=i.replace(/[A-Z]/g,
function(n){return"-"+n});try{return this.doc.defaultView.getComputedStyle(c,null).getPropertyValue(i)}catch(h){return null}}i=i.replace(/-(\D)/g,function(n,p){return p.toUpperCase()});if(i=="float")i=b?"styleFloat":"cssFloat";if(c.currentStyle&&a)return c.currentStyle[i];return c.style[i]},setStyles:function(c,i){var a=this,h=a.settings,n;n=h.update_styles;h.update_styles=0;q(i,function(p,t){a.setStyle(c,t,p)});h.update_styles=n;h.update_styles&&a.setAttrib(c,h.cssText)},setAttrib:function(c,i,a){var h=
this;if(c&&i){if(h.settings.strict)i=i.toLowerCase();return this.run(c,function(n){var p=h.settings;switch(i){case "style":if(!k(a,"string")){q(a,function(t,s){h.setStyle(n,s,t)});return}if(p.keep_values)a&&!h._isRes(a)?n.setAttribute("_mce_style",a,2):n.removeAttribute("_mce_style",2);n.style.cssText=a;break;case "class":n.className=a||"";break;case "src":case "href":if(p.keep_values){if(p.url_converter)a=p.url_converter.call(p.url_converter_scope||h,a,i,n);h.setAttrib(n,"_mce_"+i,a,2)}break;case "shape":n.setAttribute("_mce_style",
a)}k(a)&&a!==null&&a.length!==0?n.setAttribute(i,""+a,2):n.removeAttribute(i,2)})}},setAttribs:function(c,i){var a=this;return this.run(c,function(h){q(i,function(n,p){a.setAttrib(h,p,n)})})},getAttrib:function(c,i,a){var h;c=this.get(c);if(!c||c.nodeType!==1)return false;k(a)||(a="");if(/^(src|href|style|coords|shape)$/.test(i))if(h=c.getAttribute("_mce_"+i))return h;if(b&&this.props[i])h=(h=c[this.props[i]])&&h.nodeValue?h.nodeValue:h;h||(h=c.getAttribute(i,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(i)){if(c[this.props[i]]===
true&&h==="")return i;return h?i:""}if(c.nodeName==="FORM"&&c.getAttributeNode(i))return c.getAttributeNode(i).nodeValue;if(i==="style")if(h=h||c.style.cssText){h=this.serializeStyle(this.parseStyle(h),c.nodeName);this.settings.keep_values&&!this._isRes(h)&&c.setAttribute("_mce_style",h)}if(j&&i==="class"&&h)h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,"");if(b)switch(i){case "rowspan":case "colspan":if(h===1)h="";break;case "size":if(h==="+0"||h===20||h===0)h="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":if(h===
0)h="";break;case "hspace":if(h===-1)h="";break;case "maxlength":case "tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case "multiple":case "compact":case "noshade":case "nowrap":if(h===65535)return i;return a;case "shape":h=h.toLowerCase();break;default:if(i.indexOf("on")===0&&h)h=(""+h).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}return h!==undefined&&h!==null&&h!==""?""+h:a},getPos:function(c,i){var a=0,h=0,n=this.doc;c=this.get(c);i=i||n.body;if(c){if(b&&!this.stdMode){c=
c.getBoundingClientRect();h=this.boxModel?n.documentElement:n.body;a=this.getStyle(this.select("html")[0],"borderWidth");a=(a=="medium"||this.boxModel&&!this.isIE6)&&2||a;c.top+=this.win.self!=this.win.top?2:0;return{x:c.left+h.scrollLeft-a,y:c.top+h.scrollTop-a}}for(n=c;n&&n!=i&&n.nodeType;){a+=n.offsetLeft||0;h+=n.offsetTop||0;n=n.offsetParent}for(n=c.parentNode;n&&n!=i&&n.nodeType;){a-=n.scrollLeft||0;h-=n.scrollTop||0;n=n.parentNode}}return{x:a,y:h}},parseStyle:function(c){function i(p,t,s){var x,
y;if(x=n[p+"-top"+t]){y=n[p+"-right"+t];if(x==y){x=n[p+"-bottom"+t];if(y==x){y=n[p+"-left"+t];if(x==y){n[s]=y;delete n[p+"-top"+t];delete n[p+"-right"+t];delete n[p+"-bottom"+t];delete n[p+"-left"+t]}}}}}var a=this,h=a.settings,n={};if(!c)return n;c=c.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");q(c.split(";"),function(p){var t,s=[];if(p){p=p.replace(/_MCE_SEMI_/g,";");p=p.replace(/url\([^\)]+\)/g,function(x){s.push(x);return"url("+s.length+")"});p=p.split(":");t=m.trim(p[1]);t=t.replace(/url\(([^\)]+)\)/g,
function(x,y){return s[parseInt(y)-1]});t=t.replace(/rgb\([^\)]+\)/g,function(x){return a.toHex(x)});if(h.url_converter)t=t.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(x,y){return"url("+h.url_converter.call(h.url_converter_scope||a,a.decode(y),"style",null)+")"});n[m.trim(p[0]).toLowerCase()]=t}});i("border","","border");i("border","-width","border-width");i("border","-color","border-color");i("border","-style","border-style");i("padding","","padding");i("margin","","margin");(function(p,
t,s,x){var y;if(y=n[t])if(y=n[s])if(y=n[x]){n[p]=n[t]+" "+n[s]+" "+n[x];delete n[t];delete n[s];delete n[x]}})("border","border-width","border-style","border-color");if(b)if(n.border=="medium none")n.border="";return n},serializeStyle:function(c,i){function a(n,p){if(p&&n)if(p.indexOf("-")!==0){switch(p){case "font-weight":if(n==700)n="bold";break;case "color":case "background-color":n=n.toLowerCase()}h+=(h?" ":"")+p+": "+n+";"}}var h="";if(i&&this._styles){q(this._styles["*"],function(n){a(c[n],
n)});q(this._styles[i.toLowerCase()],function(n){a(c[n],n)})}else q(c,a);return h},loadCSS:function(c){var i=this,a=i.doc,h;c||(c="");h=i.select("head")[0];q(c.split(","),function(n){var p;if(!i.files[n]){i.files[n]=true;p=i.create("link",{rel:"stylesheet",href:m._addVer(n)});if(b&&a.documentMode)p.onload=function(){a.recalc();p.onload=null};h.appendChild(p)}})},addClass:function(c,i){return this.run(c,function(a){var h;if(!i)return 0;if(this.hasClass(a,i))return a.className;h=this.removeClass(a,
i);return a.className=(h!=""?h+" ":"")+i})},removeClass:function(c,i){var a=this,h;return a.run(c,function(n){var p;if(a.hasClass(n,i)){h||(h=RegExp("(^|\\s+)"+i+"(\\s+|$)","g"));p=n.className.replace(h," ");p=m.trim(p!=" "?p:"");n.className=p;if(!p){n.removeAttribute("class");n.removeAttribute("className")}return p}return n.className})},hasClass:function(c,i){c=this.get(c);if(!c||!i)return false;return(" "+c.className+" ").indexOf(" "+i+" ")!==-1},show:function(c){return this.setStyle(c,"display",
"block")},hide:function(c){return this.setStyle(c,"display","none")},isHidden:function(c){c=this.get(c);return!c||c.style.display=="none"||this.getStyle(c,"display")=="none"},uniqueId:function(c){return(!c?"mce_":c)+this.counter++},setHTML:function(c,i){var a=this;return this.run(c,function(h){var n,p,t,s,x;i=a.processHTML(i);if(b){var y=function(){for(;h.firstChild;)h.firstChild.removeNode();try{h.innerHTML="<br />"+i;h.removeChild(h.firstChild)}catch(D){n=a.create("div");n.innerHTML="<br />"+i;
q(n.childNodes,function(B,M){M&&h.appendChild(B)})}};if(a.settings.fix_ie_paragraphs)i=i.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>');y();if(a.settings.fix_ie_paragraphs){t=h.getElementsByTagName("p");p=t.length-1;for(n=0;p>=0;p--){s=t[p];if(!s.hasChildNodes()){if(!s._mce_keep){n=1;break}s.removeAttribute("_mce_keep")}}}if(n){i=i.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');i=i.replace(/<\/p>/gi,"</div>");y();if(a.settings.fix_ie_paragraphs){t=h.getElementsByTagName("DIV");
for(p=t.length-1;p>=0;p--){s=t[p];if(s._mce_tmp){x=a.doc.createElement("p");s.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(D,B){var M;if(B!=="_mce_tmp"){M=s.getAttribute(B);if(!M&&B==="class")M=s.className;x.setAttribute(B,M)}});for(n=0;n<s.childNodes.length;n++)x.appendChild(s.childNodes[n].cloneNode(true));s.swapNode(x)}}}}}else h.innerHTML=i;return i})},processHTML:function(c){var i=this,a=i.settings,h=[];if(!a.process_html)return c;if(b){c=c.replace(/&apos;/g,"&#39;");c=c.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,
"")}c=c.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(a.keep_values){if(/<script|noscript|style/i.test(c)){var n=function(p){p=p.replace(/(<!--\[CDATA\[|\]\]--\>)/g,"\n");p=p.replace(/^[\r\n]*|[\r\n]*$/g,"");p=p.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");return p=p.replace(/\s*(\/\/\s*\]\]>|\/\/\s*--\>|\]\]>|--\>|\]\]--\>)\s*$/g,"")};c=c.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(p,t,s){t||(t=' type="text/javascript"');t=t.replace(/src=\"([^\"]+)\"?/i,
function(x,y){if(a.url_converter)y=i.encode(a.url_converter.call(a.url_converter_scope||i,i.decode(y),"src","script"));return'_mce_src="'+y+'"'});if(m.trim(s)){h.push(n(s));s="<!--\nMCE_SCRIPT:"+(h.length-1)+"\n// --\>"}return"<mce:script"+t+">"+s+"</mce:script>"});c=c.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(p,t,s){if(s){h.push(n(s));s="<!--\nMCE_SCRIPT:"+(h.length-1)+"\n--\>"}return"<mce:style"+t+">"+s+"</mce:style><style "+t+' _mce_bogus="1">'+s+"</style>"});c=c.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,
function(p,t,s){return"<mce:noscript"+t+"><!--"+i.encode(s).replace(/--/g,"&#45;&#45;")+"--\></mce:noscript>"})}c=c.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]--\>");c=function(p){return p.replace(f,function(t,s,x,y){return"<"+s+x.replace(e,function(D,B,M,X,C){B=B.toLowerCase();M=M||X||C||"";if(d[B]){if(M==="false"||M==="0")return;return B+'="'+B+'"'}if(l[B]&&x.indexOf("_mce_"+B)==-1){D=i.decode(M);if(a.url_converter&&(B=="src"||B=="href"))D=a.url_converter.call(a.url_converter_scope||i,
D,B,s);if(B=="style")D=i.serializeStyle(i.parseStyle(D),B);return B+'="'+M+'" _mce_'+B+'="'+i.encode(D)+'"'}return D})+y+">"})}(c);c=c.replace(/MCE_SCRIPT:([0-9]+)/g,function(p,t){return h[t]})}return c},getOuterHTML:function(c){var i;c=this.get(c);if(!c)return null;if(c.outerHTML!==undefined)return c.outerHTML;i=(c.ownerDocument||this.doc).createElement("body");i.appendChild(c.cloneNode(true));return i.innerHTML},setOuterHTML:function(c,i,a){function h(p,t,s){s=s.createElement("body");s.innerHTML=
t;for(t=s.lastChild;t;){n.insertAfter(t.cloneNode(true),p);t=t.previousSibling}n.remove(p)}var n=this;return this.run(c,function(p){p=n.get(p);if(p.nodeType==1){a=a||p.ownerDocument||n.doc;if(b)try{if(b&&p.nodeType==1)p.outerHTML=i;else h(p,i,a)}catch(t){h(p,i,a)}else h(p,i,a)}})},decode:function(c){var i,a;if(/&[\w#]+;/.test(c)){i=this.doc.createElement("div");i.innerHTML=c;i=i.firstChild;a="";if(i){do a+=i.nodeValue;while(i=i.nextSibling)}return a||c}return c},encode:function(c){return(""+c).replace(u,
function(i){return r[i]})},insertAfter:function(c,i){i=this.get(i);return this.run(c,function(a){var h,n;h=i.parentNode;(n=i.nextSibling)?h.insertBefore(a,n):h.appendChild(a);return a})},isBlock:function(c){if(c.nodeType&&c.nodeType!==1)return false;c=c.nodeName||c;return g.test(c)},replace:function(c,i,a){if(k(i,"array"))c=c.cloneNode(true);return this.run(i,function(h){a&&q(m.grep(h.childNodes),function(n){c.appendChild(n)});return h.parentNode.replaceChild(c,h)})},rename:function(c,i){var a=this,
h;if(c.nodeName!=i.toUpperCase()){h=a.create(i);q(a.getAttribs(c),function(n){a.setAttrib(h,n.nodeName,a.getAttrib(c,n.nodeName))});a.replace(h,c,1)}return h||c},findCommonAncestor:function(c,i){for(var a=c,h;a;){for(h=i;h&&a!=h;)h=h.parentNode;if(a==h)break;a=a.parentNode}if(!a&&c.ownerDocument)return c.ownerDocument.documentElement;return a},toHex:function(c){function i(h){h=parseInt(h).toString(16);return h.length>1?h:"0"+h}var a=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(c);
if(a)return c="#"+i(a[1])+i(a[2])+i(a[3]);return c},getClasses:function(){function c(t){q(t.imports,function(s){c(s)});q(t.cssRules||t.rules,function(s){switch(s.type||1){case 1:s.selectorText&&q(s.selectorText.split(","),function(x){x=x.replace(/^\s*|\s*$|^\s\./g,"");if(!(/\.mce/.test(x)||!/\.[\w\-]+$/.test(x))){n=x;x=x.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(!(h&&!(x=h(x,n))))if(!a[x]){i.push({"class":x});a[x]=1}}});break;case 3:c(s.styleSheet)}})}var i=[],a={},h=this.settings.class_filter,n;if(this.classes)return this.classes;
try{q(this.doc.styleSheets,c)}catch(p){}if(i.length>0)this.classes=i;return i},run:function(c,i,a){var h=this,n;if(h.doc&&typeof c==="string")c=h.get(c);if(!c)return false;a=a||this;if(!c.nodeType&&(c.length||c.length===0)){n=[];q(c,function(p,t){if(p){if(typeof p=="string")p=h.doc.getElementById(p);n.push(i.call(a,p,t))}});return n}return i.call(a,c)},getAttribs:function(c){var i;c=this.get(c);if(!c)return[];if(b){i=[];if(c.nodeName=="OBJECT")return c.attributes;c.nodeName==="OPTION"&&this.getAttrib(c,
"selected")&&i.push({specified:1,nodeName:"selected"});c.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){i.push({specified:1,nodeName:a})});return i}return c.attributes},destroy:function(c){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;c||m.removeUnload(this.destroy)},createRng:function(){var c=this.doc;return c.createRange?c.createRange():new m.dom.Range(this)},nodeIndex:function(c,i){var a=
0,h,n;if(c){h=c.nodeType;for(c=c.previousSibling;c;c=c.previousSibling){n=c.nodeType;if(i&&n==3)if(n==h||!c.nodeValue.length)continue;a++;h=n}}return a},split:function(c,i,a){function h(x){var y,D=x.childNodes;if(!(x.nodeType==1&&x.getAttribute("_mce_type")=="bookmark")){for(y=D.length-1;y>=0;y--)h(D[y]);if(x.nodeType!=9){if(x.nodeType==3&&x.nodeValue.length>0)return;if(x.nodeType==1){D=x.childNodes;D.length==1&&D[0]&&D[0].nodeType==1&&D[0].getAttribute("_mce_type")=="bookmark"&&x.parentNode.insertBefore(D[0],
x);if(D.length||/^(br|hr|input|img)$/i.test(x.nodeName))return}n.remove(x)}return x}}var n=this,p=n.createRng(),t,s;if(c&&i){p.setStart(c.parentNode,n.nodeIndex(c));p.setEnd(i.parentNode,n.nodeIndex(i));t=p.extractContents();p=n.createRng();p.setStart(i.parentNode,n.nodeIndex(i)+1);p.setEnd(c.parentNode,n.nodeIndex(c)+1);p=p.extractContents();s=c.parentNode;s.insertBefore(h(t),c);a?s.replaceChild(a,i):s.insertBefore(i,c);s.insertBefore(h(p),c);n.remove(c);return a||i}},bind:function(c,i,a,h){if(!this.events)this.events=
new m.dom.EventUtils;return this.events.add(c,i,a,h||this)},unbind:function(c,i,a){if(!this.events)this.events=new m.dom.EventUtils;return this.events.remove(c,i,a)},_findSib:function(c,i,a){var h=this,n=i;if(c){if(k(n,"string"))n=function(p){return h.is(p,i)};for(c=c[a];c;c=c[a])if(n(c))return c}return null},_isRes:function(c){return/^(top|left|bottom|right|width|height)/i.test(c)||/;\s*(top|left|bottom|right|width|height)/i.test(c)}});m.DOM=new m.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(m){function o(q){function k(C,E){r(t,C,E)}function j(C,E){r(s,C,E)}function b(C){k(C.parentNode,X(C))}function g(C){j(C.parentNode,X(C)+1)}function d(C,E){var A;if(C.nodeType==3)return C;if(E<0)return C;for(A=C.firstChild;A&&E>0;){--E;A=A.nextSibling}if(A)return A;return C}function l(C,E,A,K){var H,W;if(C==A){if(E==K)return 0;if(E<K)return-1;return 1}for(H=A;H&&H.parentNode!=C;)H=H.parentNode;if(H){W=0;for(A=C.firstChild;A!=H&&W<E;){W++;A=A.nextSibling}if(E<=W)return-1;return 1}for(H=C;H&&
H.parentNode!=A;)H=H.parentNode;if(H){W=0;for(A=A.firstChild;A!=H&&W<K;){W++;A=A.nextSibling}if(W<K)return-1;return 1}E=q.findCommonAncestor(C,A);for(C=C;C&&C.parentNode!=E;)C=C.parentNode;C||(C=E);for(K=A;K&&K.parentNode!=E;)K=K.parentNode;K||(K=E);if(C==K)return 0;for(A=E.firstChild;A;){if(A==C)return-1;if(A==K)return 1;A=A.nextSibling}}function r(C,E,A){if(C){a[y]=E;a[x]=A}else{a[D]=E;a[B]=A}for(E=a[D];E.parentNode;)E=E.parentNode;for(A=a[y];A.parentNode;)A=A.parentNode;if(A==E)l(a[y],a[x],a[D],
a[B])>0&&a.collapse(C);else a.collapse(C);a.collapsed=a[y]==a[D]&&a[x]==a[B];a.commonAncestorContainer=q.findCommonAncestor(a[y],a[D])}function u(C){var E,A=0,K=0,H;if(a[y]==a[D])return v(C);E=a[D];for(H=E.parentNode;H;E=H,H=H.parentNode){if(H==a[y]){var W=E;C=C;E=void 0;H=void 0;A=void 0;K=void 0;H=void 0;if(C!=p)E=h.createDocumentFragment();H=f(W,C);E&&E.appendChild(H);A=X(W)-a[x];if(!(A<=0))for(H=W.previousSibling;A>0;){K=H.previousSibling;H=i(H,C);E&&E.insertBefore(H,E.firstChild);--A;H=K}if(C!=
n){a.setEndBefore(W);a.collapse(s)}C=E;return C}++A}E=a[y];for(H=E.parentNode;H;E=H,H=H.parentNode){if(H==a[D]){W=E;C=C;E=void 0;A=void 0;H=void 0;A=void 0;K=void 0;H=void 0;if(C!=p)E=h.createDocumentFragment();H=e(W,C);E&&E.appendChild(H);A=X(W);++A;A=a[B]-A;for(H=W.nextSibling;A>0;){K=H.nextSibling;H=i(H,C);E&&E.appendChild(H);--A;H=K}if(C!=n){a.setStartAfter(W);a.collapse(t)}return E}++K}K=K-A;for(E=a[y];K>0;){E=E.parentNode;K--}for(A=a[D];K<0;){A=A.parentNode;K++}K=E.parentNode;for(H=A.parentNode;K!=
H;K=K.parentNode,H=H.parentNode){E=K;A=H}E=E;A=A;var V;if(C!=p)W=h.createDocumentFragment();V=e(E,C);W&&W.appendChild(V);K=X(E);H=X(A);++K;K=H-K;for(V=E.nextSibling;K>0;){H=V.nextSibling;V=i(V,C);W&&W.appendChild(V);V=H;--K}V=f(A,C);W&&W.appendChild(V);if(C!=n){a.setStartAfter(E);a.collapse(t)}return W}function v(C){var E,A,K,H;if(C!=p)E=h.createDocumentFragment();if(a[x]==a[B])return E;if(a[y].nodeType==3){A=a[y].nodeValue;A=A.substring(a[x],a[B]);if(C!=n){a[y].deleteData(a[x],a[B]-a[x]);a.collapse(t)}if(C==
p)return;E.appendChild(h.createTextNode(A));return E}K=d(a[y],a[x]);for(A=a[B]-a[x];A>0;){H=K.nextSibling;K=i(K,C);E&&E.appendChild(K);--A;K=H}C!=n&&a.collapse(t);return E}function f(C,E){var A=d(a[D],a[B]-1),K,H,W,V=A!=a[D];if(A==C)return c(A,V,s,E);K=A.parentNode;for(H=c(K,s,s,E);K;){for(;A;){W=A.previousSibling;A=c(A,V,s,E);E!=p&&H.insertBefore(A,H.firstChild);V=t;A=W}if(K==C)return H;A=K.previousSibling;K=K.parentNode;W=c(K,s,s,E);E!=p&&W.appendChild(H);H=W}}function e(C,E){var A=d(a[y],a[x]),
K=A!=a[y],H,W,V;if(A==C)return c(A,K,t,E);H=A.parentNode;for(W=c(H,s,t,E);H;){for(;A;){V=A.nextSibling;A=c(A,K,t,E);E!=p&&W.appendChild(A);K=t;A=V}if(H==C)return W;A=H.nextSibling;H=H.parentNode;V=c(H,s,t,E);E!=p&&V.appendChild(W);W=V}}function c(C,E,A,K){var H;if(E)return i(C,K);if(C.nodeType==3){E=C.nodeValue;if(A){H=a[x];A=E.substring(H);E=E.substring(0,H)}else{H=a[B];A=E.substring(0,H);E=E.substring(H)}if(K!=n)C.nodeValue=E;if(K==p)return;C=C.cloneNode(s);C.nodeValue=A;return C}if(K!=p)return C.cloneNode(s)}
function i(C,E){if(E!=p)return E==n?C.cloneNode(t):C;C.parentNode.removeChild(C)}var a=this,h=q.doc,n=1,p=2,t=true,s=false,x="startOffset",y="startContainer",D="endContainer",B="endOffset",M=tinymce.extend,X=q.nodeIndex;M(a,{startContainer:h,startOffset:0,endContainer:h,endOffset:0,collapsed:t,commonAncestorContainer:h,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:k,setEnd:j,setStartBefore:b,setStartAfter:function(C){k(C.parentNode,X(C)+1)},setEndBefore:function(C){j(C.parentNode,
X(C))},setEndAfter:g,collapse:function(C){if(C){a[D]=a[y];a[B]=a[x]}else{a[y]=a[D];a[x]=a[B]}a.collapsed=t},selectNode:function(C){b(C);g(C)},selectNodeContents:function(C){k(C,0);j(C,C.nodeType===1?C.childNodes.length:C.nodeValue.length)},compareBoundaryPoints:function(C){var E=a[y],A=a[x],K=a[D],H=a[B];if(C===0)return l(E,A,E,A);if(C===1)return l(E,A,K,H);if(C===2)return l(K,H,K,H);if(C===3)return l(K,H,E,A)},deleteContents:function(){u(p)},extractContents:function(){return u(0)},cloneContents:function(){return u(n)},
insertNode:function(C){var E=this[y],A=this[x],K;if((E.nodeType===3||E.nodeType===4)&&E.nodeValue)if(A)if(A>=E.nodeValue.length)q.insertAfter(C,E);else{A=E.splitText(A);E.parentNode.insertBefore(C,A)}else E.parentNode.insertBefore(C,E);else{if(E.childNodes.length>0)K=E.childNodes[A];K?E.insertBefore(C,K):E.appendChild(C)}},surroundContents:function(C){var E=a.extractContents();a.insertNode(C);C.appendChild(E);a.selectNode(C)},cloneRange:function(){return M(new o(q),{startContainer:a[y],startOffset:a[x],
endContainer:a[D],endOffset:a[B],collapsed:a.collapsed,commonAncestorContainer:a.commonAncestorContainer})}})}m.Range=o})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(m){function o(){function b(r){var u,v,f,e=0,c,i,a,h;f=g.duplicate();f.collapse(r);u=j.create("a");a=f.parentElement();if(a.hasChildNodes()){a.appendChild(u);f.moveToElementText(u);h=g.compareEndPoints(r?"StartToStart":"EndToEnd",f);if(h>0){d[r?"setStartAfter":"setEndAfter"](a);j.remove(u)}else{v=tinymce.grep(a.childNodes);for(c=v.length-1;e<=c;){i=Math.floor((e+c)/2);a.insertBefore(u,v[i]);f.moveToElementText(u);h=g.compareEndPoints(r?"StartToStart":
"EndToEnd",f);if(h>0)e=i+1;else if(h<0)c=i-1;else{found=true;break}}v=h>0||i==0?u.nextSibling:u.previousSibling;if(v.nodeType==1){j.remove(u);f=j.nodeIndex(v);v=v.parentNode;if(!r||i>0)f++}else{if(h>0||i==0){f.setEndPoint(r?"StartToStart":"EndToEnd",g);f=f.text.length}else{f.setEndPoint(r?"StartToStart":"EndToEnd",g);f=v.nodeValue.length-f.text.length}j.remove(u)}d[r?"setStart":"setEnd"](v,f)}}else d[r?"setStart":"setEnd"](a,0)}var g=m.getRng(),d=j.createRng(),l;l=g.item?g.item(0):g.parentElement();
if(l.ownerDocument!=j.doc)return d;if(g.item||!l.hasChildNodes()){d.setStart(l.parentNode,j.nodeIndex(l));d.setEnd(d.startContainer,d.startOffset+1);return d}l=m.isCollapsed();b(true);l||b();return d}var q,k,j=m.dom;this.addRange=function(b){var g,d,l=m.dom.doc;d=l.body;var r,u,v,f,e,c;this.destroy();r=b.startContainer;u=b.startOffset;v=b.endContainer;f=b.endOffset;d.createTextRange();if(r==l||v==l){g=d.createTextRange();g.collapse();g.select()}else{if(r.nodeType==1&&r.hasChildNodes()){g=r.childNodes.length-
1;if(u>g){e=1;r=r.childNodes[g]}else r=r.childNodes[u];if(r.nodeType==3)u=0}if(v.nodeType==1&&v.hasChildNodes()){g=v.childNodes.length-1;if(f==0){c=1;v=v.childNodes[0]}else{v=v.childNodes[Math.min(g,f-1)];if(v.nodeType==3)f=v.nodeValue.length}}if(r==v&&r.nodeType==1){if(/^(IMG|TABLE)$/.test(r.nodeName)&&u!=f){g=d.createControlRange();g.addElement(r)}else{g=d.createTextRange();if(!r.hasChildNodes()&&r.canHaveHTML)r.innerHTML="\ufeff";g.moveToElementText(r);if(r.innerHTML=="\ufeff"){g.collapse(true);
r.removeChild(r.firstChild)}}u==f&&g.collapse(f<=b.endContainer.childNodes.length-1);g.select();g.scrollIntoView()}else{g=d.createTextRange();b=l.createElement("span");b.innerHTML=" ";if(r.nodeType==3){e?j.insertAfter(b,r):r.parentNode.insertBefore(b,r);g.moveToElementText(b);b.parentNode.removeChild(b);u>0&&g.move("character",u)}else{g.moveToElementText(r);e&&g.collapse(false)}if(r==v&&r.nodeType==3)try{g.moveEnd("character",f-u);g.select();g.scrollIntoView()}catch(i){}else{d=d.createTextRange();
if(v.nodeType==3){v.parentNode.insertBefore(b,v);d.moveToElementText(b);b.parentNode.removeChild(b);d.move("character",f);g.setEndPoint("EndToStart",d)}else{d.moveToElementText(v);d.collapse(!!c);g.setEndPoint("EndToEnd",d)}g.select();g.scrollIntoView()}}}};this.getRangeAt=function(){if(!q||!tinymce.dom.RangeUtils.compareRanges(k,m.getRng())){q=o();k=m.getRng()}return q};this.destroy=function(){k=q=null};m.dom.boxModel&&function(){function b(f,e){var c=r.createTextRange();try{c.moveToPoint(f,e)}catch(i){c=
null}return c}function g(f){if(f.button){if(f=b(f.x,f.y)){f.compareEndPoints("StartToStart",v)>0?f.setEndPoint("StartToStart",v):f.setEndPoint("EndToEnd",v);f.select()}}else d()}function d(){j.unbind(l,"mouseup",d);j.unbind(l,"mousemove",g);u=0}var l=j.doc,r=l.body,u,v;l.documentElement.unselectable=true;j.bind(l,"mousedown",function(f){if(f.target.nodeName==="HTML"){u&&d();u=1;if(v=b(f.x,f.y)){j.bind(l,"mouseup",d);j.bind(l,"mousemove",g);v.select()}}})}()}})();
(function(){function m(a,h,n,p,t,s){t=0;for(var x=p.length;t<x;t++){var y=p[t];if(y){y=y[a];for(var D=false;y;){if(y.sizcache===n){D=p[y.sizset];break}if(y.nodeType===1&&!s){y.sizcache=n;y.sizset=t}if(y.nodeName.toLowerCase()===h){D=y;break}y=y[a]}p[t]=D}}}function o(a,h,n,p,t,s){t=0;for(var x=p.length;t<x;t++){var y=p[t];if(y){y=y[a];for(var D=false;y;){if(y.sizcache===n){D=p[y.sizset];break}if(y.nodeType===1){if(!s){y.sizcache=n;y.sizset=t}if(typeof h!=="string"){if(y===h){D=true;break}}else if(d.filter(h,
[y]).length>0){D=y;break}}y=y[a]}p[t]=D}}}var q=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,j=Object.prototype.toString,b=false,g=true;[0,0].sort(function(){g=false;return 0});var d=function(a,h,n,p){n=n||[];var t=h=h||document;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!a||typeof a!=="string")return n;var s=[],x,y,D,B,M=true,X=d.isXML(h),C=a,E;do{q.exec("");if(x=q.exec(C)){C=x[3];s.push(x[1]);if(x[2]){B=
x[3];break}}}while(x);if(s.length>1&&r.exec(a))if(s.length===2&&l.relative[s[0]])y=i(s[0]+s[1],h);else for(y=l.relative[s[0]]?[h]:d(s.shift(),h);s.length;){a=s.shift();if(l.relative[a])a+=s.shift();y=i(a,y)}else{if(!p&&s.length>1&&h.nodeType===9&&!X&&l.match.ID.test(s[0])&&!l.match.ID.test(s[s.length-1])){x=d.find(s.shift(),h,X);h=x.expr?d.filter(x.expr,x.set)[0]:x.set[0]}if(h){x=p?{expr:s.pop(),set:f(p)}:d.find(s.pop(),s.length===1&&(s[0]==="~"||s[0]==="+")&&h.parentNode?h.parentNode:h,X);y=x.expr?
d.filter(x.expr,x.set):x.set;if(s.length>0)D=f(y);else M=false;for(;s.length;){x=E=s.pop();if(l.relative[E])x=s.pop();else E="";if(x==null)x=h;l.relative[E](D,x,X)}}else D=[]}D||(D=y);D||d.error(E||a);if(j.call(D)==="[object Array]")if(M)if(h&&h.nodeType===1)for(a=0;D[a]!=null;a++){if(D[a]&&(D[a]===true||D[a].nodeType===1&&d.contains(h,D[a])))n.push(y[a])}else for(a=0;D[a]!=null;a++)D[a]&&D[a].nodeType===1&&n.push(y[a]);else n.push.apply(n,D);else f(D,n);if(B){d(B,t,n,p);d.uniqueSort(n)}return n};
d.uniqueSort=function(a){if(c){b=g;a.sort(c);if(b)for(var h=1;h<a.length;h++)a[h]===a[h-1]&&a.splice(h--,1)}return a};d.matches=function(a,h){return d(a,null,null,h)};d.find=function(a,h,n){var p;if(!a)return[];for(var t=0,s=l.order.length;t<s;t++){var x=l.order[t],y;if(y=l.leftMatch[x].exec(a)){var D=y[1];y.splice(1,1);if(D.substr(D.length-1)!=="\\"){y[1]=(y[1]||"").replace(/\\/g,"");p=l.find[x](y,h,n);if(p!=null){a=a.replace(l.match[x],"");break}}}}p||(p=h.getElementsByTagName("*"));return{set:p,
expr:a}};d.filter=function(a,h,n,p){for(var t=a,s=[],x=h,y,D,B=h&&h[0]&&d.isXML(h[0]);a&&h.length;){for(var M in l.filter)if((y=l.leftMatch[M].exec(a))!=null&&y[2]){var X=l.filter[M],C,E;E=y[1];D=false;y.splice(1,1);if(E.substr(E.length-1)!=="\\"){if(x===s)s=[];if(l.preFilter[M])if(y=l.preFilter[M](y,x,n,s,p,B)){if(y===true)continue}else D=C=true;if(y)for(var A=0;(E=x[A])!=null;A++)if(E){C=X(E,y,A,x);var K=p^!!C;if(n&&C!=null)if(K)D=true;else x[A]=false;else if(K){s.push(E);D=true}}if(C!==undefined){n||
(x=s);a=a.replace(l.match[M],"");if(!D)return[];break}}}if(a===t)if(D==null)d.error(a);else break;t=a}return x};d.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var l=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,h){var n=typeof h==="string",p=n&&!/\W/.test(h);n=n&&!p;if(p)h=h.toLowerCase();p=0;for(var t=a.length,s;p<t;p++)if(s=a[p]){for(;(s=s.previousSibling)&&s.nodeType!==1;);a[p]=n||s&&s.nodeName.toLowerCase()===
h?s||false:s===h}n&&d.filter(h,a,true)},">":function(a,h){var n=typeof h==="string",p,t=0,s=a.length;if(n&&!/\W/.test(h))for(h=h.toLowerCase();t<s;t++){if(p=a[t]){n=p.parentNode;a[t]=n.nodeName.toLowerCase()===h?n:false}}else{for(;t<s;t++)if(p=a[t])a[t]=n?p.parentNode:p.parentNode===h;n&&d.filter(h,a,true)}},"":function(a,h,n){var p=k++,t=o,s;if(typeof h==="string"&&!/\W/.test(h)){s=h=h.toLowerCase();t=m}t("parentNode",h,p,a,s,n)},"~":function(a,h,n){var p=k++,t=o,s;if(typeof h==="string"&&!/\W/.test(h)){s=
h=h.toLowerCase();t=m}t("previousSibling",h,p,a,s,n)}},find:{ID:function(a,h,n){if(typeof h.getElementById!=="undefined"&&!n)return(a=h.getElementById(a[1]))?[a]:[]},NAME:function(a,h){if(typeof h.getElementsByName!=="undefined"){for(var n=[],p=h.getElementsByName(a[1]),t=0,s=p.length;t<s;t++)p[t].getAttribute("name")===a[1]&&n.push(p[t]);return n.length===0?null:n}},TAG:function(a,h){return h.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,h,n,p,t,s){a=" "+a[1].replace(/\\/g,"")+" ";if(s)return a;
s=0;for(var x;(x=h[s])!=null;s++)if(x)if(t^(x.className&&(" "+x.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0))n||p.push(x);else if(n)h[s]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=h[1]+(h[2]||1)-0;a[3]=h[3]-0}a[0]=k++;return a},ATTR:function(a,h,n,p,t,s){h=a[1].replace(/\\/g,
"");if(!s&&l.attrMap[h])a[1]=l.attrMap[h];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,h,n,p,t){if(a[1]==="not")if((q.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=d(a[3],null,null,h);else{a=d.filter(a[3],h,n,true^t);n||p.push.apply(p,a);return false}else if(l.match.POS.test(a[0])||l.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,h,n){return!!d(n[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,h){return h===0},last:function(a,h,n,p){return h===p.length-1},even:function(a,h){return h%2===0},odd:function(a,h){return h%2===1},lt:function(a,h,n){return h<n[3]-0},gt:function(a,h,n){return h>n[3]-0},nth:function(a,h,n){return n[3]-
0===h},eq:function(a,h,n){return n[3]-0===h}},filter:{PSEUDO:function(a,h,n,p){var t=h[1],s=l.filters[t];if(s)return s(a,n,h,p);else if(t==="contains")return(a.textContent||a.innerText||d.getText([a])||"").indexOf(h[3])>=0;else if(t==="not"){h=h[3];n=0;for(p=h.length;n<p;n++)if(h[n]===a)return false;return true}else d.error("Syntax error, unrecognized expression: "+t)},CHILD:function(a,h){var n=h[1],p=a;switch(n){case "only":case "first":for(;p=p.previousSibling;)if(p.nodeType===1)return false;if(n===
"first")return true;p=a;case "last":for(;p=p.nextSibling;)if(p.nodeType===1)return false;return true;case "nth":n=h[2];var t=h[3];if(n===1&&t===0)return true;var s=h[0],x=a.parentNode;if(x&&(x.sizcache!==s||!a.nodeIndex)){var y=0;for(p=x.firstChild;p;p=p.nextSibling)if(p.nodeType===1)p.nodeIndex=++y;x.sizcache=s}p=a.nodeIndex-t;return n===0?p===0:p%n===0&&p/n>=0}},ID:function(a,h){return a.nodeType===1&&a.getAttribute("id")===h},TAG:function(a,h){return h==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===
h},CLASS:function(a,h){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(h)>-1},ATTR:function(a,h){var n=h[1];n=l.attrHandle[n]?l.attrHandle[n](a):a[n]!=null?a[n]:a.getAttribute(n);var p=n+"",t=h[2],s=h[4];return n==null?t==="!=":t==="="?p===s:t==="*="?p.indexOf(s)>=0:t==="~="?(" "+p+" ").indexOf(s)>=0:!s?p&&n!==false:t==="!="?p!==s:t==="^="?p.indexOf(s)===0:t==="$="?p.substr(p.length-s.length)===s:t==="|="?p===s||p.substr(0,s.length+1)===s+"-":false},POS:function(a,h,n,p){var t=l.setFilters[h[2]];
if(t)return t(a,n,h,p)}}},r=l.match.POS,u=function(a,h){return"\\"+(h-0+1)},v;for(v in l.match){l.match[v]=RegExp(l.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source);l.leftMatch[v]=RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[v].source.replace(/\\(\d+)/g,u))}var f=function(a,h){a=Array.prototype.slice.call(a,0);if(h){h.push.apply(h,a);return h}return a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(e){f=function(a,h){var n=h||[],p=0;if(j.call(a)==="[object Array]")Array.prototype.push.apply(n,
a);else if(typeof a.length==="number")for(var t=a.length;p<t;p++)n.push(a[p]);else for(;a[p];p++)n.push(a[p]);return n}}var c;if(document.documentElement.compareDocumentPosition)c=function(a,h){if(!a.compareDocumentPosition||!h.compareDocumentPosition){if(a==h)b=true;return a.compareDocumentPosition?-1:1}var n=a.compareDocumentPosition(h)&4?-1:a===h?0:1;if(n===0)b=true;return n};else if("sourceIndex"in document.documentElement)c=function(a,h){if(!a.sourceIndex||!h.sourceIndex){if(a==h)b=true;return a.sourceIndex?
-1:1}var n=a.sourceIndex-h.sourceIndex;if(n===0)b=true;return n};else if(document.createRange)c=function(a,h){if(!a.ownerDocument||!h.ownerDocument){if(a==h)b=true;return a.ownerDocument?-1:1}var n=a.ownerDocument.createRange(),p=h.ownerDocument.createRange();n.setStart(a,0);n.setEnd(a,0);p.setStart(h,0);p.setEnd(h,0);n=n.compareBoundaryPoints(Range.START_TO_END,p);if(n===0)b=true;return n};d.getText=function(a){for(var h="",n,p=0;a[p];p++){n=a[p];if(n.nodeType===3||n.nodeType===4)h+=n.nodeValue;
else if(n.nodeType!==8)h+=d.getText(n.childNodes)}return h};(function(){var a=document.createElement("div"),h="script"+(new Date).getTime();a.innerHTML="<a name='"+h+"'/>";var n=document.documentElement;n.insertBefore(a,n.firstChild);if(document.getElementById(h)){l.find.ID=function(p,t,s){if(typeof t.getElementById!=="undefined"&&!s)return(t=t.getElementById(p[1]))?t.id===p[1]||typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id").nodeValue===p[1]?[t]:undefined:[]};l.filter.ID=function(p,
t){var s=typeof p.getAttributeNode!=="undefined"&&p.getAttributeNode("id");return p.nodeType===1&&s&&s.nodeValue===t}}n.removeChild(a);n=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)l.find.TAG=function(h,n){var p=n.getElementsByTagName(h[1]);if(h[1]==="*"){for(var t=[],s=0;p[s];s++)p[s].nodeType===1&&t.push(p[s]);p=t}return p};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!==
"undefined"&&a.firstChild.getAttribute("href")!=="#")l.attrHandle.href=function(h){return h.getAttribute("href",2)};a=null})();document.querySelectorAll&&function(){var a=d,h=document.createElement("div");h.innerHTML="<p class='TEST'></p>";if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){d=function(p,t,s,x){t=t||document;if(!x&&t.nodeType===9&&!d.isXML(t))try{return f(t.querySelectorAll(p),s)}catch(y){}return a(p,t,s,x)};for(var n in a)d[n]=a[n];h=null}}();(function(){var a=document.createElement("div");
a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){l.order.splice(1,0,"CLASS");l.find.CLASS=function(h,n,p){if(typeof n.getElementsByClassName!=="undefined"&&!p)return n.getElementsByClassName(h[1])};a=null}}})();d.contains=document.compareDocumentPosition?function(a,h){return!!(a.compareDocumentPosition(h)&16)}:function(a,h){return a!==h&&
(a.contains?a.contains(h):true)};d.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var i=function(a,h){for(var n=[],p="",t,s=h.nodeType?[h]:h;t=l.match.PSEUDO.exec(a);){p+=t[0];a=a.replace(l.match.PSEUDO,"")}a=l.relative[a]?a+"*":a;t=0;for(var x=s.length;t<x;t++)d(a,s[t],n);return d.filter(p,n)};window.tinymce.dom.Sizzle=d})();
(function(m){var o=m.each,q=m.DOM,k=m.isIE,j;m.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(b,g,d,l){var r,u=this,v=u.events,f;if(g instanceof Array){f=[];o(g,function(e){f.push(u.add(b,e,d,l))});return f}if(b&&b.hasOwnProperty&&b instanceof Array){f=[];o(b,function(e){e=q.get(e);f.push(u.add(e,g,d,l))});return f}if(b=q.get(b)){r=function(e){if(!u.disabled){if((e=e||window.event)&&k){if(!e.target)e.target=e.srcElement;m.extend(e,u._stoppers)}if(!l)return d(e);
return d.call(l,e)}};if(g=="unload"){m.unloads.unshift({func:r});return r}if(g=="init"){u.domLoaded?r():u.inits.push(r);return r}v.push({obj:b,name:g,func:d,cfunc:r,scope:l});u._add(b,g,r);return d}},remove:function(b,g,d){var l=this,r=l.events,u=false,v;if(b&&b.hasOwnProperty&&b instanceof Array){v=[];o(b,function(f){f=q.get(f);v.push(l.remove(f,g,d))});return v}b=q.get(b);o(r,function(f,e){if(f.obj==b&&f.name==g&&(!d||f.func==d||f.cfunc==d)){r.splice(e,1);l._remove(b,g,f.cfunc);u=true;return false}});
return u},clear:function(b){var g=this.events,d,l;if(b){b=q.get(b);for(d=g.length-1;d>=0;d--){l=g[d];if(l.obj===b){this._remove(l.obj,l.name,l.cfunc);l.obj=l.cfunc=null;g.splice(d,1)}}}},cancel:function(b){if(!b)return false;this.stop(b);return this.prevent(b)},stop:function(b){if(b.stopPropagation)b.stopPropagation();else b.cancelBubble=true;return false},prevent:function(b){if(b.preventDefault)b.preventDefault();else b.returnValue=false;return false},destroy:function(){var b=this;o(b.events,function(g){b._remove(g.obj,
g.name,g.cfunc);g.obj=g.cfunc=null});b.events=[];b=null},_add:function(b,g,d){if(b.attachEvent)b.attachEvent("on"+g,d);else if(b.addEventListener)b.addEventListener(g,d,false);else b["on"+g]=d},_remove:function(b,g,d){if(b)try{if(b.detachEvent)b.detachEvent("on"+g,d);else if(b.removeEventListener)b.removeEventListener(g,d,false);else b["on"+g]=null}catch(l){}},_pageInit:function(){if(!this.domLoaded){this.domLoaded=true;o(this.inits,function(b){b()});this.inits=[]}},_wait:function(b){var g=this,d=
b.document;if(b.tinyMCE_GZ&&tinyMCE_GZ.loaded)g.domLoaded=1;else{if(d.attachEvent){d.attachEvent("onreadystatechange",function(){if(d.readyState==="complete"){d.detachEvent("onreadystatechange",arguments.callee);g._pageInit(b)}});d.documentElement.doScroll&&b==b.top&&function(){if(!g.domLoaded){try{d.documentElement.doScroll("left")}catch(l){setTimeout(arguments.callee,0);return}g._pageInit(b)}}()}else d.addEventListener&&g._add(b,"DOMContentLoaded",function(){g._pageInit(b)});g._add(b,"load",function(){g._pageInit(b)})}},
_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});j=m.dom.Event=new m.dom.EventUtils;j._wait(window);m.addUnload(function(){j.destroy()})})(tinymce);
(function(m){m.dom.Element=function(o,q){var k=this,j;k.settings=q=q||{};k.id=o;k.dom=j=q.dom||m.DOM;m.isIE||j.get(k.id);m.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(b){k[b]=function(){var g=[o],d;for(d=0;d<arguments.length;d++)g.push(arguments[d]);g=j[b].apply(j,g);k.update(b);return g}});m.extend(k,{on:function(b,g,d){return m.dom.Event.add(k.id,
b,g,d)},getXY:function(){return{x:parseInt(k.getStyle("left")),y:parseInt(k.getStyle("top"))}},getSize:function(){var b=j.get(k.id);return{w:parseInt(k.getStyle("width")||b.clientWidth),h:parseInt(k.getStyle("height")||b.clientHeight)}},moveTo:function(b,g){k.setStyles({left:b,top:g})},moveBy:function(b,g){var d=k.getXY();k.moveTo(d.x+b,d.y+g)},resizeTo:function(b,g){k.setStyles({width:b,height:g})},resizeBy:function(b,g){var d=k.getSize();k.resizeTo(d.w+b,d.h+g)},update:function(b){if(m.isIE6&&q.blocker){b=
b||"";if(!(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0))if(b=="remove")j.remove(k.blocker);else{if(k.blocker)b=j.get(k.blocker);else{k.blocker=j.uniqueId();b=j.add(q.container||j.getRoot(),"iframe",{id:k.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});j.setStyle(b,"opacity",0)}j.setStyles(b,{left:k.getStyle("left",1),top:k.getStyle("top",1),width:k.getStyle("width",1),height:k.getStyle("height",1),display:k.getStyle("display",1),zIndex:parseInt(k.getStyle("zIndex",
1)||0)-1})}}}})}})(tinymce);
(function(m){var o=m.is,q=m.isIE,k=m.each;m.create("tinymce.dom.Selection",{Selection:function(j,b,g){var d=this;d.dom=j;d.win=b;d.serializer=g;k(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(l){d[l]=new m.util.Dispatcher(d)});if(!d.win.getSelection)d.tridentSel=new m.dom.TridentSelection(d);m.addUnload(d.destroy,d)},getContent:function(j){var b=this.getRng(),g=this.dom.create("body"),d=this.getSel(),l,r;j=j||{};l=r="";j.get=true;j.format=j.format||"html";this.onBeforeGetContent.dispatch(this,
j);if(j.format=="text")return this.isCollapsed()?"":b.text||(d.toString?d.toString():"");if(b.cloneContents)(b=b.cloneContents())&&g.appendChild(b);else g.innerHTML=o(b.item)||o(b.htmlText)?b.item?b.item(0).outerHTML:b.htmlText:b.toString();if(/^\s/.test(g.innerHTML))l=" ";if(/\s+$/.test(g.innerHTML))r=" ";j.getInner=true;j.content=this.isCollapsed()?"":l+this.serializer.serialize(g,j)+r;this.onGetContent.dispatch(this,j);return j.content},setContent:function(j,b){var g=this.getRng(),d,l=this.win.document;
b=b||{format:"html"};b.set=true;b.content=this.dom.processHTML(j);this.onBeforeSetContent.dispatch(this,b);j=b.content;if(g.insertNode){j+='<span id="__caret">_</span>';if(g.startContainer==l&&g.endContainer==l)l.body.innerHTML=j;else{g.deleteContents();if(l.body.childNodes.length==0)l.body.innerHTML=j;else g.insertNode(g.createContextualFragment(j))}d=this.dom.get("__caret");g=l.createRange();g.setStartBefore(d);g.setEndBefore(d);this.setRng(g);this.dom.remove("__caret")}else{if(g.item){l.execCommand("Delete",
false,null);g=this.getRng()}g.pasteHTML(j)}this.onSetContent.dispatch(this,b)},getStart:function(){var j=this.getRng(),b,g;if(j.duplicate||j.item){if(j.item)return j.item(0);b=j.duplicate();b.collapse(1);b=b.parentElement();for(j=g=j.parentElement();g=g.parentNode;)if(g==b){b=j;break}if(b&&b.nodeName=="BODY")return b.firstChild||b}else{b=j.startContainer;if(b.nodeType==1&&b.hasChildNodes())b=b.childNodes[Math.min(b.childNodes.length-1,j.startOffset)];if(b&&b.nodeType==3)return b.parentNode}return b},
getEnd:function(){var j=this.getRng(),b;if(j.duplicate||j.item){if(j.item)return j.item(0);j=j.duplicate();j.collapse(0);if((b=j.parentElement())&&b.nodeName=="BODY")return b.lastChild||b}else{b=j.endContainer;j=j.endOffset;if(b.nodeType==1&&b.hasChildNodes())b=b.childNodes[j>0?j-1:j];if(b&&b.nodeType==3)return b.parentNode}return b},getBookmark:function(j,b){function g(c,i){var a=0;k(l.select(c),function(h,n){if(h==i)a=n});return a}var d=this,l=d.dom,r,u,v,f,e;if(j==2)return function(){function c(n,
p){var t=n[p?"startContainer":"endContainer"],s=n[p?"startOffset":"endOffset"],x=[],y,D=0;if(t.nodeType==3){if(b)for(y=t.previousSibling;y&&y.nodeType==3;y=y.previousSibling)s+=y.nodeValue.length;x.push(s)}else{y=t.childNodes;if(s>=y.length&&y.length){D=1;s=Math.max(0,y.length-1)}x.push(d.dom.nodeIndex(y[s],b)+D)}for(;t&&t!=a;t=t.parentNode)x.push(d.dom.nodeIndex(t,b));return x}var i=d.getRng(true),a=l.getRoot(),h={};h.start=c(i,true);if(!d.isCollapsed())h.end=c(i);return h}();if(j)return{rng:d.getRng()};
r=d.getRng();v=l.uniqueId();f=tinyMCE.activeEditor.selection.isCollapsed();if(r.duplicate||r.item)if(r.item){e=r.item(0);u=e.nodeName;return{name:u,index:g(u,e)}}else{u=r.duplicate();r.collapse();r.pasteHTML('<span _mce_type="bookmark" id="'+v+'_start" style="overflow:hidden;line-height:0px">\ufeff</span>');if(!f){u.collapse(false);u.pasteHTML('<span _mce_type="bookmark" id="'+v+'_end" style="overflow:hidden;line-height:0px">\ufeff</span>')}}else{e=d.getNode();u=e.nodeName;if(u=="IMG")return{name:u,
index:g(u,e)};u=r.cloneRange();if(!f){u.collapse(false);u.insertNode(l.create("span",{_mce_type:"bookmark",id:v+"_end",style:"overflow:hidden;line-height:0px"},"\ufeff"))}r.collapse(true);r.insertNode(l.create("span",{_mce_type:"bookmark",id:v+"_start",style:"overflow:hidden;line-height:0px"},"\ufeff"))}d.moveToBookmark({id:v,keep:1});return{id:v}},moveToBookmark:function(j){var b=this.dom,g,d,l,r,u,v;this.tridentSel&&this.tridentSel.destroy();if(j)if(j.start){g=b.createRng();d=b.getRoot();var f=
function(c){var i=j[c?"start":"end"],a,h,n;if(i){h=d;for(a=i.length-1;a>=1;a--){n=h.childNodes;if(n.length)h=n[i[a]]}c?g.setStart(h,i[0]):g.setEnd(h,i[0])}};f(true);f();this.setRng(g)}else if(j.id){f=function(c){var i=b.get(j.id+"_"+c),a,h,n;n=j.keep;if(i){a=i.parentNode;if(c=="start"){if(n){a=i.firstChild;h=1}else h=b.nodeIndex(i);l=r=a;u=v=h}else{if(n){a=i.firstChild;h=1}else h=b.nodeIndex(i);r=a;v=h}if(!n){n=i.previousSibling;a=i.nextSibling;for(k(m.grep(i.childNodes),function(p){if(p.nodeType==
3)p.nodeValue=p.nodeValue.replace(/\uFEFF/g,"")});i=b.get(j.id+"_"+c);)b.remove(i,1);if(n&&a&&n.nodeType==a.nodeType&&n.nodeType==3){h=n.nodeValue.length;n.appendData(a.nodeValue);b.remove(a);if(c=="start"){l=r=n;u=v=h}else{r=n;v=h}}}}};var e=function(c){if(!q&&b.isBlock(c)&&!c.innerHTML)c.innerHTML='<br _mce_bogus="1" />';return c};f("start");f("end");g=b.createRng();g.setStart(e(l),u);g.setEnd(e(r),v);this.setRng(g)}else if(j.name)this.select(b.select(j.name)[j.index]);else j.rng&&this.setRng(j.rng)},
select:function(j,b){var g=this.dom,d=g.createRng();g=g.nodeIndex(j);d.setStart(j.parentNode,g);d.setEnd(j.parentNode,g+1);if(b){g=function(l,r){var u=new m.dom.TreeWalker(l,l);do{if(l.nodeType==3&&m.trim(l.nodeValue).length!=0){r?d.setStart(l,0):d.setEnd(l,l.nodeValue.length);break}if(l.nodeName=="BR"){r?d.setStartBefore(l):d.setEndBefore(l);break}}while(l=r?u.next():u.prev())};g(j,1);g(j)}this.setRng(d);return j},isCollapsed:function(){var j=this.getRng(),b=this.getSel();if(!j||j.item)return false;
if(j.compareEndPoints)return j.compareEndPoints("StartToEnd",j)===0;return!b||j.collapsed},collapse:function(j){var b=this.getRng(),g;if(b.item){g=b.item(0);b=this.win.document.body.createTextRange();b.moveToElementText(g)}b.collapse(!!j);this.setRng(b)},getSel:function(){var j=this.win;return j.getSelection?j.getSelection():j.document.selection},getRng:function(j){var b,g;if(j&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(b=this.getSel())g=b.rangeCount>0?b.getRangeAt(0):b.createRange?
b.createRange():this.win.document.createRange()}catch(d){}g||(g=this.win.document.createRange?this.win.document.createRange():this.win.document.body.createTextRange());if(this.selectedRange&&this.explicitRange)if(g.compareBoundaryPoints(g.START_TO_START,this.selectedRange)===0&&g.compareBoundaryPoints(g.END_TO_END,this.selectedRange)===0)g=this.explicitRange;else this.explicitRange=this.selectedRange=null;return g},setRng:function(j){var b;if(this.tridentSel)if(j.cloneRange)this.tridentSel.addRange(j);
else try{j.select()}catch(g){}else if(b=this.getSel()){this.explicitRange=j;b.removeAllRanges();b.addRange(j);this.selectedRange=b.getRangeAt(0)}},setNode:function(j){this.setContent(this.dom.getOuterHTML(j));return j},getNode:function(){var j=this.getRng(),b=this.getSel(),g;if(j.setStart){if(!j)return this.dom.getRoot();g=j.commonAncestorContainer;if(!j.collapsed){if(j.startContainer==j.endContainer)if(j.startOffset-j.endOffset<2)if(j.startContainer.hasChildNodes())g=j.startContainer.childNodes[j.startOffset];
if(m.isWebKit&&b.anchorNode&&b.anchorNode.nodeType==1)return b.anchorNode.childNodes[b.anchorOffset]}if(g&&g.nodeType==3)return g.parentNode;return g}return j.item?j.item(0):j.parentElement()},getSelectedBlocks:function(j,b){var g=this.dom,d,l,r,u=[];d=g.getParent(j||this.getStart(),g.isBlock);l=g.getParent(b||this.getEnd(),g.isBlock);d&&u.push(d);if(d&&l&&d!=l)for(r=d;(r=r.nextSibling)&&r!=l;)g.isBlock(r)&&u.push(r);l&&d!=l&&u.push(l);return u},destroy:function(j){this.win=null;this.tridentSel&&
this.tridentSel.destroy();j||m.removeUnload(this.destroy)}})})(tinymce);
(function(m){m.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){this.doc=function(){var o=document.implementation;if(!o||!o.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(q){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(k){}}else return o.createDocument("","",null)}();this.valid=m.isOpera||m.isWebKit;this.reset()},reset:function(){var o=this.doc;o.firstChild&&o.removeChild(o.firstChild);this.node=o.appendChild(o.createElement("html"))},writeStartElement:function(o){this.node=
this.node.appendChild(this.doc.createElement(o))},writeAttribute:function(o,q){if(this.valid)q=q.replace(/>/g,"%MCGT%");this.node.setAttribute(o,q)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var o=this.node;o.appendChild(this.doc.createTextNode(""));this.node=o.parentNode},writeText:function(o){if(this.valid)o=o.replace(/>/g,"%MCGT%");this.node.appendChild(this.doc.createTextNode(o))},writeCDATA:function(o){this.node.appendChild(this.doc.createCDATASection(o))},
writeComment:function(o){if(m.isIE)o=o.replace(/^\-|\-$/g," ");this.node.appendChild(this.doc.createComment(o.replace(/\-\-/g," ")))},getContent:function(){var o;o=this.doc.xml||(new XMLSerializer).serializeToString(this.doc);o=o.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");o=o.replace(/ ?\/>/g," />");if(this.valid)o=o.replace(/\%MCGT%/g,"&gt;");return o}})})(tinymce);
(function(m){m.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(o){this.settings=m.extend({indent_char:" ",indentation:0},o);this.reset()},reset:function(){this.str=this.indent="";this.tags=[];this.count=0},writeStartElement:function(o){this._writeAttributesEnd();this.writeRaw("<"+o);this.tags.push(o);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(o,q){this.writeRaw(" "+this.encode(o)+'="'+this.encode(q)+
'"')},writeEndElement:function(){var o;if(this.tags.length>0){o=this.tags.pop();this._writeAttributesEnd(1)&&this.writeRaw("</"+o+">");this.settings.indentation>0&&this.writeRaw("\n")}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");this.settings.indentation>0&&this.writeRaw("\n")}},writeText:function(o){this._writeAttributesEnd();this.writeRaw(this.encode(o));this.count++},writeCDATA:function(o){this._writeAttributesEnd();
this.writeRaw("<![CDATA["+o+"]]\>");this.count++},writeComment:function(o){this._writeAttributesEnd();this.writeRaw("<!-- "+o+"--\>");this.count++},writeRaw:function(o){this.str+=o},encode:function(o){return o.replace(/[<>&"]/g,function(q){switch(q){case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;";case '"':return"&quot;"}return q})},getContent:function(){return this.str},_writeAttributesEnd:function(o){if(this.inAttr){this.inAttr=false;if(o&&this.elementCount==this.count){this.writeRaw(" />");
return false}this.writeRaw(">");return true}}})})(tinymce);
(function(m){function o(d){return d.replace(/([?+*])/g,".$1")}var q=m.extend,k=m.each,j=m.util.Dispatcher,b=m.isIE,g=m.isGecko;m.create("tinymce.dom.Serializer",{Serializer:function(d){var l=this;l.key=0;l.onPreProcess=new j(l);l.onPostProcess=new j(l);try{l.writer=new m.dom.XMLWriter}catch(r){l.writer=new m.dom.StringWriter}l.settings=d=q({dom:m.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",
entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",
valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},d);l.dom=d.dom;l.schema=d.schema;if(d.entity_encoding=="named"&&!d.entities)d.entity_encoding="raw";d.remove_redundant_brs&&l.onPostProcess.add(function(u,v){v.content=
v.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(f,e,c){if(/^<br \/>\s*<\//.test(f))return"</"+c+">";return f})});d.element_format=="html"&&l.onPostProcess.add(function(u,v){v.content=v.content.replace(/<([^>]+) \/>/g,"<$1>")});d.fix_list_elements&&l.onPreProcess.add(function(u,v){function f(s,x){for(var y=x.split(","),D;(s=s.previousSibling)!=null;)for(D=0;D<y.length;D++)if(s.nodeName==y[D])return s;return null}var e,c,i=["ol","ul"],a,h,n,p=/^(OL|UL)$/,t;for(c=0;c<i.length;c++){e=
l.dom.select(i[c],v.node);for(a=0;a<e.length;a++){h=e[a];n=h.parentNode;if(p.test(n.nodeName))if(t=f(h,"LI"))t.appendChild(h);else{t=l.dom.create("li");t.innerHTML="&nbsp;";t.appendChild(h);n.insertBefore(t,n.firstChild)}}}});d.fix_table_elements&&l.onPreProcess.add(function(u,v){if(!m.isOpera||opera.buildNumber()>=1767)k(l.dom.select("p table",v.node).reverse(),function(f){var e=l.dom.getParent(f.parentNode,"table,p");if(e.nodeName!="TABLE")try{l.dom.split(e,f)}catch(c){}})})},setEntities:function(d){var l,
r={},u;if(!this.entityLookup){d=d.split(",");for(l=0;l<d.length;l+=2){u=d[l];if(!(u==34||u==38||u==60||u==62)){r[String.fromCharCode(d[l])]=d[l+1];parseInt(d[l]).toString(16)}}this.entityLookup=r}},setRules:function(d){this._setup();this.rules={};this.wildRules=[];this.validElements={};return this.addRules(d)},addRules:function(d){var l=this,r;if(d){l._setup();k(d.split(","),function(u){u=u.split(/\[|\]/);var v=u[0].split("/"),f,e,c,i=[];if(r)e=m.extend([],r.attribs);u.length>1&&k(u[1].split("|"),
function(a){var h={},n;e=e||[];a=a.replace(/::/g,"~");a=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(a);a[2]=a[2].replace(/~/g,":");if(a[1]=="!"){f=f||[];f.push(a[2])}if(a[1]=="-")for(n=0;n<e.length;n++)if(e[n].name==a[2]){e.splice(n,1);return}switch(a[3]){case "=":h.defaultVal=a[4]||"";break;case ":":h.forcedVal=a[4];break;case "<":h.validVals=a[4].split("?")}if(/[*.?]/.test(a[2])){c=c||[];h.nameRE=RegExp("^"+o(a[2])+"$");c.push(h)}else{h.name=a[2];e.push(h)}i.push(a[2])});k(v,function(a,h){var n=
a.charAt(0),p=1,t={};if(r){if(r.noEmpty)t.noEmpty=r.noEmpty;if(r.fullEnd)t.fullEnd=r.fullEnd;if(r.padd)t.padd=r.padd}switch(n){case "-":t.noEmpty=true;break;case "+":t.fullEnd=true;break;case "#":t.padd=true;break;default:p=0}v[h]=a=a.substring(p);l.validElements[a]=1;if(/[*.?]/.test(v[0])){t.nameRE=RegExp("^"+o(v[0])+"$");l.wildRules=l.wildRules||{};l.wildRules.push(t)}else{t.name=v[0];if(v[0]=="@")r=t;l.rules[a]=t}t.attribs=e;if(f)t.requiredAttribs=f;if(c){a="";k(i,function(s){if(a)a+="|";a+="("+
o(s)+")"});t.validAttribsRE=RegExp("^"+a.toLowerCase()+"$");t.wildAttribs=c}})});d="";k(l.validElements,function(u,v){if(d)d+="|";if(v!="@")d+=v});l.validElementsRE=RegExp("^("+o(d.toLowerCase())+")$")}},findRule:function(d){var l=this.rules,r;this._setup();if(l=l[d])return l;l=this.wildRules;for(r=0;r<l.length;r++)if(l[r].nameRE.test(d))return l[r];return null},findAttribRule:function(d,l){var r,u=d.wildAttribs;for(r=0;r<u.length;r++)if(u[r].nameRE.test(l))return u[r];return null},serialize:function(d,
l){var r=this,u,v,f,e;r._setup();l=l||{};l.format=l.format||"html";r.processObj=l;if(b){e=[];k(d.getElementsByTagName("option"),function(c){c=r.dom.getAttrib(c,"selected");e.push(c?c:null)})}d=d.cloneNode(true);b&&k(d.getElementsByTagName("option"),function(c,i){r.dom.setAttrib(c,"selected",e[i])});f=d.ownerDocument.implementation;if(f.createHTMLDocument&&m.isOpera&&opera.buildNumber()>=1767){u=f.createHTMLDocument("");k(d.nodeName=="BODY"?d.childNodes:[d],function(c){u.body.appendChild(u.importNode(c,
true))});d=d.nodeName!="BODY"?u.body.firstChild:u.body;v=r.dom.doc;r.dom.doc=u}r.key=""+(parseInt(r.key)+1);if(!l.no_events){l.node=d;r.onPreProcess.dispatch(r,l)}r.writer.reset();r._info=l;r._serializeNode(d,l.getInner);l.content=r.writer.getContent();if(v)r.dom.doc=v;l.no_events||r.onPostProcess.dispatch(r,l);r._postProcess(l);l.node=null;return m.trim(l.content)},_postProcess:function(d){var l=this,r=l.settings,u=d.content,v;if(d.format=="html"){v=l._protect({content:u,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},
{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]--\>)/g}]});u=v.content;if(r.entity_encoding!=="raw")u=l._encode(u);if(!d.set){u=u.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,r.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(r.remove_linebreaks){u=u.replace(/\r?\n|\r/g," ");u=u.replace(/(<[^>]+>)\s+/g,"$1 ");u=u.replace(/\s+(<\/[^>]+>)/g," $1");u=u.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,
"<$1 $2>");u=u.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");u=u.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(r.apply_source_formatting&&r.indent_mode=="simple"){u=u.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");u=u.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,
"\n<$1$2>");u=u.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");u=u.replace(/\n\n/g,"\n")}}u=l._unprotect(u,v);u=u.replace(/<!--\[CDATA\[([\s\S]+)\]\]--\>/g,"<![CDATA[$1]]\>");if(r.entity_encoding=="raw")u=u.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>");u=u.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(f,e,c){return"<noscript"+e+">"+l.dom.decode(c.replace(/<!--|--\>/g,""))+"</noscript>"})}d.content=u},_serializeNode:function(d,
l){var r=this.settings,u=this.writer,v,f,e,c,i,a,h,n,p,t,s,x,y;if(!r.node_filter||r.node_filter(d))switch(d.nodeType){case 1:if(d.hasAttribute?d.hasAttribute("_mce_bogus"):d.getAttribute("_mce_bogus"))return;t=x=false;v=d.hasChildNodes();n=d.getAttribute("_mce_name")||d.nodeName.toLowerCase();if(y=d.getAttribute("_mce_type"))if(this._info.cleanup)x=1;else return;if(b)if(d.scopeName!=="HTML"&&d.scopeName!=="html")n=d.scopeName+":"+n;if(n.indexOf("mce:")===0)n=n.substring(4);if(!x)if(!this.validElementsRE||
!this.validElementsRE.test(n)||this.invalidElementsRE&&this.invalidElementsRE.test(n)||l){t=true;break}if(b){if(r.fix_content_duplication){if(d._mce_serialized==this.key)return;d._mce_serialized=this.key}if(n.charAt(0)=="/")n=n.substring(1)}else if(g)if(d.nodeName==="BR"&&d.getAttribute("type")=="_moz")return;if(r.validate_children){if(this.elementName&&!this.schema.isValid(this.elementName,n)){t=true;break}this.elementName=n}p=this.findRule(n);if(!p){t=true;break}n=p.name||n;s=r.closed.test(n);if(!v&&
p.noEmpty||b&&!n){t=true;break}if(p.requiredAttribs){i=p.requiredAttribs;for(e=i.length-1;e>=0;e--)if(this.dom.getAttrib(d,i[e])!=="")break;if(e==-1){t=true;break}}u.writeStartElement(n);if(p.attribs){e=0;a=p.attribs;for(c=a.length;e<c;e++){i=a[e];h=this._getAttrib(d,i);h!==null&&u.writeAttribute(i.name,h)}}if(p.validAttribsRE){a=this.dom.getAttribs(d);for(e=a.length-1;e>-1;e--){i=a[e];if(i.specified){i=i.nodeName.toLowerCase();if(!(r.invalid_attrs.test(i)||!p.validAttribsRE.test(i))){c=this.findAttribRule(p,
i);h=this._getAttrib(d,c,i);h!==null&&u.writeAttribute(i,h)}}}}y&&x&&u.writeAttribute("_mce_type",y);if(n==="script"&&m.trim(d.innerHTML)){u.writeText("// ");u.writeCDATA(d.innerHTML.replace(/<!--|--\>|<\[CDATA\[|\]\]>/g,""));v=false;break}if(p.padd)if(v&&(f=d.firstChild)&&f.nodeType===1&&d.childNodes.length===1){if(f.hasAttribute?f.hasAttribute("_mce_bogus"):f.getAttribute("_mce_bogus"))u.writeText("\u00a0")}else v||u.writeText("\u00a0");break;case 3:if(r.validate_children&&this.elementName&&!this.schema.isValid(this.elementName,
"#text"))return;return u.writeText(d.nodeValue);case 4:return u.writeCDATA(d.nodeValue);case 8:return u.writeComment(d.nodeValue)}else if(d.nodeType==1)v=d.hasChildNodes();if(v&&!s)for(f=d.firstChild;f;){this._serializeNode(f);this.elementName=n;f=f.nextSibling}t||(s?u.writeEndElement():u.writeFullEndElement())},_protect:function(d){function l(v){return v.replace(/[\r\n\\]/g,function(f){if(f==="\n")return"\\n";else if(f==="\\")return"\\\\";return"\\r"})}function r(v){return v.replace(/\\[\\rn]/g,
function(f){if(f==="\\n")return"\n";else if(f==="\\\\")return"\\";return"\r"})}var u=this;d.items=d.items||[];k(d.patterns,function(v){d.content=r(l(d.content).replace(v.pattern,function(f,e,c,i){c=r(c);if(v.encode)c=u._encode(c);d.items.push(c);return e+"<!--mce:"+(d.items.length-1)+"--\>"+i}))});return d},_unprotect:function(d,l){d=d.replace(/\<!--mce:([0-9]+)--\>/g,function(r,u){return l.items[parseInt(u)]});l.items=[];return d},_encode:function(d){var l=this.settings,r;if(l.entity_encoding!==
"raw"){if(l.entity_encoding.indexOf("named")!=-1){this.setEntities(l.entities);r=this.entityLookup;d=d.replace(/[\u007E-\uFFFF]/g,function(u){var v;if(v=r[u])u="&"+v+";";return u})}if(l.entity_encoding.indexOf("numeric")!=-1)d=d.replace(/[\u007E-\uFFFF]/g,function(u){return"&#"+u.charCodeAt(0)+";"})}return d},_setup:function(){var d=this.settings;if(!this.done){this.done=1;this.setRules(d.valid_elements);this.addRules(d.extended_valid_elements);if(d.invalid_elements)this.invalidElementsRE=RegExp("^("+
o(d.invalid_elements.replace(/,/g,"|").toLowerCase())+")$");if(d.attrib_value_filter)this.attribValueFilter=d.attribValueFilter}},_getAttrib:function(d,l,r){var u;r=r||l.name;if(l.forcedVal&&(u=l.forcedVal)){if(u==="{$uid}")return this.dom.uniqueId();return u}u=this.dom.getAttrib(d,r);switch(r){case "rowspan":case "colspan":if(u=="1")u=""}if(this.attribValueFilter)u=this.attribValueFilter(r,u,d);if(l.validVals){for(d=l.validVals.length-1;d>=0;d--)if(u==l.validVals[d])break;if(d==-1)return null}if(u===
""&&typeof l.defaultVal!="undefined"){u=l.defaultVal;if(u==="{$uid}")return this.dom.uniqueId();return u}else if(r=="class"&&this.processObj.get)u=u.replace(/\s?mceItem\w+\s?/g,"");if(u==="")return null;return u}})})(tinymce);
(function(m){m.dom.ScriptLoader=function(){function o(d,l){function r(){u.remove(c);if(v)v.onreadystatechange=v.onload=v=null;l()}var u=m.DOM,v,f,e,c;c=u.uniqueId();if(m.isIE6){f=new m.util.URI(d);e=location;if(f.host==e.hostname&&f.port==e.port&&f.protocol+":"==e.protocol){m.util.XHR.send({url:m._addVer(f.getURI()),success:function(i){var a=u.create("script",{type:"text/javascript"});a.text=i;document.getElementsByTagName("head")[0].appendChild(a);u.remove(a);r()}});return}}v=u.create("script",{id:c,
type:"text/javascript",src:m._addVer(d)});v.onload=r;v.onreadystatechange=function(){var i=v.readyState;if(i=="complete"||i=="loaded")r()};(document.getElementsByTagName("head")[0]||document.body).appendChild(v)}var q={},k=[],j={},b=[],g=0;this.isDone=function(d){return q[d]==2};this.markDone=function(d){q[d]=2};this.add=this.load=function(d,l,r){if(q[d]==void 0){k.push(d);q[d]=0}if(l){j[d]||(j[d]=[]);j[d].push({func:l,scope:r||this})}};this.loadQueue=function(d,l){this.loadScripts(k,d,l)};this.loadScripts=
function(d,l,r){function u(f){m.each(j[f],function(e){e.func.call(e.scope)});j[f]=void 0}var v;b.push({func:l,scope:r||this});v=function(){var f=m.grep(d);d.length=0;m.each(f,function(e){if(q[e]==2)u(e);else if(q[e]!=1){q[e]=1;g++;o(e,function(){q[e]=2;g--;u(e);v()})}});if(!g){m.each(b,function(e){e.func.call(e.scope)});b.length=0}};v()}};m.ScriptLoader=new m.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(m,o){function q(j,b,g,d){if(j){if(!d&&j[b])return j[b];if(j!=o){if(b=j[g])return b;for(j=j.parentNode;j&&j!=o;j=j.parentNode)if(b=j[g])return b}}}var k=m;this.current=function(){return k};this.next=function(j){return k=q(k,"firstChild","nextSibling",j)};this.prev=function(j){return k=q(k,"lastChild","lastSibling",j)}};
(function(){var m={};(function(o,q){function k(b){return b.replace(/[A-Z]+/g,function(g){return k(o[g])})}for(var j in o)if(o.hasOwnProperty(j))o[j]=k(o[j]);k(q).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(b,g,d){var l={};d=d.split(/\|/);for(b=d.length-1;b>=0;b--)l[d[b]]=1;m[g]=l})})({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",
T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]");
tinymce.dom.Schema=function(){this.isValid=function(o,q){var k=m[o];return!!(k&&(!q||k[q]))}}})();
(function(m){m.dom.RangeUtils=function(o){this.walk=function(q,k){function j(i,a,h){for(var n=[];i&&i!=h;i=i[a])n.push(i);return n}function b(i,a){do{if(i.parentNode==a)return i;i=i.parentNode}while(i)}function g(i,a,h){var n=h?"nextSibling":"previousSibling";v=i;for(f=v.parentNode;v&&v!=a;v=f){f=v.parentNode;e=j(v==i?v:v[n],n);if(e.length){h||e.reverse();k(e)}}}var d=q.startContainer,l=q.startOffset,r=q.endContainer,u=q.endOffset,v,f,e,c;c=o.select("td.mceSelected,th.mceSelected");if(c.length>0)m.each(c,
function(i){k([i])});else{if(d.nodeType==1&&d.hasChildNodes())d=d.childNodes[l];if(r.nodeType==1&&r.hasChildNodes())r=r.childNodes[Math.min(l==u?u:u-1,r.childNodes.length-1)];u=o.findCommonAncestor(d,r);if(d==r)return k([d]);for(v=d;v;v=v.parentNode){if(v==r)return g(d,u,true);if(v==u)break}for(v=r;v;v=v.parentNode){if(v==d)return g(r,u);if(v==u)break}l=b(d,u)||d;u=b(r,u)||r;g(d,l,true);e=j(l==d?l:l.nextSibling,"nextSibling",u==r?u.nextSibling:u);e.length&&k(e);g(r,u)}}};m.dom.RangeUtils.compareRanges=
function(o,q){if(o&&q)if(o.item||o.duplicate){if(o.item&&q.item&&o.item(0)===q.item(0))return true;if(o.isEqual&&q.isEqual&&q.isEqual(o))return true}else return o.startContainer==q.startContainer&&o.startOffset==q.startOffset;return false}})(tinymce);
(function(m){var o=m.DOM,q=m.is;m.create("tinymce.ui.Control",{Control:function(k,j){this.id=k;this.settings=j=j||{};this.rendered=false;this.onRender=new m.util.Dispatcher(this);this.classPrefix="";this.scope=j.scope||this;this.active=this.disabled=0},setDisabled:function(k){var j;if(k!=this.disabled){if((j=o.get(this.id))&&this.settings.unavailable_prefix)if(k){this.prevTitle=j.title;j.title=this.settings.unavailable_prefix+": "+j.title}else j.title=this.prevTitle;this.setState("Disabled",k);this.setState("Enabled",
!k);this.disabled=k}},isDisabled:function(){return this.disabled},setActive:function(k){if(k!=this.active){this.setState("Active",k);this.active=k}},isActive:function(){return this.active},setState:function(k,j){var b=o.get(this.id);k=this.classPrefix+k;j?o.addClass(b,k):o.removeClass(b,k)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(k){o.setHTML(k,this.renderHTML())},postRender:function(){var k;if(q(this.disabled)){k=this.disabled;this.disabled=-1;this.setDisabled(k)}if(q(this.active)){k=
this.active;this.active=-1;this.setActive(k)}},remove:function(){o.remove(this.id);this.destroy()},destroy:function(){m.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(m,o){this.parent(m,o);this.controls=[];this.lookup={}},add:function(m){this.lookup[m.id]=m;this.controls.push(m);return m},get:function(m){return this.lookup[m]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(m,o){this.parent(m,o);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});
(function(m){var o=m.is;m.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(q,k){this.parent(q,k);this.classPrefix="mceMenuItem"},setSelected:function(q){this.setState("Selected",q);this.selected=q},isSelected:function(){return this.selected},postRender:function(){this.parent();o(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(m){var o=m.DOM,q=m.walk;m.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(k,j){this.parent(k,j);this.items={};this.collapsed=false;this.menuCount=0;this.onAddItem=new m.util.Dispatcher(this)},expand:function(k){k&&q(this,function(j){j.expand&&j.expand()},"items",this);this.collapsed=false},collapse:function(k){k&&q(this,function(j){j.collapse&&j.collapse()},"items",this);this.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(k){k.settings||(k=new m.ui.MenuItem(k.id||
o.uniqueId(),k));this.onAddItem.dispatch(this,k);return this.items[k.id]=k},addSeparator:function(){return this.add({separator:true})},addMenu:function(k){k.collapse||(k=this.createMenu(k));this.menuCount++;return this.add(k)},hasMenus:function(){return this.menuCount!==0},remove:function(k){delete this.items[k.id]},removeAll:function(){q(this,function(k){k.removeAll?k.removeAll():k.remove();k.destroy()},"items",this);this.items={}},createMenu:function(k){k=new m.ui.Menu(k.id||o.uniqueId(),k);k.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return k}})})(tinymce);
(function(m){var o=m.is,q=m.DOM,k=m.each,j=m.dom.Event,b=m.dom.Element;m.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(g,d){d=d||{};d.container=d.container||q.doc.body;d.offset_x=d.offset_x||0;d.offset_y=d.offset_y||0;d.vp_offset_x=d.vp_offset_x||0;d.vp_offset_y=d.vp_offset_y||0;if(o(d.icons)&&!d.icons)d["class"]+=" mceNoIcons";this.parent(g,d);this.onShowMenu=new m.util.Dispatcher(this);this.onHideMenu=new m.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(g){var d=
this.settings;g.container=g.container||d.container;g.parent=this;g.constrain=g.constrain||d.constrain;g["class"]=g["class"]||d["class"];g.vp_offset_x=g.vp_offset_x||d.vp_offset_x;g.vp_offset_y=g.vp_offset_y||d.vp_offset_y;g=new m.ui.DropMenu(g.id||q.uniqueId(),g);g.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return g},update:function(){var g=this.settings,d=q.get("menu_"+this.id+"_tbl"),l=q.get("menu_"+this.id+"_co"),r,u;r=g.max_width?Math.min(d.clientWidth,g.max_width):d.clientWidth;u=
g.max_height?Math.min(d.clientHeight,g.max_height):d.clientHeight;q.boxModel?this.element.setStyles({width:r,height:u}):this.element.setStyles({width:r+2,height:u+2});g.max_width&&q.setStyle(l,"width",r);if(g.max_height){q.setStyle(l,"height",u);d.clientHeight<g.max_height&&q.setStyle(l,"overflow","hidden")}},showMenu:function(g,d,l){var r=this,u=r.settings,v,f=q.getViewPort(),e,c,i,a,h=r.classPrefix;r.collapse(1);if(!r.isMenuVisible){if(r.rendered)v=q.get("menu_"+r.id);else{v=q.add(r.settings.container,
r.renderNode());k(r.items,function(n){n.postRender()});r.element=new b("menu_"+r.id,{blocker:1,container:u.container})}m.isOpera||q.setStyles(v,{left:-65535,top:-65535});q.show(v);r.update();g+=u.offset_x||0;d+=u.offset_y||0;f.w-=4;f.h-=4;if(u.constrain){e=v.clientWidth-2;c=v.clientHeight-2;i=f.x+f.w;f=f.y+f.h;if(g+u.vp_offset_x+e>i)g=l?l-e:Math.max(0,i-u.vp_offset_x-e);if(d+u.vp_offset_y+c>f)d=Math.max(0,f-u.vp_offset_y-c)}q.setStyles(v,{left:g,top:d});r.element.update();r.isMenuVisible=1;r.mouseClickFunc=
j.add(v,"click",function(n){var p;if((n=n.target)&&(n=q.getParent(n,"tr"))&&!q.hasClass(n,h+"ItemSub")){p=r.items[n.id];if(!p.isDisabled()){for(a=r;a;){a.hideMenu&&a.hideMenu();a=a.settings.parent}p.settings.onclick&&p.settings.onclick(n);return j.cancel(n)}}});if(r.hasMenus())r.mouseOverFunc=j.add(v,"mouseover",function(n){var p;if((n=n.target)&&(n=q.getParent(n,"tr"))){p=r.items[n.id];r.lastMenu&&r.lastMenu.collapse(1);if(!p.isDisabled())if(n&&q.hasClass(n,h+"ItemSub")){n=q.getRect(n);p.showMenu(n.x+
n.w-2,n.y-2,n.x);r.lastMenu=p;q.addClass(q.get(p.id).firstChild,h+"ItemActive")}}});r.onShowMenu.dispatch(r);if(u.keyboard_focus){j.add(v,"keydown",r._keyHandler,r);q.select("a","menu_"+r.id)[0].focus();r._focusIdx=0}}},hideMenu:function(g){var d=q.get("menu_"+this.id);if(this.isMenuVisible){j.remove(d,"mouseover",this.mouseOverFunc);j.remove(d,"click",this.mouseClickFunc);j.remove(d,"keydown",this._keyHandler);q.hide(d);this.isMenuVisible=0;g||this.collapse(1);this.element&&this.element.hide();if(g=
q.get(this.id))q.removeClass(g.firstChild,this.classPrefix+"ItemActive");this.onHideMenu.dispatch(this)}},add:function(g){var d;g=this.parent(g);if(this.isRendered&&(d=q.get("menu_"+this.id)))this._add(q.select("tbody",d)[0],g);return g},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){q.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=q.get("menu_"+this.id);j.remove(g,"mouseover",this.mouseOverFunc);j.remove(g,"click",this.mouseClickFunc);this.element&&
this.element.remove();q.remove(g)},renderNode:function(){var g=this,d=g.settings,l,r,u;u=q.create("div",{id:"menu_"+g.id,"class":d["class"],style:"position:absolute;left:0;top:0;z-index:200000"});r=q.add(u,"div",{id:"menu_"+g.id+"_co","class":g.classPrefix+(d["class"]?" "+d["class"]:"")});g.element=new b("menu_"+g.id,{blocker:1,container:d.container});d.menu_line&&q.add(r,"span",{"class":g.classPrefix+"Line"});d=q.add(r,"table",{id:"menu_"+g.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});l=q.add(d,
"tbody");k(g.items,function(v){g._add(l,v)});g.rendered=true;return u},_keyHandler:function(g){function d(r){r=l._focusIdx+r;var u=q.select("a","menu_"+l.id)[r];if(u){l._focusIdx=r;u.focus()}}var l=this;switch(g.keyCode){case 38:d(-1);break;case 40:d(1);break;case 27:return this.hideMenu()}},_add:function(g,d){var l,r=d.settings,u,v,f=this.classPrefix;if(r.separator){u=q.add(g,"tr",{id:d.id,"class":f+"ItemSeparator"});q.add(u,"td",{"class":f+"ItemSeparator"});if(l=u.previousSibling)q.addClass(l,"mceLast")}else{l=
u=q.add(g,"tr",{id:d.id,"class":f+"Item "+f+"ItemEnabled"});l=v=q.add(l,"td");l=q.add(l,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});q.addClass(v,r["class"]);v=q.add(l,"span",{"class":"mceIcon"+(r.icon?" mce_"+r.icon:"")});r.icon_src&&q.add(v,"img",{src:r.icon_src});l=q.add(l,r.element||"span",{"class":"mceText",title:d.settings.title},d.settings.title);d.settings.style&&q.setAttrib(l,"style",d.settings.style);g.childNodes.length==1&&q.addClass(u,"mceFirst");if((l=
u.previousSibling)&&q.hasClass(l,f+"ItemSeparator"))q.addClass(u,"mceFirst");d.collapse&&q.addClass(u,f+"ItemSub");if(l=u.previousSibling)q.removeClass(l,"mceLast");q.addClass(u,"mceLast")}}})})(tinymce);
(function(m){var o=m.DOM;m.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(q,k){this.parent(q,k);this.classPrefix="mceButton"},renderHTML:function(){var q=this.classPrefix,k=this.settings,j,b;b=o.encode(k.label||"");j='<a id="'+this.id+'" href="javascript:;" class="'+q+" "+q+"Enabled "+k["class"]+(b?" "+q+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+o.encode(k.title)+'">';j+=k.image?'<img class="mceIcon" src="'+k.image+'" />'+b+"</a>":'<span class="mceIcon '+
k["class"]+'"></span>'+(b?'<span class="'+q+'Label">'+b+"</span>":"")+"</a>";return j},postRender:function(){var q=this,k=q.settings;m.dom.Event.add(q.id,"click",function(j){if(!q.isDisabled())return k.onclick.call(k.scope,j)})}})})(tinymce);
(function(m){var o=m.DOM,q=m.dom.Event,k=m.each,j=m.util.Dispatcher;m.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,g){this.parent(b,g);this.items=[];this.onChange=new j(this);this.onPostRender=new j(this);this.onAdd=new j(this);this.onRenderMenu=new m.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(b){var g=this,d,l;if(b==undefined)return g.selectByIndex(-1);l=b&&b.call?b:function(r){return r==b};if(b!=g.selectedValue){k(g.items,function(r,u){if(l(r.value)){d=
1;g.selectByIndex(u);return false}});d||g.selectByIndex(-1)}},selectByIndex:function(b){var g,d;if(b!=this.selectedIndex){g=o.get(this.id+"_text");if(d=this.items[b]){this.selectedValue=d.value;this.selectedIndex=b;o.setHTML(g,o.encode(d.title));o.removeClass(g,"mceTitle")}else{o.setHTML(g,o.encode(this.settings.title));o.addClass(g,"mceTitle");this.selectedValue=this.selectedIndex=null}}},add:function(b,g,d){d=d||{};d=m.extend(d,{title:b,value:g});this.items.push(d);this.onAdd.dispatch(this,d)},
getLength:function(){return this.items.length},renderHTML:function(){var b="";b=this.settings;var g=this.classPrefix;b='<table id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+g+" "+g+"Enabled"+(b["class"]?" "+b["class"]:"")+'"><tbody><tr>';b+="<td>"+o.createHTML("a",{id:this.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},o.encode(this.settings.title))+"</td>";b+="<td>"+o.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;",
"class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";b+="</tr></tbody></table>";return b},showMenu:function(){var b=this,g,d=o.get(this.id),l;if(!(b.isDisabled()||b.items.length==0)){if(b.menu&&b.menu.isMenuVisible)return b.hideMenu();if(!b.isMenuRendered){b.renderMenu();b.isMenuRendered=true}o.getPos(this.settings.menu_container);g=o.getPos(d);l=b.menu;l.settings.offset_x=g.x;l.settings.offset_y=g.y;l.settings.keyboard_focus=!m.isOpera;b.oldID&&l.items[b.oldID].setSelected(0);
k(b.items,function(r){if(r.value===b.selectedValue){l.items[r.id].setSelected(1);b.oldID=r.id}});l.showMenu(0,d.clientHeight);q.add(o.doc,"mousedown",b.hideMenu,b);o.addClass(b.id,b.classPrefix+"Selected")}},hideMenu:function(b){if(this.menu&&this.menu.isMenuVisible)if(!(b&&b.type=="mousedown"&&(b.target.id==this.id+"_text"||b.target.id==this.id+"_open")))if(!b||!o.getParent(b.target,".mceMenu")){o.removeClass(this.id,this.classPrefix+"Selected");q.remove(o.doc,"mousedown",this.hideMenu,this);this.menu.hideMenu()}},
renderMenu:function(){var b=this,g;g=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":b.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});g.onHideMenu.add(b.hideMenu,b);g.add({title:b.settings.title,"class":"mceMenuItemTitle",onclick:function(){b.settings.onselect("")!==false&&b.select("")}});k(b.items,function(d){if(d.value===undefined)g.add({title:d.title,"class":"mceMenuItemTitle",onclick:function(){b.settings.onselect("")!==false&&b.select("")}});else{d.id=
o.uniqueId();d.onclick=function(){b.settings.onselect(d.value)!==false&&b.select(d.value)};g.add(d)}});b.onRenderMenu.dispatch(b,g);b.menu=g},postRender:function(){var b=this,g=b.classPrefix;q.add(b.id,"click",b.showMenu,b);q.add(b.id+"_text","focus",function(){if(!b._focused)b.keyDownHandler=q.add(b.id+"_text","keydown",function(d){var l=-1,r,u=d.keyCode;k(b.items,function(v,f){if(b.selectedValue==v.value)l=f});if(u==38)r=b.items[l-1];else if(u==40)r=b.items[l+1];else if(u==13){r=b.selectedValue;
b.selectedValue=null;b.settings.onselect(r);return q.cancel(d)}if(r){b.hideMenu();b.select(r.value)}});b._focused=1});q.add(b.id+"_text","blur",function(){q.remove(b.id+"_text","keydown",b.keyDownHandler);b._focused=0});if(m.isIE6||!o.boxModel){q.add(b.id,"mouseover",function(){o.hasClass(b.id,g+"Disabled")||o.addClass(b.id,g+"Hover")});q.add(b.id,"mouseout",function(){o.hasClass(b.id,g+"Disabled")||o.removeClass(b.id,g+"Hover")})}b.onPostRender.dispatch(b,o.get(b.id))},destroy:function(){this.parent();
q.clear(this.id+"_text");q.clear(this.id+"_open")}})})(tinymce);
(function(m){var o=m.DOM,q=m.dom.Event,k=m.each;m.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(j,b){this.parent(j,b);this.classPrefix="mceNativeListBox"},setDisabled:function(j){o.get(this.id).disabled=j},isDisabled:function(){return o.get(this.id).disabled},select:function(j){var b=this,g,d;if(j==undefined)return b.selectByIndex(-1);d=j&&j.call?j:function(l){return l==j};if(j!=b.selectedValue){k(b.items,function(l,r){if(d(l.value)){g=1;b.selectByIndex(r);return false}});
g||b.selectByIndex(-1)}},selectByIndex:function(j){o.get(this.id).selectedIndex=j+1;this.selectedValue=this.items[j]?this.items[j].value:null},add:function(j,b,g){g=g||{};g.value=b;this.isRendered()&&o.add(o.get(this.id),"option",g,j);j={title:j,value:b,attribs:g};this.items.push(j);this.onAdd.dispatch(this,j)},getLength:function(){return this.items.length},renderHTML:function(){var j;j=o.createHTML("option",{value:""},"-- "+this.settings.title+" --");k(this.items,function(b){j+=o.createHTML("option",
{value:b.value},b.title)});return j=o.createHTML("select",{id:this.id,"class":"mceNativeListBox"},j)},postRender:function(){function j(g){if((g=b.items[g.target.selectedIndex-1])&&(g=g.value)){b.onChange.dispatch(b,g);b.settings.onselect&&b.settings.onselect(g)}}var b=this;b.rendered=true;q.add(b.id,"change",j);q.add(b.id,"keydown",function(g){var d;q.remove(b.id,"change",void 0);d=q.add(b.id,"blur",function(){q.add(b.id,"change",j);q.remove(b.id,"blur",d)});if(g.keyCode==13||g.keyCode==32){j(g);
return q.cancel(g)}});b.onPostRender.dispatch(b,o.get(b.id))}})})(tinymce);
(function(m){var o=m.DOM,q=m.dom.Event;m.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(k,j){this.parent(k,j);this.onRenderMenu=new m.util.Dispatcher(this);j.menu_container=j.menu_container||o.doc.body},showMenu:function(){var k,j=o.get(this.id),b;if(!this.isDisabled()){if(!this.isMenuRendered){this.renderMenu();this.isMenuRendered=true}if(this.isMenuVisible)return this.hideMenu();o.getPos(this.settings.menu_container);k=o.getPos(j);b=this.menu;b.settings.offset_x=k.x;b.settings.offset_y=
k.y;b.settings.vp_offset_x=k.x;b.settings.vp_offset_y=k.y;b.settings.keyboard_focus=this._focused;b.showMenu(0,j.clientHeight);q.add(o.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var k;k=this.settings.control_manager.createDropMenu(this.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:this.settings.icons});k.onHideMenu.add(this.hideMenu,this);this.onRenderMenu.dispatch(this,k);this.menu=k},hideMenu:function(k){var j=this;
if(!(k&&k.type=="mousedown"&&o.getParent(k.target,function(b){return b.id===j.id||b.id===j.id+"_open"}))){if(!k||!o.getParent(k.target,".mceMenu")){j.setState("Selected",0);q.remove(o.doc,"mousedown",j.hideMenu,j);j.menu&&j.menu.hideMenu()}j.isMenuVisible=0}},postRender:function(){var k=this,j=k.settings;q.add(k.id,"click",function(){if(!k.isDisabled()){j.onclick&&j.onclick(k.value);k.showMenu()}})}})})(tinymce);
(function(m){var o=m.DOM,q=m.dom.Event;m.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(k,j){this.parent(k,j);this.classPrefix="mceSplitButton"},renderHTML:function(){var k,j=this.settings,b;k="<tbody><tr>";b=j.image?o.createHTML("img ",{src:j.image,"class":"mceAction "+j["class"]}):o.createHTML("span",{"class":"mceAction "+j["class"]},"");k+="<td>"+o.createHTML("a",{id:this.id+"_action",href:"javascript:;","class":"mceAction "+j["class"],onclick:"return false;",onmousedown:"return false;",
title:j.title},b)+"</td>";b=o.createHTML("span",{"class":"mceOpen "+j["class"]});k+="<td>"+o.createHTML("a",{id:this.id+"_open",href:"javascript:;","class":"mceOpen "+j["class"],onclick:"return false;",onmousedown:"return false;",title:j.title},b)+"</td>";k+="</tr></tbody>";return o.createHTML("table",{id:this.id,"class":"mceSplitButton mceSplitButtonEnabled "+j["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:j.title},k)},postRender:function(){var k=this,j=k.settings;j.onclick&&
q.add(k.id+"_action","click",function(){k.isDisabled()||j.onclick(k.value)});q.add(k.id+"_open","click",k.showMenu,k);q.add(k.id+"_open","focus",function(){k._focused=1});q.add(k.id+"_open","blur",function(){k._focused=0});if(m.isIE6||!o.boxModel){q.add(k.id,"mouseover",function(){o.hasClass(k.id,"mceSplitButtonDisabled")||o.addClass(k.id,"mceSplitButtonHover")});q.add(k.id,"mouseout",function(){o.hasClass(k.id,"mceSplitButtonDisabled")||o.removeClass(k.id,"mceSplitButtonHover")})}},destroy:function(){this.parent();
q.clear(this.id+"_action");q.clear(this.id+"_open")}})})(tinymce);
(function(m){var o=m.DOM,q=m.dom.Event,k=m.is,j=m.each;m.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,g){this.parent(b,g);this.settings=g=m.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new m.util.Dispatcher(this);this.onHideMenu=new m.util.Dispatcher(this);this.value=g.default_color},showMenu:function(){var b=this,g,d;if(!b.isDisabled()){if(!b.isMenuRendered){b.renderMenu();b.isMenuRendered=true}if(b.isMenuVisible)return b.hideMenu();g=o.get(b.id);o.show(b.id+"_menu");o.addClass(g,"mceSplitButtonSelected");d=o.getPos(g);o.setStyles(b.id+"_menu",{left:d.x,top:d.y+g.clientHeight,zIndex:2E5});g=0;q.add(o.doc,"mousedown",b.hideMenu,b);b.onShowMenu.dispatch(b);
if(b._focused){b._keyHandler=q.add(b.id+"_menu","keydown",function(l){l.keyCode==27&&b.hideMenu()});o.select("a",b.id+"_menu")[0].focus()}b.isMenuVisible=1}},hideMenu:function(b){var g=this;if(!(b&&b.type=="mousedown"&&o.getParent(b.target,function(d){return d.id===g.id+"_open"}))){if(!b||!o.getParent(b.target,".mceSplitButtonMenu")){o.removeClass(g.id,"mceSplitButtonSelected");q.remove(o.doc,"mousedown",g.hideMenu,g);q.remove(g.id+"_menu","keydown",g._keyHandler);o.hide(g.id+"_menu")}g.onHideMenu.dispatch(g);
g.isMenuVisible=0}},renderMenu:function(){var b=this,g,d=0,l=b.settings,r,u,v,f;f=o.add(l.menu_container,"div",{id:b.id+"_menu","class":l.menu_class+" "+l["class"],style:"position:absolute;left:0;top:-1000px;"});g=o.add(f,"div",{"class":l["class"]+" mceSplitButtonMenu"});o.add(g,"span",{"class":"mceMenuLine"});r=o.add(g,"table",{"class":"mceColorSplitMenu"});u=o.add(r,"tbody");d=0;j(k(l.colors,"array")?l.colors:l.colors.split(","),function(e){e=e.replace(/^#/,"");if(!d--){v=o.add(u,"tr");d=l.grid_width-
1}r=o.add(v,"td");r=o.add(r,"a",{href:"javascript:;",style:{backgroundColor:"#"+e},_mce_color:"#"+e})});if(l.more_colors_func){r=o.add(u,"tr");r=o.add(r,"td",{colspan:l.grid_width,"class":"mceMoreColors"});r=o.add(r,"a",{id:b.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},l.more_colors_title);q.add(r,"click",function(e){l.more_colors_func.call(l.more_colors_scope||this);return q.cancel(e)})}o.addClass(g,"mceColorSplitMenu");q.add(b.id+"_menu","click",function(e){var c;
e=e.target;if(e.nodeName=="A"&&(c=e.getAttribute("_mce_color")))b.setColor(c);return q.cancel(e)});return f},setColor:function(b){o.setStyle(this.id+"_preview","backgroundColor",b);this.value=b;this.hideMenu();this.settings.onselect(b)},postRender:function(){var b=this.id;this.parent();o.add(b+"_action","div",{id:b+"_preview","class":"mceColorPreview"});o.setStyle(this.id+"_preview","backgroundColor",this.value)},destroy:function(){this.parent();q.clear(this.id+"_menu");q.clear(this.id+"_more");o.remove(this.id+
"_menu")}})})(tinymce);
tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m="",o,q,k=tinymce.DOM,j=this.settings,b,g,d,l;l=this.controls;for(b=0;b<l.length;b++){q=l[b];g=l[b-1];d=l[b+1];if(b===0){o="mceToolbarStart";if(q.Button)o+=" mceToolbarStartButton";else if(q.SplitButton)o+=" mceToolbarStartSplitButton";else if(q.ListBox)o+=" mceToolbarStartListBox";m+=k.createHTML("td",{"class":o},k.createHTML("span",null,"<!-- IE --\>"))}if(g&&q.ListBox)if(g.Button||g.SplitButton)m+=k.createHTML("td",
{"class":"mceToolbarEnd"},k.createHTML("span",null,"<!-- IE --\>"));m+=k.stdMode?'<td style="position: relative">'+q.renderHTML()+"</td>":"<td>"+q.renderHTML()+"</td>";if(d&&q.ListBox)if(d.Button||d.SplitButton)m+=k.createHTML("td",{"class":"mceToolbarStart"},k.createHTML("span",null,"<!-- IE --\>"))}o="mceToolbarEnd";if(q.Button)o+=" mceToolbarEndButton";else if(q.SplitButton)o+=" mceToolbarEndSplitButton";else if(q.ListBox)o+=" mceToolbarEndListBox";m+=k.createHTML("td",{"class":o},k.createHTML("span",
null,"<!-- IE --\>"));return k.createHTML("table",{id:this.id,"class":"mceToolbar"+(j["class"]?" "+j["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||""},"<tbody><tr>"+m+"</tr></tbody>")}});
(function(m){m.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new m.util.Dispatcher(this),get:function(o){return this.lookup[o]},requireLangPack:function(o){var q=m.settings;q&&q.language&&m.ScriptLoader.add(this.urls[o]+"/langs/"+q.language+".js")},add:function(o,q){this.items.push(q);this.lookup[o]=q;this.onAdd.dispatch(this,o,q);return q},load:function(o,q,k,j){if(!this.urls[o]){if(q.indexOf("/")!=0&&q.indexOf("://")==-1)q=m.baseURL+"/"+q;this.urls[o]=q.substring(0,q.lastIndexOf("/"));
m.ScriptLoader.add(q,k,j)}}});m.PluginManager=new m.AddOnManager;m.ThemeManager=new m.AddOnManager})(tinymce);
(function(m){var o=m.each,q=m.extend,k=m.DOM,j=m.dom.Event,b=m.explode,g=m.util.Dispatcher,d=0;m.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(m.documentBaseURL)||(m.documentBaseURL+="/");m.baseURL=(new m.util.URI(m.documentBaseURL)).toAbsolute(m.baseURL);m.baseURI=new m.util.URI(m.baseURL);m.onBeforeUnload=new g(m);j.add(window,"beforeunload",function(l){m.onBeforeUnload.dispatch(m,l)});m.onAddEditor=new g(m);m.onRemoveEditor=new g(m);m.EditorManager=
q(m,{editors:[],i18n:{},activeEditor:null,init:function(l){function r(c,i,a){var h=c[i];if(h){if(m.is(h,"string")){a=(a=h.replace(/\.\w+$/,""))?m.resolve(a):0;h=m.resolve(h)}return h.apply(a||this,Array.prototype.slice.call(arguments,2))}}var u=this,v,f=[],e;l=q({theme:"simple",language:"en"},l);u.settings=l;j.add(document,"init",function(){var c,i;r(l,"onpageload");switch(l.mode){case "exact":c=l.elements||"";c.length>0&&o(b(c),function(a){if(k.get(a)){e=new m.Editor(a,l);f.push(e);e.render(1)}else o(document.forms,
function(h){o(h.elements,function(n){if(n.name===a){a="mce_editor_"+d++;k.setAttrib(n,"id",a);e=new m.Editor(a,l);f.push(e);e.render(1)}})})});break;case "textareas":case "specific_textareas":o(k.select("textarea"),function(a){if(!(l.editor_deselector&&(l.editor_deselector.constructor===RegExp?l.editor_deselector.test(a.className):k.hasClass(a,l.editor_deselector))))if(!l.editor_selector||(l.editor_selector.constructor===RegExp?l.editor_selector.test(a.className):k.hasClass(a,l.editor_selector))){v=
k.get(a.name);if(!a.id&&!v)a.id=a.name;if(!a.id||u.get(a.id))a.id=k.uniqueId();e=new m.Editor(a.id,l);f.push(e);e.render(1)}})}if(l.oninit){c=i=0;o(f,function(a){i++;if(a.initialized)c++;else a.onInit.add(function(){c++;c==i&&r(l,"oninit")});c==i&&r(l,"oninit")})}})},get:function(l){if(l===void 0)return this.editors;return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(l){var r=this.editors;r[l.id]=l;r.push(l);this._setActive(l);this.onAddEditor.dispatch(this,l);return l},
remove:function(l){var r,u=this.editors;if(!u[l.id])return null;delete u[l.id];for(r=0;r<u.length;r++)if(u[r]==l){u.splice(r,1);break}this.activeEditor==l&&this._setActive(u[0]);l.destroy();this.onRemoveEditor.dispatch(this,l);return l},execCommand:function(l,r,u){var v=this.get(u),f;switch(l){case "mceFocus":v.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(u)||(new m.Editor(u,this.settings)).render();return true;case "mceAddFrameControl":f=u.window;f.tinyMCE=tinyMCE;f.tinymce=
m;m.DOM.doc=f.document;m.DOM.win=f;v=new m.Editor(u.element_id,u);v.render();if(m.isIE){var e=function(){v.destroy();f.detachEvent("onunload",e);f=f.tinyMCE=f.tinymce=null};f.attachEvent("onunload",e)}u.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":v&&v.remove();return true;case "mceToggleEditor":if(!v){this.execCommand("mceAddControl",0,u);return true}v.isHidden()?v.show():v.hide();return true}if(this.activeEditor)return this.activeEditor.execCommand(l,r,u);return false},
execInstanceCommand:function(l,r,u,v){if(l=this.get(l))return l.execCommand(r,u,v);return false},triggerSave:function(){o(this.editors,function(l){l.save()})},addI18n:function(l,r){var u=this.i18n;m.is(l,"string")?o(r,function(v,f){u[l+"."+f]=v}):o(l,function(v,f){o(v,function(e,c){o(e,function(i,a){if(c==="common")u[f+"."+a]=i;else u[f+"."+c+"."+a]=i})})})},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);
(function(m){var o=m.DOM,q=m.dom.Event,k=m.extend,j=m.util.Dispatcher,b=m.each,g=m.isGecko,d=m.isIE,l=m.is,r=m.ThemeManager,u=m.PluginManager,v=m.explode;m.create("tinymce.Editor",{Editor:function(f,e){var c=this;c.id=c.editorId=f;c.execCommands={};c.queryStateCommands={};c.queryValueCommands={};c.isNotDirty=false;c.plugins={};b(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp",
"onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(i){c[i]=new j(c)});c.settings=e=k({id:f,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:m.documentBaseURL,
add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:m.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",
apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",
hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true},e);c.documentBaseURI=new m.util.URI(e.document_base_url||m.documentBaseURL,{base_uri:tinyMCE.baseURI});c.baseURI=m.baseURI;c.execCallback("setup",c)},render:function(){var f=this,e=f.settings,c=f.id,i=m.ScriptLoader;if(q.domLoaded){tinyMCE.settings=e;if(f.getElement())if(!m.isIDevice){!/TEXTAREA|INPUT/i.test(f.getElement().nodeName)&&
e.hidden_input&&o.getParent(c,"form")&&o.insertAfter(o.create("input",{type:"hidden",name:c}),c);if(m.WindowManager)f.windowManager=new m.WindowManager(f);e.encoding=="xml"&&f.onGetContent.add(function(a,h){if(h.save)h.content=o.encode(h.content)});e.add_form_submit_trigger&&f.onSubmit.addToTop(function(){if(f.initialized){f.save();f.isNotDirty=1}});if(e.add_unload_trigger)f._beforeUnload=tinyMCE.onBeforeUnload.add(function(){f.initialized&&!f.destroyed&&!f.isHidden()&&f.save({format:"raw",no_events:true})});
m.addUnload(f.destroy,f);e.submit_patch&&f.onBeforeRenderUI.add(function(){var a=f.getElement().form;if(a)if(!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length){f.formElement=a;a._mceOldSubmit=a.submit;a.submit=function(){m.triggerSave();f.isNotDirty=1;return f.formElement._mceOldSubmit(f.formElement)}}a=null}});(function(){e.language&&i.add(m.baseURL+"/langs/"+e.language+".js");e.theme&&e.theme.charAt(0)!="-"&&!r.urls[e.theme]&&r.load(e.theme,"themes/"+e.theme+"/editor_template"+m.suffix+
".js");b(v(e.plugins),function(a){a&&a.charAt(0)!="-"&&!u.urls[a]&&a!="safari"&&u.load(a,"plugins/"+a+"/editor_plugin"+m.suffix+".js")});i.loadQueue(function(){f.removed||f.init()})})()}}else q.add(document,"init",function(){f.render()})},init:function(){var f=this,e=f.settings,c,i,a=f.getElement(),h,n,p;m.add(f);if(e.theme){e.theme=e.theme.replace(/-/,"");h=r.get(e.theme);f.theme=new h;if(f.theme.init&&e.init_theme)f.theme.init(f,r.urls[e.theme]||m.documentBaseURL.replace(/\/$/,""))}b(v(e.plugins.replace(/\-/g,
"")),function(t){var s=u.get(t),x=u.urls[t]||m.documentBaseURL.replace(/\/$/,"");if(s){s=new s(f,x);f.plugins[t]=s;s.init&&s.init(f,x)}});if(e.popup_css!==false)e.popup_css=e.popup_css?f.documentBaseURI.toAbsolute(e.popup_css):f.baseURI.toAbsolute("themes/"+e.theme+"/skins/"+e.skin+"/dialog.css");if(e.popup_css_add)e.popup_css+=","+f.documentBaseURI.toAbsolute(e.popup_css_add);f.controlManager=new m.ControlManager(f);if(e.custom_undo_redo){f.onBeforeExecCommand.add(function(t,s,x,y,D){if(s!="Undo"&&
s!="Redo"&&s!="mceRepaint"&&(!D||!D.skip_undo))f.undoManager.hasUndo()||f.undoManager.add()});f.onExecCommand.add(function(t,s,x,y,D){if(s!="Undo"&&s!="Redo"&&s!="mceRepaint"&&(!D||!D.skip_undo))f.undoManager.add()})}f.onExecCommand.add(function(t,s){/^(FontName|FontSize)$/.test(s)||f.nodeChanged()});if(g){p=function(t,s){if(!s||!s.initial)f.execCommand("mceRepaint")};f.onUndo.add(p);f.onRedo.add(p);f.onSetContent.add(p)}f.onBeforeRenderUI.dispatch(f,f.controlManager);if(e.render_ui){c=e.width||a.style.width||
a.offsetWidth;i=e.height||a.style.height||a.offsetHeight;f.orgDisplay=a.style.display;p=/^[0-9\.]+(|px)$/i;if(p.test(""+c))c=Math.max(parseInt(c)+(h.deltaWidth||0),100);if(p.test(""+i))i=Math.max(parseInt(i)+(h.deltaHeight||0),100);h=f.theme.renderUI({targetNode:a,width:c,height:i,deltaWidth:e.delta_width,deltaHeight:e.delta_height});f.editorContainer=h.editorContainer}if(document.domain&&location.hostname!=document.domain)m.relaxedDomain=document.domain;o.setStyles(h.sizeContainer||h.editorContainer,
{width:c,height:i});i=(h.iframeHeight||i)+(typeof i=="number"?h.deltaHeight||0:"");if(i<100)i=100;f.iframeHTML=e.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(e.document_base_url!=m.documentBaseURL)f.iframeHTML+='<base href="'+f.documentBaseURI.getURI()+'" />';f.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(m.relaxedDomain)f.iframeHTML+='<script type="text/javascript">document.domain = "'+
m.relaxedDomain+'";<\/script>';c=e.body_id||"tinymce";if(c.indexOf("=")!=-1){c=f.getParam("body_id","","hash");c=c[f.id]||c}e=e.body_class||"";if(e.indexOf("=")!=-1){e=f.getParam("body_class","","hash");e=e[f.id]||""}f.iframeHTML+='</head><body id="'+c+'" class="mceContentBody '+e+'"></body></html>';if(m.relaxedDomain)if(d||m.isOpera&&parseFloat(opera.version())>=9.5)n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';
else if(m.isOpera)n='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()';o.add(h.iframeContainer,"iframe",{id:f.id+"_ifr",src:n||'javascript:""',frameBorder:"0",style:{width:"100%",height:i}});f.contentAreaContainer=h.iframeContainer;o.get(h.editorContainer).style.display=f.orgDisplay;o.get(f.id).style.display="none";if(!d||!m.relaxedDomain)f.setupIframe();a=h=null},setupIframe:function(){var f=this,e=f.settings;o.get(f.id);var c=f.getDoc(),
i;if(!d||!m.relaxedDomain){c.open();c.write(f.iframeHTML);c.close()}if(!d)try{if(!e.readonly)c.designMode="On"}catch(a){}if(d){i=f.getBody();o.hide(i);if(!e.readonly)i.contentEditable=true;o.show(i)}f.dom=new m.dom.DOMUtils(f.getDoc(),{keep_values:true,url_converter:f.convertURL,url_converter_scope:f,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:e.valid_styles});f.schema=new m.dom.Schema;f.serializer=new m.dom.Serializer(k(e,{valid_elements:e.verify_html===
false?"*[*]":e.valid_elements,dom:f.dom,schema:f.schema}));f.selection=new m.dom.Selection(f.dom,f.getWin(),f.serializer);f.formatter=new m.Formatter(this);f.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",
styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},
exact:true},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"}},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"}},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",
remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});b("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(t){f.formatter.register(t,{block:t,remove:"all"})});f.formatter.register(f.settings.formats);f.undoManager=new m.UndoManager(f);f.undoManager.onAdd.add(function(t,s){if(!s.initial)return f.onChange.dispatch(f,
s,t)});f.undoManager.onUndo.add(function(t,s){return f.onUndo.dispatch(f,s,t)});f.undoManager.onRedo.add(function(t,s){return f.onRedo.dispatch(f,s,t)});f.forceBlocks=new m.ForceBlocks(f,{forced_root_block:e.forced_root_block});f.editorCommands=new m.EditorCommands(f);f.serializer.onPreProcess.add(function(t,s){return f.onPreProcess.dispatch(f,s,t)});f.serializer.onPostProcess.add(function(t,s){return f.onPostProcess.dispatch(f,s,t)});f.onPreInit.dispatch(f);if(!e.gecko_spellcheck)f.getBody().spellcheck=
0;e.readonly||f._addEvents();f.controlManager.onPostRender.dispatch(f,f.controlManager);f.onPostRender.dispatch(f);if(e.directionality)f.getBody().dir=e.directionality;if(e.nowrap)f.getBody().style.whiteSpace="nowrap";if(e.custom_elements){var h=function(t,s){b(v(e.custom_elements),function(x){var y;if(x.indexOf("~")===0){x=x.substring(1);y="span"}else y="div";s.content=s.content.replace(RegExp("<("+x+")([^>]*)>","g"),"<"+y+' _mce_name="$1"$2>');s.content=s.content.replace(RegExp("</("+x+")>","g"),
"</"+y+">")})};f.onBeforeSetContent.add(h);f.onPostProcess.add(function(t,s){s.set&&h(t,s)})}e.handle_node_change_callback&&f.onNodeChange.add(function(t,s,x){f.execCallback("handle_node_change_callback",f.id,x,-1,-1,true,f.selection.isCollapsed())});e.save_callback&&f.onSaveContent.add(function(t,s){var x=f.execCallback("save_callback",f.id,s.content,f.getBody());if(x)s.content=x});e.onchange_callback&&f.onChange.add(function(t,s){f.execCallback("onchange_callback",f,s)});e.convert_newlines_to_brs&&
f.onBeforeSetContent.add(function(t,s){if(s.initial)s.content=s.content.replace(/\r?\n/g,"<br />")});e.fix_nesting&&d&&f.onBeforeSetContent.add(function(t,s){s.content=f._fixNesting(s.content)});e.preformatted&&f.onPostProcess.add(function(t,s){s.content=s.content.replace(/^\s*<pre.*?>/,"");s.content=s.content.replace(/<\/pre>\s*$/,"");if(s.set)s.content='<pre class="mceItemHidden">'+s.content+"</pre>"});if(e.verify_css_classes)f.serializer.attribValueFilter=function(t,s){var x,y;if(t=="class"){if(!f.classesRE){y=
f.dom.getClasses();if(y.length>0){x="";b(y,function(D){x+=(x?"|":"")+D["class"]});f.classesRE=RegExp("("+x+")","gi")}}return!f.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(s)||f.classesRE.test(s)?s:""}return s};if(e.cleanup_callback){f.onBeforeSetContent.add(function(t,s){s.content=f.execCallback("cleanup_callback","insert_to_editor",s.content,s)});f.onPreProcess.add(function(t,s){s.set&&f.execCallback("cleanup_callback","insert_to_editor_dom",s.node,s);s.get&&f.execCallback("cleanup_callback",
"get_from_editor_dom",s.node,s)});f.onPostProcess.add(function(t,s){if(s.set)s.content=f.execCallback("cleanup_callback","insert_to_editor",s.content,s);if(s.get)s.content=f.execCallback("cleanup_callback","get_from_editor",s.content,s)})}e.save_callback&&f.onGetContent.add(function(t,s){if(s.save)s.content=f.execCallback("save_callback",f.id,s.content,f.getBody())});e.handle_event_callback&&f.onEvent.add(function(t,s,x){f.execCallback("handle_event_callback",s,t,x)===false&&q.cancel(s)});f.onSetContent.add(function(){f.addVisual(f.getBody())});
e.padd_empty_editor&&f.onPostProcess.add(function(t,s){s.content=s.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){var n=function(t){b(t.dom.select("a"),function(s){var x=s.parentNode;t.dom.isBlock(x)&&x.lastChild===s&&t.dom.add(x,"br",{_mce_bogus:1})})};f.onExecCommand.add(function(t,s){s==="CreateLink"&&n(t)});f.onSetContent.add(f.selection.onSetContent.add(n));if(!e.readonly)try{c.designMode="Off";c.designMode="On"}catch(p){}}setTimeout(function(){if(!f.removed){f.load({initial:true,
format:e.cleanup_on_startup?"html":"raw"});f.startContent=f.getContent({format:"raw"});f.initialized=true;f.onInit.dispatch(f);f.execCallback("setupcontent_callback",f.id,f.getBody(),f.getDoc());f.execCallback("init_instance_callback",f);f.focus(true);f.nodeChanged({initial:1});e.content_css&&m.each(v(e.content_css),function(t){f.dom.loadCSS(f.documentBaseURI.toAbsolute(t))});e.auto_focus&&setTimeout(function(){var t=m.get(e.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getWin().focus()},
100)}},1)},focus:function(f){var e;e=this.settings.content_editable;var c,i=this.getDoc();if(!f){f=this.selection.getRng();if(f.item)c=f.item(0);e||this.getWin().focus();if(c&&c.ownerDocument==i){f=i.body.createControlRange();f.addElement(c);f.select()}}if(m.activeEditor!=this){if((e=m.activeEditor)!=null)e.onDeactivate.dispatch(e,this);this.onActivate.dispatch(this,e)}m._setActive(this)},execCallback:function(f){var e=this.settings[f],c;if(e){if(this.callbackLookup&&(c=this.callbackLookup[f])){e=
c.func;c=c.scope}if(l(e,"string")){c=(c=e.replace(/\.\w+$/,""))?m.resolve(c):0;e=m.resolve(e);this.callbackLookup=this.callbackLookup||{};this.callbackLookup[f]={func:e,scope:c}}return e.apply(c||this,Array.prototype.slice.call(arguments,1))}},translate:function(f){var e=this.settings.language||"en",c=m.i18n;if(!f)return"";return c[e+"."+f]||f.replace(/{\#([^}]+)\}/g,function(i,a){return c[e+"."+a]||"{#"+a+"}"})},getLang:function(f,e){return m.i18n[(this.settings.language||"en")+"."+f]||(l(e)?e:"{#"+
f+"}")},getParam:function(f,e,c){var i=m.trim;f=l(this.settings[f])?this.settings[f]:e;var a;if(c==="hash"){a={};if(l(f,"string"))b(f.indexOf("=")>0?f.split(/[;,](?![^=;,]*(?:[;,]|$))/):f.split(","),function(h){h=h.split("=");if(h.length>1)a[i(h[0])]=i(h[1]);else a[i(h[0])]=i(h)});else a=f;return a}return f},nodeChanged:function(f){var e=this.selection,c=(d?e.getNode():e.getStart())||this.getBody();if(this.initialized){f=f||{};c=d&&c.ownerDocument!=this.getDoc()?this.getBody():c;f.parents=[];this.dom.getParent(c,
function(i){if(i.nodeName=="BODY")return true;f.parents.push(i)});this.onNodeChange.dispatch(this,f?f.controlManager||this.controlManager:this.controlManager,c,e.isCollapsed(),f)}},addButton:function(f,e){this.buttons=this.buttons||{};this.buttons[f]=e},addCommand:function(f,e,c){this.execCommands[f]={func:e,scope:c||this}},addQueryStateHandler:function(f,e,c){this.queryStateCommands[f]={func:e,scope:c||this}},addQueryValueHandler:function(f,e,c){this.queryValueCommands[f]={func:e,scope:c||this}},
addShortcut:function(f,e,c,i){var a=this,h;if(!a.settings.custom_shortcuts)return false;a.shortcuts=a.shortcuts||{};if(l(c,"string")){h=c;c=function(){a.execCommand(h,false,null)}}if(l(c,"object")){h=c;c=function(){a.execCommand(h[0],h[1],h[2])}}b(v(f),function(n){var p={func:c,scope:i||this,desc:e,alt:false,ctrl:false,shift:false};b(v(n,"+"),function(t){switch(t){case "alt":case "ctrl":case "shift":p[t]=true;break;default:p.charCode=t.charCodeAt(0);p.keyCode=t.toUpperCase().charCodeAt(0)}});a.shortcuts[(p.ctrl?
"ctrl":"")+","+(p.alt?"alt":"")+","+(p.shift?"shift":"")+","+p.keyCode]=p});return true},execCommand:function(f,e,c,i){var a=this,h=0,n;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(f)&&(!i||!i.skip_focus))a.focus();n={};a.onBeforeExecCommand.dispatch(a,f,e,c,n);if(n.terminate)return false;if(a.execCallback("execcommand_callback",a.id,a.selection.getNode(),f,e,c)){a.onExecCommand.dispatch(a,f,e,c,i);return true}if(n=a.execCommands[f]){n=n.func.call(n.scope,
e,c);if(n!==true){a.onExecCommand.dispatch(a,f,e,c,i);return n}}b(a.plugins,function(p){if(p.execCommand&&p.execCommand(f,e,c)){a.onExecCommand.dispatch(a,f,e,c,i);h=1;return false}});if(h)return true;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(f,e,c)){a.onExecCommand.dispatch(a,f,e,c,i);return true}if(m.GlobalCommands.execCommand(a,f,e,c)){a.onExecCommand.dispatch(a,f,e,c,i);return true}if(a.editorCommands.execCommand(f,e,c)){a.onExecCommand.dispatch(a,f,e,c,i);return true}a.getDoc().execCommand(f,
e,c);a.onExecCommand.dispatch(a,f,e,c,i)},queryCommandState:function(f){var e;if(!this._isHidden()){if(e=this.queryStateCommands[f]){e=e.func.call(e.scope);if(e!==true)return e}e=this.editorCommands.queryCommandState(f);if(e!==-1)return e;try{return this.getDoc().queryCommandState(f)}catch(c){}}},queryCommandValue:function(f){var e;if(!this._isHidden()){if(e=this.queryValueCommands[f]){e=e.func.call(e.scope);if(e!==true)return e}e=this.editorCommands.queryCommandValue(f);if(l(e))return e;try{return this.getDoc().queryCommandValue(f)}catch(c){}}},
show:function(){o.show(this.getContainer());o.hide(this.id);this.load()},hide:function(){var f=this.getDoc();d&&f&&f.execCommand("SelectAll");this.save();o.hide(this.getContainer());o.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!o.isHidden(this.id)},setProgressState:function(f,e,c){this.onSetProgressState.dispatch(this,f,e,c);return f},load:function(f){var e=this.getElement(),c;if(e){f=f||{};f.load=true;c=this.setContent(l(e.value)?e.value:e.innerHTML,f);f.element=e;f.no_events||
this.onLoadContent.dispatch(this,f);f.element=null;return c}},save:function(f){var e=this,c=e.getElement(),i;if(c&&e.initialized){f=f||{};f.save=true;if(!f.no_events){e.undoManager.typing=0;e.undoManager.add()}f.element=c;i=f.content=e.getContent(f);f.no_events||e.onSaveContent.dispatch(e,f);i=f.content;if(/TEXTAREA|INPUT/i.test(c.nodeName))c.value=i;else{c.innerHTML=i;if(c=o.getParent(e.id,"form"))b(c.elements,function(a){if(a.name==e.id){a.value=i;return false}})}f.element=c=null;return i}},setContent:function(f,
e){e=e||{};e.format=e.format||"html";e.set=true;e.content=f;e.no_events||this.onBeforeSetContent.dispatch(this,e);if(!m.isIE&&(f.length===0||/^\s+$/.test(f))){e.content=this.dom.setHTML(this.getBody(),'<br _mce_bogus="1" />');e.format="raw"}e.content=this.dom.setHTML(this.getBody(),m.trim(e.content));if(e.format!="raw"&&this.settings.cleanup){e.getInner=true;e.content=this.dom.setHTML(this.getBody(),this.serializer.serialize(this.getBody(),e))}e.no_events||this.onSetContent.dispatch(this,e);return e.content},
getContent:function(f){var e;f=f||{};f.format=f.format||"html";f.get=true;f.no_events||this.onBeforeGetContent.dispatch(this,f);if(f.format!="raw"&&this.settings.cleanup){f.getInner=true;e=this.serializer.serialize(this.getBody(),f)}else e=this.getBody().innerHTML;e=e.replace(/^\s*|\s*$/g,"");f.content=e;f.no_events||this.onGetContent.dispatch(this,f);return f.content},isDirty:function(){return m.trim(this.startContent)!=m.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){if(!this.container)this.container=
o.get(this.editorContainer||this.id+"_parent");return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var f;if(!this.contentWindow)if(f=o.get(this.id+"_ifr"))this.contentWindow=f.contentWindow;return this.contentWindow},getDoc:function(){var f;if(!this.contentDocument)if(f=this.getWin())this.contentDocument=f.document;return this.contentDocument},getBody:function(){return this.bodyElement||
this.getDoc().body},convertURL:function(f,e,c){var i=this.settings;if(i.urlconverter_callback)return this.execCallback("urlconverter_callback",f,c,true,e);if(!i.convert_urls||c&&c.nodeName=="LINK"||f.indexOf("file:")===0)return f;if(i.relative_urls)return this.documentBaseURI.toRelative(f);return f=this.documentBaseURI.toAbsolute(f,i.remove_script_host)},addVisual:function(f){var e=this,c=e.settings;f=f||e.getBody();if(!l(e.hasVisual))e.hasVisual=c.visual;b(e.dom.select("table,a",f),function(i){var a;
switch(i.nodeName){case "TABLE":a=e.dom.getAttrib(i,"border");if(!a||a=="0")e.hasVisual?e.dom.addClass(i,c.visual_table_class):e.dom.removeClass(i,c.visual_table_class);break;case "A":if(a=e.dom.getAttrib(i,"name"))e.hasVisual?e.dom.addClass(i,"mceItemAnchor"):e.dom.removeClass(i,"mceItemAnchor")}});e.onVisualAid.dispatch(e,f,e.hasVisual)},remove:function(){var f=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=
[];m.remove(this);o.remove(f)},destroy:function(f){if(!this.destroyed){if(!f){m.removeUnload(this.destroy);tinyMCE.onBeforeUnload.remove(this._beforeUnload);this.theme&&this.theme.destroy&&this.theme.destroy();this.controlManager.destroy();this.selection.destroy();this.dom.destroy();if(!this.settings.content_editable){q.clear(this.getWin());q.clear(this.getDoc())}q.clear(this.getBody());q.clear(this.formElement)}if(this.formElement){this.formElement.submit=this.formElement._mceOldSubmit;this.formElement._mceOldSubmit=
null}this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null;if(this.selection)this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null;this.destroyed=1}},_addEvents:function(){function f(p,t){if(!e.removed)if(e.onEvent.dispatch(e,p,t)!==false)e[a[p.fakeType||p.type]].dispatch(e,p,t)}var e=this,c,i=e.settings,a={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",
keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};b(a,function(p,t){switch(t){case "contextmenu":m.isOpera?e.dom.bind(e.getBody(),"mousedown",function(s){if(s.ctrlKey){s.fakeType="contextmenu";f(s)}}):e.dom.bind(e.getBody(),t,f);break;case "paste":e.dom.bind(e.getBody(),t,function(s){f(s)});break;case "submit":case "reset":e.dom.bind(e.getElement().form||o.getParent(e.id,"form"),t,f);break;default:e.dom.bind(i.content_editable?
e.getBody():e.getDoc(),t,f)}});e.dom.bind(i.content_editable?e.getBody():g?e.getDoc():e.getWin(),"focus",function(){e.focus(true)});m.isGecko&&e.dom.bind(e.getDoc(),"DOMNodeInserted",function(p){var t;p=p.target;if(p.nodeType===1&&p.nodeName==="IMG"&&(t=p.getAttribute("_mce_src")))p.src=e.documentBaseURI.toAbsolute(t)});if(g){c=function(){var p=this.getDoc(),t=this.settings;if(g&&!t.readonly){if(this._isHidden())try{if(!t.content_editable)p.designMode="On"}catch(s){}try{p.execCommand("styleWithCSS",
0,false)}catch(x){if(!this._isHidden())try{p.execCommand("useCSS",0,true)}catch(y){}}if(!t.table_inline_editing)try{p.execCommand("enableInlineTableEditing",false,false)}catch(D){}if(!t.object_resizing)try{p.execCommand("enableObjectResizing",false,false)}catch(B){}}};e.onBeforeExecCommand.add(c);e.onMouseDown.add(c)}m.isWebKit&&e.onClick.add(function(p,t){t=t.target;if(t.nodeName=="IMG"||t.nodeName=="A"&&e.dom.hasClass(t,"mceItemAnchor"))e.selection.getSel().setBaseAndExtent(t,0,t,1)});e.onMouseUp.add(e.nodeChanged);
e.onKeyUp.add(function(p,t){var s=t.keyCode;if(s>=33&&s<=36||s>=37&&s<=40||s==13||s==45||s==46||s==8||m.isMac&&(s==91||s==93)||t.ctrlKey)e.nodeChanged()});e.onReset.add(function(){e.setContent(e.startContent,{format:"raw"})});if(i.custom_shortcuts){if(i.custom_undo_redo_keyboard_shortcuts){e.addShortcut("ctrl+z",e.getLang("undo_desc"),"Undo");e.addShortcut("ctrl+y",e.getLang("redo_desc"),"Redo")}e.addShortcut("ctrl+b",e.getLang("bold_desc"),"Bold");e.addShortcut("ctrl+i",e.getLang("italic_desc"),
"Italic");e.addShortcut("ctrl+u",e.getLang("underline_desc"),"Underline");for(c=1;c<=6;c++)e.addShortcut("ctrl+"+c,"",["FormatBlock",false,"h"+c]);e.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);e.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);e.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);var h=function(p){var t=null;if(!p.altKey&&!p.ctrlKey&&!p.metaKey)return t;b(e.shortcuts,function(s){if(!(m.isMac&&s.ctrl!=p.metaKey))if(!(!m.isMac&&s.ctrl!=p.ctrlKey))if(s.alt==p.altKey)if(s.shift==
p.shiftKey)if(p.keyCode==s.keyCode||p.charCode&&p.charCode==s.charCode){t=s;return false}});return t};e.onKeyUp.add(function(p,t){if(h(t))return q.cancel(t)});e.onKeyPress.add(function(p,t){if(h(t))return q.cancel(t)});e.onKeyDown.add(function(p,t){var s=h(t);if(s){s.func.call(s.scope);return q.cancel(t)}})}if(m.isIE){e.dom.bind(e.getDoc(),"controlselect",function(p){var t=e.resizeInfo;p=p.target;if(p.nodeName==="IMG"){t&&e.dom.unbind(t.node,t.ev,t.cb);if(e.dom.hasClass(p,"mceItemNoResize")){ev="resizestart";
t=e.dom.bind(p,"resizestart",q.cancel,q)}else{ev="resizeend";t=e.dom.bind(p,ev,function(s){var x;s=s.target;if(x=e.dom.getStyle(s,"width")){e.dom.setAttrib(s,"width",x.replace(/[^0-9%]+/g,""));e.dom.setStyle(s,"width","")}if(x=e.dom.getStyle(s,"height")){e.dom.setAttrib(s,"height",x.replace(/[^0-9%]+/g,""));e.dom.setStyle(s,"height","")}})}t=e.resizeInfo={node:p,ev:ev,cb:t}}});e.onKeyDown.add(function(p,t){switch(t.keyCode){case 8:if(e.selection.getRng().item){p.dom.remove(e.selection.getRng().item(0));
return q.cancel(t)}}})}m.isOpera&&e.onClick.add(function(p,t){q.prevent(t)});if(i.custom_undo_redo){var n=function(){e.undoManager.typing=0;e.undoManager.add()};e.dom.bind(e.getDoc(),"focusout",function(){!e.removed&&e.undoManager.typing&&n()});e.onKeyUp.add(function(p,t){if(t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||t.keyCode==13||t.keyCode==45||t.ctrlKey)n()});e.onKeyDown.add(function(p,t){var s,x,y,D;if(d&&t.keyCode==46){s=e.selection.getRng();if(s.parentElement){y=s.parentElement();
x=s.duplicate();x.moveToElementText(y);x.setEndPoint("EndToEnd",s);D=x.text.length;if(t.ctrlKey){s.moveEnd("word",1);s.select()}e.selection.getSel().clear();if(s.parentElement()==y){try{y.innerHTML=y.innerHTML}catch(B){}x.moveToElementText(y);x.collapse();x.move("character",D);x.select()}t.preventDefault();return}}if(t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||t.keyCode==13||t.keyCode==45)e.undoManager.typing&&n();else if(!e.undoManager.typing){e.undoManager.add();e.undoManager.typing=
1}});e.onMouseDown.add(function(){e.undoManager.typing&&n()})}},_isHidden:function(){var f;if(!g)return 0;f=this.selection.getSel();return!f||!f.rangeCount||f.rangeCount==0},_fixNesting:function(f){var e=[],c;f=f.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(i,a,h){if(a==="/"){if(!e.length)return"";if(h!==e[e.length-1].tag){for(c=e.length-1;c>=0;c--)if(e[c].tag===h){e[c].close=1;break}return""}else{e.pop();if(e.length&&e[e.length-1].close){i=i+"</"+e[e.length-1].tag+">";e.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(h))return i;
if(/\/>$/.test(i))return i;e.push({tag:h})}return i});for(c=e.length-1;c>=0;c--)f+="</"+e[c].tag+">";return f}})})(tinymce);
(function(m){var o=m.each,q=false;m.EditorCommands=function(k){function j(e){var c;e=e.toLowerCase();if(c=u.state[e])return c(e);return-1}function b(e,c){c=c||"exec";o(e,function(i,a){o(a.toLowerCase().split(","),function(h){u[c][h]=i})})}function g(e,c,i){if(c===void 0)c=q;if(i===void 0)i=null;return k.getDoc().execCommand(e,c,i)}function d(e,c){k.formatter.toggle(e,c?{value:c}:void 0)}var l=k.dom,r=k.selection,u={state:{},exec:{},value:{}},v=k.settings,f;m.extend(this,{execCommand:function(e,c,
i){var a;e=e.toLowerCase();if(a=u.exec[e]){a(e,c,i);return true}return q},queryCommandState:j,queryCommandValue:function(e){var c;e=e.toLowerCase();if(c=u.value[e])return c(e);return q},addCommands:b});b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){k.undoManager.add()},"Cut,Copy,Paste":function(e){var c=k.getDoc(),i;try{g(e)}catch(a){i=true}if(i||!c.queryCommandSupported(e))m.isGecko?k.windowManager.confirm(k.getLang("clipboard_msg"),function(h){h&&
open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):k.windowManager.alert(k.getLang("clipboard_no_support"))},unlink:function(e){r.isCollapsed()&&r.select(r.getNode());g(e);r.collapse(q)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var c=e.substring(7);o("left,center,right,full".split(","),function(i){c!=i&&k.formatter.remove("align"+i)});d("align"+c)},"InsertUnorderedList,InsertOrderedList":function(e){var c;g(e);if(e=l.getParent(r.getNode(),"ol,ul")){c=
e.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)){f=r.getBookmark(void 0);l.split(c,e);r.moveToBookmark(f)}}},"Bold,Italic,Underline,Strikethrough":function(e){d(e)},"ForeColor,HiliteColor,FontName":function(e,c,i){d(e,i)},FontSize:function(e,c,i){var a;if(i>=1&&i<=7){a=m.explode(v.font_size_style_values);i=(c=m.explode(v.font_size_classes))?c[i-1]||i:a[i-1]||i}d(e,i)},RemoveFormat:function(e){k.formatter.remove(e)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(e,c,i){return d(i)},
mceCleanup:function(){var e=r.getBookmark();k.setContent(k.getContent({cleanup:true}),{cleanup:true});r.moveToBookmark(e)},mceRemoveNode:function(e,c,i){e=i||r.getNode();if(e!=k.getBody()){f=r.getBookmark(void 0);k.dom.remove(e,true);r.moveToBookmark(f)}},mceSelectNodeDepth:function(e,c,i){var a=0;l.getParent(r.getNode(),function(h){if(h.nodeType==1&&a++==i){r.select(h);return q}},k.getBody())},mceSelectNode:function(e,c,i){r.select(i)},mceInsertContent:function(e,c,i){r.setContent(i)},mceInsertRawHTML:function(e,
c,i){r.setContent("tiny_mce_marker");k.setContent(k.getContent().replace(/tiny_mce_marker/g,i))},mceSetContent:function(e,c,i){k.setContent(i)},"Indent,Outdent":function(e){var c,i,a;c=v.indentation;i=/[a-z%]+$/i.exec(c);c=parseInt(c);!j("InsertUnorderedList")&&!j("InsertOrderedList")?o(r.getSelectedBlocks(),function(h){if(e=="outdent"){a=Math.max(0,parseInt(h.style.paddingLeft||0)-c);l.setStyle(h,"paddingLeft",a?a+i:"")}else l.setStyle(h,"paddingLeft",parseInt(h.style.paddingLeft||0)+c+i)}):g(e)},
mceRepaint:function(){if(m.isGecko)try{f=r.getBookmark(true);r.getSel()&&r.getSel().selectAllChildren(k.getBody());r.collapse(true);r.moveToBookmark(f)}catch(e){}},mceToggleFormat:function(e,c,i){k.formatter.toggle(i)},InsertHorizontalRule:function(){r.setContent("<hr />")},mceToggleVisualAid:function(){k.hasVisual=!k.hasVisual;k.addVisual()},mceReplaceContent:function(e,c,i){r.setContent(i.replace(/\{\$selection\}/g,r.getContent({format:"text"})))},mceInsertLink:function(e,c,i){e=l.getParent(r.getNode(),
"a");if(m.is(i,"string"))i={href:i};if(e)i.href?l.setAttribs(e,i):k.dom.remove(e,true);else{g("CreateLink",q,"javascript:mctmp(0);");o(l.select("a[href=javascript:mctmp(0);]"),function(a){l.setAttribs(a,i)})}},selectAll:function(){var e=l.getRoot(),c=l.createRng();c.setStart(e,0);c.setEnd(e,e.childNodes.length);k.selection.setRng(c)}});b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){e="align"+e.substring(7);return k.formatter.match(e)},"Bold,Italic,Underline,Strikethrough":function(e){return k.formatter.match(e)},
mceBlockQuote:function(){return k.formatter.match("blockquote")},Outdent:function(){var e;if(v.inline_styles){if((e=l.getParent(r.getStart(),l.isBlock))&&parseInt(e.style.paddingLeft)>0)return true;if((e=l.getParent(r.getEnd(),l.isBlock))&&parseInt(e.style.paddingLeft)>0)return true}return j("InsertUnorderedList")||j("InsertOrderedList")||!v.inline_styles&&!!l.getParent(r.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){return l.getParent(r.getNode(),e=="insertunorderedlist"?
"UL":"OL")}},"state");b({"FontSize,FontName":function(e){var c=0,i;if(i=l.getParent(r.getNode(),"span"))c=e=="fontsize"?i.style.fontSize:i.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return c}},"value");v.custom_undo_redo&&b({Undo:function(){k.undoManager.undo()},Redo:function(){k.undoManager.redo()}})}})(tinymce);
(function(m){var o=m.util.Dispatcher;m.UndoManager=function(q){var k,j=0,b=[];return k={typing:0,onAdd:new o(k),onUndo:new o(k),onRedo:new o(k),add:function(g){var d;d=q.settings;var l;g=g||{};g.content=m.trim(q.getContent({format:"raw",no_events:1}));if((l=b[j])&&l.content==g.content)if(j>0||b.length==1)return null;if(d.custom_undo_redo_levels)if(b.length>d.custom_undo_redo_levels){for(d=0;d<b.length-1;d++)b[d]=b[d+1];b.length--;j=b.length}g.bookmark=q.selection.getBookmark(2,true);if(j<b.length-
1)if(j==0)b=[];else b.length=j+1;b.push(g);j=b.length-1;k.onAdd.dispatch(k,g);q.isNotDirty=0;return g},undo:function(){var g;if(k.typing){k.add();k.typing=0}if(j>0){g=b[--j];q.setContent(g.content,{format:"raw"});q.selection.moveToBookmark(g.bookmark);k.onUndo.dispatch(k,g)}return g},redo:function(){var g;if(j<b.length-1){g=b[++j];q.setContent(g.content,{format:"raw"});q.selection.moveToBookmark(g.bookmark);k.onRedo.dispatch(k,g)}return g},clear:function(){b=[];j=k.typing=0},hasUndo:function(){return j>
0||k.typing},hasRedo:function(){return j<b.length-1}}}})(tinymce);
(function(m){function o(v,f){var e=f.ownerDocument.createRange();e.setStart(v.endContainer,v.endOffset);e.setEndAfter(f);return e.cloneContents().textContent.length==0}function q(v){v=v.innerHTML;v=v.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");v=v.replace(/<[^>]+>/g,"");return v.replace(/[ \u00a0\t\r\n]+/g,"")==""}function k(v,f,e){var c;if(q(e)){c=f.getParent(e,"ul,ol");if(!f.getParent(c.parentNode,"ul,ol")){f.split(c,e);c=f.create("p",0,'<br _mce_bogus="1" />');f.replace(c,e);v.select(c,
1)}return u}return r}var j=m.dom.Event,b=m.isIE,g=m.isGecko,d=m.isOpera,l=m.each,r=true,u=false;m.create("tinymce.ForceBlocks",{ForceBlocks:function(v){function f(a,h){if(d)h.content=h.content.replace(e.reOpera,"</"+i+">");h.content=h.content.replace(e.rePadd,"<"+i+"$1$2$3$4$5$6>\u00a0</"+i+">");if(!b&&!d&&h.set){h.content=h.content.replace(e.reNbsp2BR1,"<"+i+"$1$2><br /></"+i+">");h.content=h.content.replace(e.reNbsp2BR2,"<"+i+"$1$2><br /></"+i+">")}else h.content=h.content.replace(e.reBR2Nbsp,"<"+
i+"$1$2>\u00a0</"+i+">")}var e=this,c=v.settings,i;e.editor=v;e.dom=v.dom;i=(c.forced_root_block||"p").toLowerCase();c.element=i.toUpperCase();v.onPreInit.add(e.setup,e);e.reOpera=RegExp("(\\u00a0|&#160;|&nbsp;)</"+i+">","gi");e.rePadd=RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,i),"gi");e.reNbsp2BR1=RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,i),"gi");e.reNbsp2BR2=RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,
i),"gi");e.reBR2Nbsp=RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,i),"gi");v.onBeforeSetContent.add(f);v.onPostProcess.add(f);if(c.forced_root_block){v.onInit.add(e.forceRoots,e);v.onSetContent.add(e.forceRoots,e);v.onBeforeGetContent.add(e.forceRoots,e)}},setup:function(){var v=this,f=v.editor,e=f.settings,c=f.dom,i=f.selection;if(e.forced_root_block){f.onBeforeExecCommand.add(v.forceRoots,v);f.onKeyUp.add(v.forceRoots,v);f.onPreProcess.add(v.forceRoots,v)}e.force_br_newlines&&
b&&f.onKeyPress.add(function(a,h){var n;if(h.keyCode==13&&i.getNode().nodeName!="LI"){i.setContent('<br id="__" /> ',{format:"raw"});n=c.get("__");n.removeAttribute("id");i.select(n);i.collapse();return j.cancel(h)}});if(e.force_p_newlines){if(b){m.addUnload(function(){v._previousFormats=0});f.onKeyPress.add(function(a,h){v._previousFormats=0;if(h.keyCode==13&&!h.shiftKey&&a.selection.isCollapsed()&&e.keep_styles){var n;var p=a.selection.getStart(),t,s,x;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(p.nodeName)){if(t){s=
p.cloneNode(false);s.appendChild(t);t=s}else t=x=p.cloneNode(false);t.removeAttribute("id")}while(p=p.parentNode);if(t)n={wrapper:t,inner:x};v._previousFormats=n}});f.onKeyUp.add(function(a,h){if(h.keyCode==13&&!h.shiftKey){var n=a.selection.getStart(),p=v._previousFormats;if(!n.hasChildNodes())if(n=c.getParent(n,c.isBlock)){n.innerHTML="";if(v._previousFormats){n.appendChild(p.wrapper);p.inner.innerHTML="\ufeff"}else n.innerHTML="\ufeff";i.select(n,1);a.getDoc().execCommand("Delete",false,null)}}})}else f.onKeyPress.add(function(a,
h){h.keyCode==13&&!h.shiftKey&&!v.insertPara(h)&&j.cancel(h)});g&&f.onKeyDown.add(function(a,h){if((h.keyCode==8||h.keyCode==46)&&!h.shiftKey)v.backspaceDelete(h,h.keyCode==8)})}m.isWebKit&&f.onKeyPress.add(function(a,h){if(h.keyCode==13&&(h.shiftKey||e.force_br_newlines&&!c.getParent(i.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var n=i.getRng(),p,t=c.create("div",null," "),s=c.getViewPort(a.getWin()).h;n.insertNode(p=c.create("br"));n.setStartAfter(p);n.setEndAfter(p);i.setRng(n);if(i.getSel().focusNode==
p.previousSibling){i.select(c.insertAfter(c.doc.createTextNode("\u00a0"),p));i.collapse(r)}c.insertAfter(t,p);n=c.getPos(t).y;c.remove(t);n>s&&a.getWin().scrollTo(0,n);j.cancel(h)}});f.onPreProcess.add(function(a,h){l(c.select("p,h1,h2,h3,h4,h5,h6,div",h.node),function(n){q(n)&&l(c.select("span,em,strong,b,i",h.node),function(p){if(!p.hasChildNodes()){p.appendChild(a.getDoc().createTextNode("\u00a0"));return u}})})});if(b)if(e.element!="P"){f.onKeyPress.add(function(){v.lastElm=i.getNode().nodeName});
f.onKeyUp.add(function(a,h){var n;n=i.getNode();if(a.getBody().childNodes.length===1&&n.nodeName=="P"){n=c.rename(n,e.element);i.select(n);i.collapse();a.nodeChanged()}else if(h.keyCode==13&&!h.shiftKey&&v.lastElm!="P")if(n=c.getParent(n,"p")){c.rename(n,e.element);a.nodeChanged()}})}},find:function(v,f,e){for(var c=this.editor.getDoc().createTreeWalker(v,4,null,u),i=-1;v=c.nextNode();){i++;if(f==0&&v==e)return i;if(f==1&&i==e)return v}return-1},forceRoots:function(v){v=this.editor;var f=v.getBody(),
e=v.getDoc(),c=v.selection,i=c.getSel(),a=c.getRng(),h=-2,n,p,t,s,x,y=f.childNodes,D,B,M;for(D=y.length-1;D>=0;D--){x=y[D];if(x.nodeType===1&&x.getAttribute("_mce_type"))s=null;else if(x.nodeType===3||!this.dom.isBlock(x)&&x.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(x.nodeName))if(s)s.hasChildNodes()?s.insertBefore(x,s.firstChild):s.appendChild(x);else{if(x.nodeType!=3||/[^\s]/g.test(x.nodeValue)){if(h==-2&&a)if(b){if(a.item){s=e.body.createTextRange();s.moveToElementText(a.item(0));
a=s}s=e.body.createTextRange();s.moveToElementText(f);s.collapse(1);h=s.move("character",-16777215)*-1;s=a.duplicate();s.collapse(1);n=s.move("character",-16777215)*-1;s=a.duplicate();s.collapse(0);s=s.move("character",-16777215)*-1-n;h=n-h;n=s}else if(a.startContainer.nodeType==1&&(B=a.startContainer.childNodes[a.startOffset])&&B.nodeType==1){M=B.getAttribute("id");B.setAttribute("id","__mce")}else if(v.dom.getParent(a.startContainer,function(C){return C===f})){p=a.startOffset;t=a.endOffset;h=this.find(f,
0,a.startContainer);n=this.find(f,0,a.endContainer)}s=v.dom.create(v.settings.forced_root_block);x.parentNode.replaceChild(s,x);s.appendChild(x)}}else s=null}if(h!=-2)if(b)try{a=i.createRange();a.moveToElementText(f);a.collapse(1);a.moveStart("character",h);a.moveEnd("character",n);a.select()}catch(X){}else{s=f.getElementsByTagName(v.settings.element)[0];a=e.createRange();h!=-1?a.setStart(this.find(f,1,h),p):a.setStart(s,0);n!=-1?a.setEnd(this.find(f,1,n),t):a.setEnd(s,0);if(i){i.removeAllRanges();
i.addRange(a)}}else if(!b&&(B=v.dom.get("__mce"))){M?B.setAttribute("id",M):B.removeAttribute("id");a=e.createRange();a.setStartBefore(B);a.setEndBefore(B);c.setRng(a)}},getParentBlock:function(v){var f=this.dom;return f.getParent(v,f.isBlock)},insertPara:function(){function v(V,aa){var ea=[],Z,z;V.innerHTML="";if(i.keep_styles){z=aa;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(z.nodeName)){Z=z.cloneNode(u);e.setAttrib(Z,"id","");ea.push(Z)}while(z=z.parentNode)}if(ea.length>0){z=ea.length-1;
for(Z=V;z>=0;z--)Z=Z.appendChild(ea[z]);ea[0].innerHTML=d?"&nbsp;":"<br />";return ea[0]}else V.innerHTML=d?"&nbsp;":"<br />"}var f=this.editor,e=f.dom,c=f.getDoc(),i=f.settings,a=f.selection.getSel(),h=a.getRangeAt(0),n=c.body,p,t,s,x,y,D,B,M,X,C,E,A,K=e.getViewPort(f.getWin()),H;p=c.createRange();p.setStart(a.anchorNode,a.anchorOffset);p.collapse(r);t=c.createRange();t.setStart(a.focusNode,a.focusOffset);t.collapse(r);x=(s=p.compareBoundaryPoints(p.START_TO_END,t)<0)?a.anchorNode:a.focusNode;y=
s?a.anchorOffset:a.focusOffset;D=s?a.focusNode:a.anchorNode;s=s?a.focusOffset:a.anchorOffset;if(x===D&&/^(TD|TH)$/.test(x.nodeName)){x.firstChild.nodeName=="BR"&&e.remove(x.firstChild);if(x.childNodes.length==0)f.dom.add(x,i.element,null,"<br />");else{A=x.innerHTML;x.innerHTML="";f.dom.add(x,i.element,null,A)}M=f.dom.add(x,i.element,null,"<br />");h=c.createRange();h.selectNodeContents(M);h.collapse(1);f.selection.setRng(h);return u}if(x==n&&D==n&&n.firstChild&&f.dom.isBlock(n.firstChild)){x=D=x.firstChild;
y=s=0;p=c.createRange();p.setStart(x,0);t=c.createRange();t.setStart(D,0)}x=x.nodeName=="HTML"?c.body:x;x=x.nodeName=="BODY"?x.firstChild:x;D=D.nodeName=="HTML"?c.body:D;D=D.nodeName=="BODY"?D.firstChild:D;B=this.getParentBlock(x);M=this.getParentBlock(D);X=B?B.nodeName:i.element;if(A=this.dom.getParent(B,"li,pre")){if(A.nodeName=="LI")return k(f.selection,this.dom,A);return r}if(B&&(B.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(e.getStyle(B,"position",1)))){X=i.element;B=null}if(M&&(M.nodeName==
"CAPTION"||/absolute|relative|fixed/gi.test(e.getStyle(B,"position",1)))){X=i.element;M=null}if(/(TD|TABLE|TH|CAPTION)/.test(X)||B&&X=="DIV"&&/left|right/gi.test(e.getStyle(B,"float",1))){X=i.element;B=M=null}C=B&&B.nodeName==X?B.cloneNode(0):f.dom.create(X);M=M&&M.nodeName==X?M.cloneNode(0):f.dom.create(X);M.removeAttribute("id");if(/^(H[1-6])$/.test(X)&&o(h,B))M=f.dom.create(i.element);A=B=x;do{if(A==n||A.nodeType==9||this.dom.isBlock(A)||/(TD|TABLE|TH|CAPTION)/.test(A.nodeName))break;B=A}while(A=
A.previousSibling?A.previousSibling:A.parentNode);A=E=D;do{if(A==n||A.nodeType==9||this.dom.isBlock(A)||/(TD|TABLE|TH|CAPTION)/.test(A.nodeName))break;E=A}while(A=A.nextSibling?A.nextSibling:A.parentNode);B.nodeName==X?p.setStart(B,0):p.setStartBefore(B);p.setEnd(x,y);C.appendChild(p.cloneContents()||c.createTextNode(""));try{t.setEndAfter(E)}catch(W){}t.setStart(D,s);M.appendChild(t.cloneContents()||c.createTextNode(""));h=c.createRange();if(!B.previousSibling&&B.parentNode.nodeName==X)h.setStartBefore(B.parentNode);
else p.startContainer.nodeName==X&&p.startOffset==0?h.setStartBefore(p.startContainer):h.setStart(p.startContainer,p.startOffset);!E.nextSibling&&E.parentNode.nodeName==X?h.setEndAfter(E.parentNode):h.setEnd(t.endContainer,t.endOffset);h.deleteContents();d&&f.getWin().scrollTo(0,K.y);if(C.firstChild&&C.firstChild.nodeName==X)C.innerHTML=C.firstChild.innerHTML;if(M.firstChild&&M.firstChild.nodeName==X)M.innerHTML=M.firstChild.innerHTML;if(q(C))C.innerHTML="<br />";if(q(M))H=v(M,D);if(d&&parseFloat(opera.version())<
9.5){h.insertNode(C);h.insertNode(M)}else{h.insertNode(M);h.insertNode(C)}M.normalize();C.normalize();h=c.createRange();h.selectNodeContents(g?c.createTreeWalker(H||M,NodeFilter.SHOW_TEXT,null,u).nextNode()||H||M:H||M);h.collapse(1);a.removeAllRanges();a.addRange(h);c=f.dom.getPos(M).y;a=M.clientHeight;if(c<K.y||c+a>K.y+K.h)f.getWin().scrollTo(0,c<K.y?c:c-K.h+25);return u},backspaceDelete:function(v,f){var e=this.editor,c=e.getBody(),i,a=e.selection,h=a.getRng(),n=h.startContainer,p;if(!f&&h.collapsed&&
n.nodeType==1&&h.startOffset==n.childNodes.length){p=new m.dom.TreeWalker(n.lastChild,n);for(i=n.lastChild;i;i=p.prev())if(i.nodeType==3){h.setStart(i,i.nodeValue.length);h.collapse(true);a.setRng(h);return}}if(n&&e.dom.isBlock(n)&&!/^(TD|TH)$/.test(n.nodeName)&&f)if(n.childNodes.length==0||n.childNodes.length==1&&n.firstChild.nodeName=="BR"){for(i=n;(i=i.previousSibling)&&!e.dom.isBlock(i););if(i){if(n!=c.firstChild){for(c=e.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,u);h=c.nextNode();)i=
h;h=e.getDoc().createRange();h.setStart(i,i.nodeValue?i.nodeValue.length:0);h.setEnd(i,i.nodeValue?i.nodeValue.length:0);a.setRng(h);e.dom.remove(n)}return j.cancel(v)}}}})})(tinymce);
(function(m){var o=m.dom.Event,q=m.each,k=m.extend;m.create("tinymce.ControlManager",{ControlManager:function(j,b){var g=this;b=b||{};g.editor=j;g.controls={};g.onAdd=new m.util.Dispatcher(g);g.onPostRender=new m.util.Dispatcher(g);g.prefix=b.prefix||j.id+"_";g._cls={};g.onPostRender.add(function(){q(g.controls,function(d){d.postRender()})})},get:function(j){return this.controls[this.prefix+j]||this.controls[j]},setActive:function(j,b){var g=null;if(g=this.get(j))g.setActive(b);return g},setDisabled:function(j,
b){var g=null;if(g=this.get(j))g.setDisabled(b);return g},add:function(j){if(j){this.controls[j.id]=j;this.onAdd.dispatch(j,this)}return j},createControl:function(j){var b,g=this,d=g.editor;q(d.plugins,function(l){if(l.createControl)if(b=l.createControl(j,g))return false});switch(j){case "|":case "separator":return g.createSeparator()}if(!b&&d.buttons&&(b=d.buttons[j]))return g.createButton(j,b);return g.add(b)},createDropMenu:function(j,b,g){var d=this.editor,l,r,u;b=k({"class":"mceDropDown",constrain:d.settings.constrain_menus},
b);b["class"]=b["class"]+" "+d.getParam("skin")+"Skin";if(u=d.getParam("skin_variant"))b["class"]+=" "+d.getParam("skin")+"Skin"+u.substring(0,1).toUpperCase()+u.substring(1);j=this.prefix+j;l=this.controls[j]=new (g||this._cls.dropmenu||m.ui.DropMenu)(j,b);l.onAddItem.add(function(v,f){var e=f.settings;e.title=d.getLang(e.title,e.title);if(!e.onclick)e.onclick=function(){if(e.cmd)d.execCommand(e.cmd,e.ui||false,e.value)}});d.onRemove.add(function(){l.destroy()});if(m.isIE){l.onShowMenu.add(function(){d.focus();
r=d.selection.getBookmark(1)});l.onHideMenu.add(function(){if(r){d.selection.moveToBookmark(r);r=0}})}return this.add(l)},createListBox:function(j,b,g){var d=this.editor;if(this.get(j))return null;b.title=d.translate(b.title);b.scope=b.scope||d;if(!b.onselect)b.onselect=function(l){d.execCommand(b.cmd,b.ui||false,l||b.value)};b=k({title:b.title,"class":"mce_"+j,scope:b.scope,control_manager:this},b);j=this.prefix+j;if(d.settings.use_native_selects)g=new m.ui.NativeListBox(j,b);else{g=g||this._cls.listbox||
m.ui.ListBox;g=new g(j,b)}this.controls[j]=g;m.isWebKit&&g.onPostRender.add(function(l,r){o.add(r,"mousedown",function(){d.bookmark=d.selection.getBookmark(1)});o.add(r,"focus",function(){d.selection.moveToBookmark(d.bookmark);d.bookmark=null})});g.hideMenu&&d.onMouseDown.add(g.hideMenu,g);return this.add(g)},createButton:function(j,b,g){var d=this.editor;if(this.get(j))return null;b.title=d.translate(b.title);b.label=d.translate(b.label);b.scope=b.scope||d;if(!b.onclick&&!b.menu_button)b.onclick=
function(){d.execCommand(b.cmd,b.ui||false,b.value)};b=k({title:b.title,"class":"mce_"+j,unavailable_prefix:d.getLang("unavailable",""),scope:b.scope,control_manager:this},b);j=this.prefix+j;if(b.menu_button){g=g||this._cls.menubutton||m.ui.MenuButton;j=new g(j,b);d.onMouseDown.add(j.hideMenu,j)}else{g=this._cls.button||m.ui.Button;j=new g(j,b)}return this.add(j)},createMenuButton:function(j,b,g){b=b||{};b.menu_button=1;return this.createButton(j,b,g)},createSplitButton:function(j,b,g){var d=this.editor;
if(this.get(j))return null;b.title=d.translate(b.title);b.scope=b.scope||d;if(!b.onclick)b.onclick=function(l){d.execCommand(b.cmd,b.ui||false,l||b.value)};if(!b.onselect)b.onselect=function(l){d.execCommand(b.cmd,b.ui||false,l||b.value)};b=k({title:b.title,"class":"mce_"+j,scope:b.scope,control_manager:this},b);j=this.prefix+j;j=this.add(new (g||this._cls.splitbutton||m.ui.SplitButton)(j,b));d.onMouseDown.add(j.hideMenu,j);return j},createColorSplitButton:function(j,b,g){var d=this.editor,l,r;if(this.get(j))return null;
b.title=d.translate(b.title);b.scope=b.scope||d;if(!b.onclick)b.onclick=function(u){if(m.isIE)r=d.selection.getBookmark(1);d.execCommand(b.cmd,b.ui||false,u||b.value)};if(!b.onselect)b.onselect=function(u){d.execCommand(b.cmd,b.ui||false,u||b.value)};b=k({title:b.title,"class":"mce_"+j,menu_class:d.getParam("skin")+"Skin",scope:b.scope,more_colors_title:d.getLang("more_colors")},b);j=this.prefix+j;l=new (g||this._cls.colorsplitbutton||m.ui.ColorSplitButton)(j,b);d.onMouseDown.add(l.hideMenu,l);d.onRemove.add(function(){l.destroy()});
if(m.isIE){l.onShowMenu.add(function(){d.focus();r=d.selection.getBookmark(1)});l.onHideMenu.add(function(){if(r){d.selection.moveToBookmark(r);r=0}})}return this.add(l)},createToolbar:function(j,b,g){j=this.prefix+j;b=new (g||this._cls.toolbar||m.ui.Toolbar)(j,b);if(this.get(j))return null;return this.add(b)},createSeparator:function(j){return new (j||this._cls.separator||m.ui.Separator)},setControlType:function(j,b){return this._cls[j.toLowerCase()]=b},destroy:function(){q(this.controls,function(j){j.destroy()});
this.controls=null}})})(tinymce);
(function(m){var o=m.util.Dispatcher,q=m.each,k=m.isIE,j=m.isOpera;m.create("tinymce.WindowManager",{WindowManager:function(b){this.editor=b;this.onOpen=new o(this);this.onClose=new o(this);this.params={};this.features={}},open:function(b,g){var d="",l=this.editor.settings.dialog_type=="modal",r,u,v;v=m.DOM.getViewPort();b=b||{};g=g||{};u=j?v.w:screen.width;v=j?v.h:screen.height;b.name=b.name||"mc_"+(new Date).getTime();b.width=parseInt(b.width||320);b.height=parseInt(b.height||240);b.resizable=true;
b.left=b.left||parseInt(u/2)-b.width/2;b.top=b.top||parseInt(v/2)-b.height/2;g.inline=false;g.mce_width=b.width;g.mce_height=b.height;g.mce_auto_focus=b.auto_focus;if(l)if(k){b.center=true;b.help=false;b.dialogWidth=b.width+"px";b.dialogHeight=b.height+"px";b.scroll=b.scrollbars||false}q(b,function(e,c){if(m.is(e,"boolean"))e=e?"yes":"no";/^(name|url)$/.test(c)||(d+=k&&l?(d?";":"")+c+":"+e:(d?",":"")+c+"="+e)});this.features=b;this.params=g;this.onOpen.dispatch(this,b,g);u=b.url||b.file;u=m._addVer(u);
try{if(k&&l){r=1;window.showModalDialog(u,window,d)}else r=window.open(u,b.name,d)}catch(f){}r||alert(this.editor.getLang("popup_blocked"))},close:function(b){b.close();this.onClose.dispatch(this)},createInstance:function(b,g,d,l,r,u){return new (m.resolve(b))(g,d,l,r,u)},confirm:function(b,g,d,l){l=l||window;g.call(d||this,l.confirm(this._decode(this.editor.getLang(b,b))))},alert:function(b,g,d,l){l=l||window;l.alert(this._decode(this.editor.getLang(b,b)));if(g)g.call(d||this)},resizeBy:function(b,
g,d){d.resizeBy(b,g)},_decode:function(b){return m.DOM.decode(b).replace(/\\n/g,"\n")}})})(tinymce);
(function(m){m.GlobalCommands=new function(){function o(b,g,d,l){if(typeof g=="string")g=[g];m.each(g,function(r){b[r.toLowerCase()]={func:d,scope:l}})}var q={},k={},j={};m.extend(this,{add:function(b,g,d){o(q,b,g,d)},addQueryStateHandler:function(b,g,d){o(k,b,g,d)},addQueryValueHandler:function(b,g,d){o(j,b,g,d)},execCommand:function(b,g,d,l,r){if(g=q[g.toLowerCase()])if(g.func.call(b||g.scope,d,l,r)!==false)return true},queryCommandValue:function(){if(cmd=j[cmd.toLowerCase()])return cmd.func.call(scope||
cmd.scope,ui,value,args)},queryCommandState:function(){if(cmd=k[cmd.toLowerCase()])return cmd.func.call(scope||cmd.scope,ui,value,args)}})}})(tinymce);
(function(m){m.Formatter=function(o){function q(z){return z.nodeType===1&&(z.face==="mceinline"||z.style.fontFamily==="mceinline")}function k(z){return z?y[z]:y}function j(z,F){if(z)if(typeof z!=="string")D(z,function(G,I){j(I,G)});else{F=F.length?F:[F];D(F,function(G){if(G.deep===ea)G.deep=!G.selector;if(G.split===ea)G.split=!G.selector||G.inline;if(G.remove===ea&&G.selector&&!G.inline)G.remove="none";if(G.selector&&G.inline){G.mixed=true;G.block_expand=true}if(typeof G.classes==="string")G.classes=
G.classes.split(/\s+/)});y[z]=F}}function b(z,F,G){function I(O){var P=O.startContainer,J=O.startOffset;if(P.nodeType==1||P.nodeValue==="")if(P=P.nodeType==1?P.childNodes[J]:P){P=new X(P,P.parentNode);for(J=P.current();J;J=P.next())if(J.nodeType==3&&!e(J)){O.setStart(J,0);break}}return O}function T(O,P){P=P||N;if(O){D(P.styles,function(J,Q){B.setStyle(O,Q,f(J,F))});D(P.attributes,function(J,Q){B.setAttrib(O,Q,f(J,F))});D(P.classes,function(J){J=f(J,F);B.hasClass(O,J)||B.addClass(O,J)})}}function L(O){var P=
[],J,Q;J=N.inline||N.block;Q=B.create(J);T(Q);C.walk(O,function(R){function ca(Y){var ba=Y.nodeName.toLowerCase(),da=Y.parentNode.nodeName.toLowerCase(),fa;if(u(ba,"br")){$=0;N.block&&B.remove(Y)}else if(N.wrapper&&d(Y,z,F))$=0;else if(N.block&&!N.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(ba)){Y=B.rename(Y,J);T(Y);P.push(Y);$=0}else{if(N.selector){D(U,function(ga){if(B.is(Y,ga.selector)&&!q(Y)){T(Y,ga);fa=true}});if(!N.inline||fa){$=0;return}}if(E(J,ba)&&E(da,J)){if(!$){$=Q.cloneNode(V);
Y.parentNode.insertBefore($,Y);P.push($)}$.appendChild(Y)}else{$=0;D(m.grep(Y.childNodes),ca);$=0}}}var $;D(R,ca)});D(P,function(R){function ca(Y){var ba,da;D(Y.childNodes,function(fa){if(fa.nodeType==1&&!p(fa)&&!q(fa)){ba=fa;return V}});if(ba&&r(ba,N)){da=ba.cloneNode(V);T(da);B.replace(da,Y,aa);B.remove(ba,1)}return da||Y}var $;$=function(Y){var ba=0;D(Y.childNodes,function(da){!e(da)&&!p(da)&&ba++});return ba}(R);if($===0)B.remove(R,1);else if(N.inline||N.wrapper){if(!N.exact&&$===1)R=ca(R);D(U,
function(Y){D(B.select(Y.inline,R),function(ba){a(Y,F,ba,Y.exact?ba:null)})});if(d(R.parentNode,z,F)){B.remove(R,1);R=0;return aa}N.merge_with_parents&&B.getParent(R.parentNode,function(Y){if(d(Y,z,F)){B.remove(R,1);R=0;return aa}});if(R){R=t(n(R),R);R=t(R,n(R,aa))}}})}var U=k(z),N=U[0],S;if(N)if(G){S=B.createRng();S.setStartBefore(G);S.setEndAfter(G);L(i(S,U))}else if(!M.isCollapsed()||!N.inline){G=M.getBookmark();L(i(M.getRng(aa),U));M.moveToBookmark(G);M.setRng(I(M.getRng(aa)));o.nodeChanged()}else x("apply",
z,F)}function g(z,F,G){function I(J){var Q,R,ca;Q=m.grep(J.childNodes);R=0;for(ca=S.length;R<ca;R++)if(a(S[R],F,J,J))break;if(O.deep){R=0;for(ca=Q.length;R<ca;R++)I(Q[R])}}function T(J){var Q;D(B.getParents(J.parentNode,void 0,B.getRoot()).reverse(),function(R){var ca;if(!Q&&R.id!="_start"&&R.id!="_end")if((ca=d(R,z,F))&&ca.split!==false)Q=R});return Q}function L(J,Q,R,ca){var $,Y,ba,da,fa,ga;if(J){ga=J.parentNode;for($=Q.parentNode;$&&$!=ga;$=$.parentNode){Y=$.cloneNode(V);for(fa=0;fa<S.length;fa++)if(a(S[fa],
F,Y,Y)){Y=0;break}if(Y){ba&&Y.appendChild(ba);da||(da=Y);ba=Y}}if(ca&&(!O.mixed||!A(J)))Q=B.split(J,Q);if(ba){R.parentNode.insertBefore(ba,R);da.appendChild(R)}}return Q}function U(J){var Q=B.get(J?"_start":"_end"),R=Q[J?"firstChild":"lastChild"];if(p(R))R=R[J?"firstChild":"lastChild"];B.remove(Q,true);return R}function N(J){var Q,R;J=i(J,S,aa);if(O.split){Q=s(J,aa);R=s(J);if(Q!=R){Q=c(Q,"span",{id:"_start",_mce_type:"bookmark"});R=c(R,"span",{id:"_end",_mce_type:"bookmark"});L(T(Q),Q,Q,true);L(T(R),
R,R,true);Q=U(aa);R=U()}else Q=R=L(T(Q),Q,Q,true);J.startContainer=Q.parentNode;J.startOffset=H(Q);J.endContainer=R.parentNode;J.endOffset=H(R)+1}C.walk(J,function(ca){D(ca,function($){I($)})})}var S=k(z),O=S[0],P;if(G){P=B.createRng();P.setStartBefore(G);P.setEndAfter(G);N(P)}else if(!M.isCollapsed()||!O.inline){G=M.getBookmark();N(M.getRng(aa));M.moveToBookmark(G);o.nodeChanged()}else x("remove",z,F)}function d(z,F,G,I){function T(N,S,O){var P,J,Q=S[O];if(Q)if(Q.length===ea)for(P in Q){if(Q.hasOwnProperty(P)){J=
O==="attributes"?B.getAttrib(N,P):v(N,P);if(I&&!J&&!S.exact)return;if((!I||S.exact)&&!u(J,f(Q[P],G)))return}}else for(P=0;P<Q.length;P++)if(O==="attributes"?B.getAttrib(N,Q[P]):v(N,Q[P]))break;return S}var L=k(F),U;if(L&&z)for(U=0;U<L.length;U++){F=L[U];if(r(z,F)&&T(z,F,"attributes")&&T(z,F,"styles")){if(L=F.classes)for(U=0;U<L.length;U++)if(!B.hasClass(z,L[U]))return;return F}}}function l(z,F,G){function I(L){L=B.getParent(L,function(U){return!!d(U,z,F,true)});return d(L,z,F)}var T;if(G)return I(G);
if(M.isCollapsed()){for(G=Z.apply.length-1;G>=0;G--)if(Z.apply[G].name==z)return true;for(G=Z.remove.length-1;G>=0;G--)if(Z.remove[G].name==z)return false;return I(M.getNode())}G=M.getNode();if(I(G))return aa;T=M.getStart();if(T!=G)if(I(T))return aa;return V}function r(z,F){if(u(z,F.inline))return aa;if(u(z,F.block))return aa;if(F.selector)return B.is(z,F.selector)}function u(z,F){z=z||"";F=F||"";z=""+(z.nodeName||z);F=""+(F.nodeName||F);return z.toLowerCase()==F.toLowerCase()}function v(z,F){var G=
B.getStyle(z,F);if(F=="color"||F=="backgroundColor")G=B.toHex(G);if(F=="fontWeight"&&G==700)G="bold";return""+G}function f(z,F){if(typeof z!="string")z=z(F);else if(F)z=z.replace(/%(\w+)/g,function(G,I){return F[I]||G});return z}function e(z){return z&&z.nodeType===3&&/^([\s\r\n]+|)$/.test(z.nodeValue)}function c(z,F,G){F=B.create(F,G);z.parentNode.insertBefore(F,z);F.appendChild(z);return F}function i(z,F){function G(O,P,J,Q){var R;for(Q=Q||B.getRoot();;){R=O.parentNode;if(R==Q||!F[0].block_expand&&
A(R))break;for(N=R[P];N&&N!=O;N=N[J]){if(N.nodeType==1&&!p(N))return O;if(N.nodeType==3&&!e(N))return O}O=O.parentNode}return O}var I=z.startContainer,T=z.startOffset,L=z.endContainer,U=z.endOffset,N,S;if(I.nodeType==1&&I.hasChildNodes()){S=I.childNodes.length-1;I=I.childNodes[T>S?S:T];if(I.nodeType==3)T=0}if(L.nodeType==1&&L.hasChildNodes()){S=L.childNodes.length-1;L=L.childNodes[U>S?S:U-1];if(L.nodeType==3)U=L.nodeValue.length}if(p(I.parentNode))I=I.parentNode;if(p(I))I=I.nextSibling||I;if(p(L.parentNode))L=
L.parentNode;if(p(L))L=L.previousSibling||L;if(F[0].inline||F[0].block_expand){I=G(I,"firstChild","nextSibling");L=G(L,"lastChild","previousSibling")}if(F[0].selector&&F[0].expand!==V&&!F[0].inline){S=function(O,P){var J,Q,R;if(O.nodeType==3&&O.nodeValue.length==0&&O[P])O=O[P];J=B.getParents(O,void 0,B.getRoot());for(Q=0;Q<J.length;Q++)for(R=0;R<F.length;R++)if(B.is(J[Q],F[R].selector))return J[Q];return O};I=S(I,"previousSibling");L=S(L,"nextSibling")}if(F[0].block||F[0].selector){S=function(O,P){var J;
F[0].wrapper||(J=B.getParent(O,F[0].block));J||(J=B.getParent(O.nodeType==3?O.parentNode:O,A));if(J&&F[0].wrapper)J=B.getParents(J,"ul,ol",B.getRoot()).reverse()[0]||J;if(!J)for(J=O;J[P]&&!A(J[P]);){J=J[P];if(u(J,"br"))break}return J||O};I=S(I,"previousSibling");L=S(L,"nextSibling");if(F[0].block){A(I)||(I=G(I,"firstChild","nextSibling"));A(L)||(L=G(L,"lastChild","previousSibling"))}}if(I.nodeType==1){T=H(I);I=I.parentNode}if(L.nodeType==1){U=H(L)+1;L=L.parentNode}return{startContainer:I,startOffset:T,
endContainer:L,endOffset:U}}function a(z,F,G,I){var T,L,U;if(!r(G,z))return V;if(z.remove!="all"){D(z.styles,function(N,S){N=f(N,F);if(typeof S==="number"){S=N;I=0}if(!I||u(v(I,S),N))B.setStyle(G,S,"");U=1});if(U&&B.getAttrib(G,"style")==""){G.removeAttribute("style");G.removeAttribute("_mce_style")}D(z.attributes,function(N,S){var O;N=f(N,F);if(typeof S==="number"){S=N;I=0}if(!I||u(B.getAttrib(I,S),N)){if(S=="class")if(N=B.getAttrib(G,S)){O="";D(N.split(/\s+/),function(P){if(/mce\w+/.test(P))O+=
(O?" ":"")+P});if(O){B.setAttrib(G,S,O);return}}S=="class"&&G.removeAttribute("className");W.test(S)&&G.removeAttribute("_mce_"+S);G.removeAttribute(S)}});D(z.classes,function(N){N=f(N,F);if(!I||B.hasClass(I,N))B.removeClass(G,N)});L=B.getAttribs(G);for(T=0;T<L.length;T++)if(L[T].nodeName.indexOf("_")!==0)return V}if(z.remove!="none"){h(G,z);return aa}}function h(z,F){var G=z.parentNode,I;if(F.block)if(K){if(G==B.getRoot())if(!F.list_block||!u(z,F.list_block))D(m.grep(z.childNodes),function(L){if(E(K,
L.nodeName.toLowerCase()))if(I)I.appendChild(L);else I=c(L,K);else I=0})}else{var T=function(L,U,N){L=n(L,U,N);return!L||L.nodeName=="BR"||A(L)};if(A(z)&&!A(G)){!T(z,V)&&!T(z.firstChild,aa,1)&&z.insertBefore(B.create("br"),z.firstChild);!T(z,aa)&&!T(z.lastChild,V,1)&&z.appendChild(B.create("br"))}}F.selector&&F.inline&&!u(F.inline,z)||B.remove(z,1)}function n(z,F,G){if(z){F=F?"nextSibling":"previousSibling";for(z=G?z:z[F];z;z=z[F])if(z.nodeType==1||!e(z))return z}}function p(z){return z&&z.nodeType==
1&&z.getAttribute("_mce_type")=="bookmark"}function t(z,F){function G(L,U){function N(O){var P={};D(B.getAttribs(O),function(J){J=J.nodeName.toLowerCase();if(J.indexOf("_")!==0&&J!=="style")P[J]=B.getAttrib(O,J)});return P}function S(O,P){var J,Q;for(Q in O)if(O.hasOwnProperty(Q)){J=P[Q];if(J===ea)return V;if(O[Q]!=J)return V;delete P[Q]}for(Q in P)if(P.hasOwnProperty(Q))return V;return aa}if(L.nodeName!=U.nodeName)return V;if(!S(N(L),N(U)))return V;if(!S(B.parseStyle(B.getAttrib(L,"style")),B.parseStyle(B.getAttrib(U,
"style"))))return V;return aa}var I,T;if(z&&F){T=function(L,U){for(I=L;I;I=I[U]){if(I.nodeType==3&&!e(I))break;if(I.nodeType==1&&!p(I))return I}return L};z=T(z,"previousSibling");F=T(F,"nextSibling");if(G(z,F)){for(I=z.nextSibling;I&&I!=F;){T=I;I=I.nextSibling;z.appendChild(T)}B.remove(F);D(m.grep(F.childNodes),function(L){z.appendChild(L)});return z}}return F}function s(z,F){var G,I,T;G=z[F?"startContainer":"endContainer"];I=z[F?"startOffset":"endOffset"];if(G.nodeType==1){T=G.childNodes.length-
1;!F&&I&&I--;G=G.childNodes[I>T?T:I]}return G}function x(z,F,G){function I(){return Z.apply.length||Z.remove.length}function T(N){D(Z.apply.reverse(),function(S){b(S.name,S.vars,N)});D(Z.remove.reverse(),function(S){g(S.name,S.vars,N)});B.remove(N,1);Z.apply=[];Z.remove=[]}var L=Z[z],U=Z[z=="apply"?"remove":"apply"];for(z=L.length-1;z>=0;z--)if(L[z].name==F)return;L.push({name:F,vars:G});for(z=U.length-1;z>=0;z--)U[z].name==F&&U.splice(z,1);if(I()){o.getDoc().execCommand("FontName",false,"mceinline");
Z.lastRng=M.getRng();D(B.select("font,span"),function(N){var S;if(q(N)){S=M.getBookmark();T(N);M.moveToBookmark(S);o.nodeChanged()}});if(!Z.isListening&&I()){Z.isListening=true;D("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(N){o[N].addToTop(function(S,O){if(I()&&!m.dom.RangeUtils.compareRanges(Z.lastRng,M.getRng())){D(B.select("font,span"),function(P){var J;if(q(P))if(J=P.firstChild){T(P);P=B.createRng();P.setStart(J,J.nodeValue.length);P.setEnd(J,J.nodeValue.length);M.setRng(P);S.nodeChanged()}else B.remove(P)});
if(O.type=="keyup"||O.type=="mouseup"){Z.apply=[];Z.remove=[]}}})})}}}var y={},D=m.each,B=o.dom,M=o.selection,X=m.dom.TreeWalker,C=new m.dom.RangeUtils(B),E=o.schema.isValid,A=B.isBlock,K=o.settings.forced_root_block,H=B.nodeIndex,W=/^(src|href|style)$/,V=false,aa=true,ea,Z={apply:[],remove:[]};m.extend(this,{get:k,register:j,apply:b,remove:g,toggle:function(z,F,G){l(z,F,G)?g(z,F,G):b(z,F,G)},match:l,matchAll:function(z,F){var G,I=[],T={},L,U;if(M.isCollapsed()){for(L=0;L<z.length;L++)for(G=Z.remove.length-
1;G>=0;G--){U=z[L];if(Z.remove[G].name==U){T[U]=true;break}}for(G=Z.apply.length-1;G>=0;G--)for(L=0;L<z.length;L++){U=z[L];if(!T[U]&&Z.apply[G].name==U){T[U]=true;I.push(U)}}}G=M.getStart();B.getParent(G,function(N){var S,O;for(S=0;S<z.length;S++){O=z[S];if(!T[O]&&d(N,O,F)){T[O]=true;I.push(O)}}});return I},matchNode:d,canApply:function(z){z=k(z);var F,G,I,T;if(z){F=M.getStart();F=B.getParents(F,void 0,B.getRoot());for(I=z.length-1;I>=0;I--){T=z[I].selector;if(!T)return aa;for(G=F.length-1;G>=0;G--)if(B.is(F[G],
T))return aa}}return V}})}})(tinymce);
tinymce.onAddEditor.add(function(m,o){var q,k,j,b=o.settings;if(b.inline_styles){k=m.explode(b.font_size_style_values);var g=function(l,r){j.replace(j.create("span",{style:r}),l,1)};q={font:function(l,r){g(r,{backgroundColor:r.style.backgroundColor,color:r.color,fontFamily:r.face,fontSize:k[parseInt(r.size)-1]})},u:function(l,r){g(r,{textDecoration:"underline"})},strike:function(l,r){g(r,{textDecoration:"line-through"})}};var d=function(l,r){j=l.dom;b.convert_fonts_to_spans&&m.each(j.select("font,u,strike",
r.node),function(u){q[u.nodeName.toLowerCase()](o.dom,u)})};o.onPreProcess.add(d);o.onInit.add(function(){o.selection.onSetContent.add(d)})}});
